{
  "comments": [
    {
      "key": {
        "uuid": "e45eedce_8ca5cb8c",
        "filename": "compiler/utils/arm/assembler_arm.h",
        "patchSetId": 3
      },
      "lineNbr": 380,
      "author": {
        "id": 1052304
      },
      "writtenOn": "2015-08-27T11:26:24Z",
      "side": 1,
      "message": "I need to read the patch more in details, but I am wondering about one thing.\n\n`kCcDontCare` is used as a default for the `set_cc` arg in instructions. If I understand correctly it means that  instructions that don\u0027t override the default can be generated as setting the condition flags, and implies that everything should work if we replace the default with `kCcSet`. Does it?\n\nI don\u0027t know about the arm32/T2 code, but I\u0027m pretty sure such a behaviour would break the arm64 code in the opt compiler. We write code like:\n\n    subs dst, in1, in2\n    \u003cdo some other stuff not setting the flags\u003e\n    b.cond target",
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c459e9e9_2efdaba2",
        "filename": "compiler/utils/arm/assembler_arm.h",
        "patchSetId": 3
      },
      "lineNbr": 380,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2015-08-27T11:55:41Z",
      "side": 1,
      "message": "Yes, everything should work if the default is changed to kCcSet, but some instructions would use the 32-bit encoding instead of available 16-bit encoding, for example ADD/MOV with high registers and many instructions in IT blocks.\n\nOn arm64, the S flag is uniformly present for all instructions (notably CMP is an alias for SUBS). This is not the case for 16-bit Thumb instructions which we want to prioritize over 32-bit versions, so we use a different approach. So if you want to use such code on Thumb2, you will have to specify kCcKeep for all instructions in \"\u003cdo some other stuff not setting the flags\u003e\". And this wasn\u0027t even possible before, so such code was previously impossible to write.",
      "parentUuid": "e45eedce_8ca5cb8c",
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e478ad71_b6edc884",
        "filename": "compiler/utils/arm/assembler_arm.h",
        "patchSetId": 3
      },
      "lineNbr": 380,
      "author": {
        "id": 1052304
      },
      "writtenOn": "2015-08-28T09:19:02Z",
      "side": 1,
      "message": "Ok sounds good! I guess it will be worth a test ;)\nMaybe the default value can be abstracted to make testing it easy? `static constexpr SetCC ...`?",
      "parentUuid": "c459e9e9_2efdaba2",
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "247566b9_131e4ca0",
        "filename": "compiler/utils/arm/assembler_arm.h",
        "patchSetId": 3
      },
      "lineNbr": 380,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2015-09-01T10:57:50Z",
      "side": 1,
      "message": "I don\u0027t see how that would make testing easier.",
      "parentUuid": "e478ad71_b6edc884",
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e45eedce_ef41d164",
        "filename": "compiler/utils/arm/assembler_arm_test.h",
        "patchSetId": 3
      },
      "lineNbr": 25,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-08-30T18:19:45Z",
      "side": 1,
      "message": "Nit: one per line?",
      "range": {
        "startLine": 24,
        "startChar": 9,
        "endLine": 25,
        "endChar": 23
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8480d2c5_16d07c30",
        "filename": "compiler/utils/arm/assembler_arm_test.h",
        "patchSetId": 3
      },
      "lineNbr": 25,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2015-09-01T10:57:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e45eedce_ef41d164",
      "range": {
        "startLine": 24,
        "startChar": 9,
        "endLine": 25,
        "endChar": 23
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "841b715a_a3065a5a",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1125,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-08-30T18:19:45Z",
      "side": 1,
      "message": "instruction -\u003e instructions",
      "range": {
        "startLine": 1125,
        "startChar": 25,
        "endLine": 1125,
        "endChar": 36
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "84c53226_8ecc5ba2",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1125,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2015-09-01T10:57:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "841b715a_a3065a5a",
      "range": {
        "startLine": 1125,
        "startChar": 25,
        "endLine": 1125,
        "endChar": 36
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "446ed97b_f2c45e0d",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1126,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-08-30T18:19:45Z",
      "side": 1,
      "message": "remove?",
      "range": {
        "startLine": 1126,
        "startChar": 37,
        "endLine": 1126,
        "endChar": 38
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a46956e6_f7bf00e3",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1126,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2015-09-01T10:57:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "446ed97b_f2c45e0d",
      "range": {
        "startLine": 1126,
        "startChar": 37,
        "endLine": 1126,
        "endChar": 38
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e48fcdab_612ff08e",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1147,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-08-30T18:19:45Z",
      "side": 1,
      "message": "it\u0027s -\u003e it is",
      "range": {
        "startLine": 1147,
        "startChar": 34,
        "endLine": 1147,
        "endChar": 38
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "447a5aab_d4e99cef",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1147,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2015-09-01T10:57:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e48fcdab_612ff08e",
      "range": {
        "startLine": 1147,
        "startChar": 34,
        "endLine": 1147,
        "endChar": 38
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e45eedce_8f361d0c",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1151,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-08-30T18:19:45Z",
      "side": 1,
      "message": "There\u0027s -\u003e There is",
      "range": {
        "startLine": 1151,
        "startChar": 40,
        "endLine": 1151,
        "endChar": 47
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "64c03e16_cdc2696e",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1151,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2015-09-01T10:57:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e45eedce_8f361d0c",
      "range": {
        "startLine": 1151,
        "startChar": 40,
        "endLine": 1151,
        "endChar": 47
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "841b715a_c30b5661",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1155,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-08-30T18:19:45Z",
      "side": 1,
      "message": "if and only if (here and below). I tend to avoid abbreviations in comments.",
      "range": {
        "startLine": 1155,
        "startChar": 43,
        "endLine": 1155,
        "endChar": 46
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c4dbaa04_70db1059",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1155,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2015-09-01T10:57:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "841b715a_c30b5661",
      "range": {
        "startLine": 1155,
        "startChar": 43,
        "endLine": 1155,
        "endChar": 46
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "444df958_b1894005",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1638,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-08-30T18:19:45Z",
      "side": 1,
      "message": "One per line?",
      "range": {
        "startLine": 1637,
        "startChar": 32,
        "endLine": 1638,
        "endChar": 60
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "247566b9_73db0059",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1638,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2015-09-01T10:57:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "444df958_b1894005",
      "range": {
        "startLine": 1637,
        "startChar": 32,
        "endLine": 1638,
        "endChar": 60
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "446ed97b_92c96224",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1679,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-08-30T18:19:45Z",
      "side": 1,
      "message": "One per line?",
      "range": {
        "startLine": 1678,
        "startChar": 32,
        "endLine": 1679,
        "endChar": 60
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "04d222e7_b2c98091",
        "filename": "compiler/utils/arm/assembler_thumb2.cc",
        "patchSetId": 3
      },
      "lineNbr": 1679,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2015-09-01T10:57:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "446ed97b_92c96224",
      "range": {
        "startLine": 1678,
        "startChar": 32,
        "endLine": 1679,
        "endChar": 60
      },
      "revId": "b0ec24596b0a44c77b57cc3b5a05b198623acbde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}