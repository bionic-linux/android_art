{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0e2a216f_e2cfd122",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1894735
      },
      "writtenOn": "2021-12-08T19:57:48Z",
      "side": 1,
      "message": "Ping on this Cl :) Do you think alternate fix of getting the updated class size is better?: https://android-review.googlesource.com/c/platform/art/+/1903396/2/runtime/gc/heap-inl.h#173",
      "revId": "e79407352f0431e82c2a2c1ac357e4ef97efefa1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "08c7bd48_45c65ec2",
        "filename": "runtime/gc/heap-inl.h",
        "patchSetId": 2
      },
      "lineNbr": 173,
      "author": {
        "id": 1894735
      },
      "writtenOn": "2021-12-01T14:34:26Z",
      "side": 1,
      "message": "Continuing from my earlier comment, AllocateInternalWithGC suspends waiting for a GC and then returns a nullptr when it sees that instrumentation has changed: https://cs.android.com/android/platform/superproject/+/master:art/runtime/gc/heap.cc;l\u003d1863;\n\nWhen we restart the allocation here we can pick up the new size and keep the check in it\u0027s original place.",
      "revId": "e79407352f0431e82c2a2c1ac357e4ef97efefa1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fcb313fb_e4354647",
        "filename": "runtime/gc/heap-inl.h",
        "patchSetId": 2
      },
      "lineNbr": 173,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2021-12-10T18:08:51Z",
      "side": 1,
      "message": "Yes. I agree that\u0027s much better.\n\nWhat happens if you add a finalizer? Is that allowed? I guess we just fail to do so in this case, and potentially leak some stuff? That\u0027s probably OK. The alternative is to go all the way back to calling Class::Alloc, or somehow having it retry.",
      "parentUuid": "08c7bd48_45c65ec2",
      "revId": "e79407352f0431e82c2a2c1ac357e4ef97efefa1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ccb5b36_94f84adc",
        "filename": "runtime/gc/heap-inl.h",
        "patchSetId": 2
      },
      "lineNbr": 173,
      "author": {
        "id": 1894735
      },
      "writtenOn": "2021-12-14T14:13:18Z",
      "side": 1,
      "message": "Thanks! For now, I went with the simple fix. PTAL.",
      "parentUuid": "fcb313fb_e4354647",
      "revId": "e79407352f0431e82c2a2c1ac357e4ef97efefa1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "18fa40be_dcf4ffa0",
        "filename": "runtime/gc/heap-inl.h",
        "patchSetId": 2
      },
      "lineNbr": 173,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2021-12-14T16:52:41Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "5ccb5b36_94f84adc",
      "revId": "e79407352f0431e82c2a2c1ac357e4ef97efefa1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}