{
  "comments": [
    {
      "key": {
        "uuid": "503aad31_0588de5c",
        "filename": "runtime/monitor.cc",
        "patchSetId": 2
      },
      "lineNbr": 130,
      "author": {
        "id": 1124848
      },
      "writtenOn": "2018-06-01T20:00:58Z",
      "side": 0,
      "message": "Dan, how is the race described in this comment (owner unlocking the thin lock while it is being inflated) avoided in this \"suspend-less inflate\" design? thanks.",
      "revId": "63fe8dc454298852ae31cfc2692108488a58c650",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29f7af2a_2307aaa7",
        "filename": "runtime/monitor.cc",
        "patchSetId": 2
      },
      "lineNbr": 130,
      "author": {
        "id": 1130394
      },
      "writtenOn": "2018-06-01T20:39:40Z",
      "side": 0,
      "message": "Joel, the new code uses CAS to unlock. If the lock is inflated during the unlock attempt, the CAS will fail, causing the unlocker to loop around and go down the thick-lock path for unlock.",
      "parentUuid": "503aad31_0588de5c",
      "revId": "63fe8dc454298852ae31cfc2692108488a58c650",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1cee758b_91e44d0f",
        "filename": "runtime/monitor.cc",
        "patchSetId": 2
      },
      "lineNbr": 130,
      "author": {
        "id": 1124848
      },
      "writtenOn": "2018-06-01T21:20:29Z",
      "side": 0,
      "message": "Got it. It makes sense, cool! thanks.",
      "parentUuid": "29f7af2a_2307aaa7",
      "revId": "63fe8dc454298852ae31cfc2692108488a58c650",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aed48cda_559317f2",
        "filename": "runtime/monitor.cc",
        "patchSetId": 2
      },
      "lineNbr": 130,
      "author": {
        "id": 1124848
      },
      "writtenOn": "2018-06-01T21:23:41Z",
      "side": 0,
      "message": "btw, perhaps worth mentioning in the commit message that this is how you\u0027re avoiding suspending incase it isn\u0027t obvious to someone",
      "parentUuid": "1cee758b_91e44d0f",
      "revId": "63fe8dc454298852ae31cfc2692108488a58c650",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1e5ae95_8dc72776",
        "filename": "runtime/monitor.cc",
        "patchSetId": 2
      },
      "lineNbr": 130,
      "author": {
        "id": 1124848
      },
      "writtenOn": "2018-06-01T21:55:05Z",
      "side": 0,
      "message": "Done",
      "parentUuid": "aed48cda_559317f2",
      "revId": "63fe8dc454298852ae31cfc2692108488a58c650",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c9eb639e_dd9b65c0",
        "filename": "runtime/monitor.cc",
        "patchSetId": 2
      },
      "lineNbr": 972,
      "author": {
        "id": 1124848
      },
      "writtenOn": "2018-06-01T21:55:05Z",
      "side": 0,
      "message": "If install succeeded then the lock should be fat locked.\n\nIs it not worth doing this check, or is it some issue preventing it? At this point the lockword state bits should be fat-locked ?",
      "revId": "63fe8dc454298852ae31cfc2692108488a58c650",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}