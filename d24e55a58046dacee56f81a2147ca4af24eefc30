{
  "comments": [
    {
      "key": {
        "uuid": "93c281cf_d73e9ab2",
        "filename": "runtime/Android.bp",
        "patchSetId": 2
      },
      "lineNbr": 294,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-13T22:57:58Z",
      "side": 1,
      "message": "What\u0027s the reconciliation strategy for goldfish?",
      "revId": "d24e55a58046dacee56f81a2147ca4af24eefc30",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "abf21f70_e60ea1d1",
        "filename": "runtime/Android.bp",
        "patchSetId": 2
      },
      "lineNbr": 294,
      "author": {
        "id": 1074526
      },
      "writtenOn": "2017-07-13T23:00:00Z",
      "side": 1,
      "message": "I am not sure I understand all implications on how we build the Studio image + emulator well enough to comment. I was hoping Andreas or you had some insights for me :-)",
      "parentUuid": "93c281cf_d73e9ab2",
      "revId": "d24e55a58046dacee56f81a2147ca4af24eefc30",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6dcbcf1c_ae079cb3",
        "filename": "runtime/Android.bp",
        "patchSetId": 2
      },
      "lineNbr": 294,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-13T23:02:14Z",
      "side": 1,
      "message": "Well it won\u0027t work for goldfish like this, it would have to either feed in additional flags to ART when ART is being compiled (e.g. from a product file), or feed in runtime flags to dex2oat/dalvikvm for the target capabilities.",
      "parentUuid": "abf21f70_e60ea1d1",
      "revId": "d24e55a58046dacee56f81a2147ca4af24eefc30",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "214ba819_bc8fc609",
        "filename": "runtime/Android.bp",
        "patchSetId": 2
      },
      "lineNbr": 294,
      "author": {
        "id": 1074526
      },
      "writtenOn": "2017-07-13T23:06:07Z",
      "side": 1,
      "message": "Yes, when building for the emulator, we need to set \n\n--instruction-set-features\u003d-ssse3,-sse4.1,-sse4.2,-avx,-avx2,-popcnt\n\nagain. But what I meant is that I am not sure how Studio builds/runs, so I am not sure if they already set explicit flags.",
      "parentUuid": "6dcbcf1c_ae079cb3",
      "revId": "d24e55a58046dacee56f81a2147ca4af24eefc30",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db230366_50b849b2",
        "filename": "runtime/Android.bp",
        "patchSetId": 2
      },
      "lineNbr": 294,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-13T23:19:10Z",
      "side": 1,
      "message": "You have to add these to the right product file. Which file? I am not 100% sure. It depends on the lunch target and what gets inherited.\n\nPossibly device/generic/qemu/qemu_x86.mk and qemu_x86_64.mk\n\n   # dex2oat for preopt will get these flags\n   PRODUCT_DEX_PREOPT_DEFAULT_FLAGS +\u003d --instruction-set-features\u003d-ssse3,-sse4.1,-sse4.2,-avx,-avx2,-popcnt\n\n   # when dex2oat runs it makes sure not to use SSE features\n   PRODUCT_PROPERTIY_OVERRIDES +\u003d \\\n   dalvik.vm.dex2oat-flags\u003d--instruction-set-features\u003d-ssse3,-sse4.1,-sse4.2,-avx,-avx2,-popcnt \\\n   dalvik.vm.image-dex2oat-flags\u003d--instruction-set-features\u003d-ssse3,-sse4.1,-sse4.2,-avx,-avx2,-popcnt\n\nI would then recommend booting emulator and making sure it still works :).",
      "parentUuid": "214ba819_bc8fc609",
      "revId": "d24e55a58046dacee56f81a2147ca4af24eefc30",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}