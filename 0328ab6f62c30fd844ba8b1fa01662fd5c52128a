{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "af8f2890_ac6c723e",
        "filename": "artd/artd_test.cc",
        "patchSetId": 9
      },
      "lineNbr": 1129,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-16T10:14:09Z",
      "side": 1,
      "message": "It\u0027s better to test the whole message that starts with `[` and ends with `]`, though it means you need to populate all fields in the mocked `ExecAndReturnResult`.",
      "range": {
        "startLine": 1129,
        "startChar": 19,
        "endLine": 1129,
        "endChar": 43
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4702e874_d0c3171c",
        "filename": "artd/artd_test.cc",
        "patchSetId": 9
      },
      "lineNbr": 1129,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2024-09-17T15:09:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "af8f2890_ac6c723e",
      "range": {
        "startLine": 1129,
        "startChar": 19,
        "endLine": 1129,
        "endChar": 43
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1700a4c2_83eff968",
        "filename": "artd/artd_test.cc",
        "patchSetId": 9
      },
      "lineNbr": 1135,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-16T10:14:09Z",
      "side": 1,
      "message": "Please test the case where dex2oat is terminated by a signal.",
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ab7e6b03_85d92677",
        "filename": "artd/artd_test.cc",
        "patchSetId": 9
      },
      "lineNbr": 1135,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2024-09-17T15:09:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1700a4c2_83eff968",
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33d9811c_5ba2b1c6",
        "filename": "libartservice/service/java/com/android/server/art/ArtManagerLocal.java",
        "patchSetId": 9
      },
      "lineNbr": 147,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-16T10:14:09Z",
      "side": 1,
      "message": "Will it be a good idea to put it in `Injector`?",
      "range": {
        "startLine": 147,
        "startChar": 37,
        "endLine": 147,
        "endChar": 60
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8232fa65_36458b98",
        "filename": "libartservice/service/java/com/android/server/art/ArtManagerLocal.java",
        "patchSetId": 9
      },
      "lineNbr": 147,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2024-09-17T15:09:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "33d9811c_5ba2b1c6",
      "range": {
        "startLine": 147,
        "startChar": 37,
        "endLine": 147,
        "endChar": 60
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a179c8ea_9f8676a2",
        "filename": "libartservice/service/java/com/android/server/art/ArtManagerLocal.java",
        "patchSetId": 9
      },
      "lineNbr": 147,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-18T10:24:20Z",
      "side": 1,
      "message": "Great! The code looks much cleaner now. Thanks!",
      "parentUuid": "8232fa65_36458b98",
      "range": {
        "startLine": 147,
        "startChar": 37,
        "endLine": 147,
        "endChar": 60
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b00aea29_269fc121",
        "filename": "libartservice/service/java/com/android/server/art/ArtManagerLocal.java",
        "patchSetId": 9
      },
      "lineNbr": 148,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-16T10:14:09Z",
      "side": 1,
      "message": "`\u003cvalue\u003e /* name */`",
      "range": {
        "startLine": 148,
        "startChar": 12,
        "endLine": 148,
        "endChar": 33
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e39605bc_2aae118b",
        "filename": "libartservice/service/java/com/android/server/art/ArtManagerLocal.java",
        "patchSetId": 9
      },
      "lineNbr": 148,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2024-09-17T15:09:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b00aea29_269fc121",
      "range": {
        "startLine": 148,
        "startChar": 12,
        "endLine": 148,
        "endChar": 33
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac56b89a_b3e0d438",
        "filename": "libartservice/service/java/com/android/server/art/ArtManagerLocal.java",
        "patchSetId": 9
      },
      "lineNbr": 389,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-16T10:14:09Z",
      "side": 1,
      "message": "If you put this in `Injector`, you can construct DexoptHelper with it within `Injector`, rather than having to pass it here.",
      "range": {
        "startLine": 389,
        "startChar": 55,
        "endLine": 389,
        "endChar": 78
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6a2f876d_80e26b0f",
        "filename": "libartservice/service/java/com/android/server/art/ArtManagerLocal.java",
        "patchSetId": 9
      },
      "lineNbr": 389,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2024-09-17T15:09:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ac56b89a_b3e0d438",
      "range": {
        "startLine": 389,
        "startChar": 55,
        "endLine": 389,
        "endChar": 78
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a3b8ff5_7a22a39c",
        "filename": "libartservice/service/java/com/android/server/art/Dex2OatStatsReporter.java",
        "patchSetId": 9
      },
      "lineNbr": 117,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-16T10:27:02Z",
      "side": 1,
      "message": "Partners have custom compilation reasons, and we don\u0027t want to drop data with custom compilation reasons during processing. Is data with the `UNKNOWN` value displayable? If not, let\u0027s add another value (e.g., `OTHER`) for custom compilation reasons.",
      "range": {
        "startLine": 115,
        "startChar": 12,
        "endLine": 117,
        "endChar": 99
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d0d1847_d4393877",
        "filename": "libartservice/service/java/com/android/server/art/Dex2OatStatsReporter.java",
        "patchSetId": 9
      },
      "lineNbr": 117,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2024-09-18T12:50:42Z",
      "side": 1,
      "message": "That\u0027s a bit of an edge case - usually UNKNOWN is the enum value that catches the values that have not been initialised, but for the ArtCompilationReason we have [ART_COMPILATION_REASON_UNSPECIFIED](https://cs.android.com/android/platform/superproject/main/+/main:frameworks/proto_logging/stats/enums/art/common_enums.proto;l\u003d33;drc\u003d4851888a58f36d424b7727261aa9bb84966c0ccc) for that purpose, so we might be able to repurpose this to represent custom compilation reasons from OEMs and display it, what do you think?",
      "parentUuid": "7a3b8ff5_7a22a39c",
      "range": {
        "startLine": 115,
        "startChar": 12,
        "endLine": 117,
        "endChar": 99
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3ee68ce5_cb87af0f",
        "filename": "libartservice/service/java/com/android/server/art/Dex2OatStatsReporter.java",
        "patchSetId": 9
      },
      "lineNbr": 117,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-18T13:14:01Z",
      "side": 1,
      "message": "Ah, so `UNSPECIFIED` is 0, while `UNKNOWN` is a proper value like any other values? Then it\u0027s fine. I just wanted to avoid using 0, as it\u0027s supposed to be a value with no semantics AFAIUI.",
      "parentUuid": "2d0d1847_d4393877",
      "range": {
        "startLine": 115,
        "startChar": 12,
        "endLine": 117,
        "endChar": 99
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "559c9a8d_0e928106",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 81,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-16T10:14:09Z",
      "side": 1,
      "message": "Same here. Put it in `Injector`?",
      "range": {
        "startLine": 81,
        "startChar": 46,
        "endLine": 81,
        "endChar": 69
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2940aeae_9e2e3f79",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 81,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2024-09-17T15:09:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "559c9a8d_0e928106",
      "range": {
        "startLine": 81,
        "startChar": 46,
        "endLine": 81,
        "endChar": 69
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "05b9c11e_e2fd9932",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 200,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-16T10:14:09Z",
      "side": 1,
      "message": "If the message doesn\u0027t match the pattern, it means dexopt failed before dex2oat was run. What about reporting EXEC_RESULT_STATUS_NOT_RUN in this case?\n\nIf you agree, then it\u0027s better to initialize `resultStatus` to `EXEC_RESULT_STATUS_NOT_RUN`, in case we forget to set it in some exceptional case.",
      "range": {
        "startLine": 200,
        "startChar": 24,
        "endLine": 200,
        "endChar": 36
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c767aeef_9f3c427f",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 200,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2024-09-17T15:09:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "05b9c11e_e2fd9932",
      "range": {
        "startLine": 200,
        "startChar": 24,
        "endLine": 200,
        "endChar": 36
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d5712395_dc360737",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 202,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-16T10:14:09Z",
      "side": 1,
      "message": "As these three fields are usually set altogether, what about defining a record in Dex2OatStatsReporter to hold all three fields so that they can be set at once?",
      "range": {
        "startLine": 200,
        "startChar": 20,
        "endLine": 202,
        "endChar": 41
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ff1ff65d_f963356c",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 202,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2024-09-17T15:09:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d5712395_dc360737",
      "range": {
        "startLine": 200,
        "startChar": 20,
        "endLine": 202,
        "endChar": 41
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0dc4ba3b_c443b630",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 300,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-16T10:14:09Z",
      "side": 1,
      "message": "It looks like artd already returns a message. Can we use `Objects.requireNonNull`?",
      "range": {
        "startLine": 300,
        "startChar": 28,
        "endLine": 300,
        "endChar": 50
      },
      "fixSuggestions": [
        {
          "fixId": "498c3354_72e831c3",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "libartservice/service/java/com/android/server/art/Dexopter.java",
              "range": {
                "startLine": 300,
                "startChar": 0,
                "endLine": 310,
                "endChar": 0
              },
              "replacement": "                        // Parse status, exit code and signal from the dex2oat error message\n                        Pattern pattern \u003d Pattern.compile(\n                                \"\\\\[status\u003d(\\\\d+),exit_code\u003d(\\\\d+),signal\u003d(\\\\d+)]\");\n                        Matcher matcher \u003d pattern.matcher(Objects.requireNonNull(e.getMessage()));\n                        if (matcher.matches()) {\n                            resultStatus \u003d Integer.parseInt(matcher.group(1));\n                            resultExitCode \u003d Integer.parseInt(matcher.group(2));\n                            resultSignal \u003d Integer.parseInt(matcher.group(3));\n"
            }
          ]
        }
      ],
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "18b0d0fb_377e3fcd",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 300,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2024-09-17T15:09:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0dc4ba3b_c443b630",
      "range": {
        "startLine": 300,
        "startChar": 28,
        "endLine": 300,
        "endChar": 50
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aba87db1_339e7f47",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 330,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-16T10:14:09Z",
      "side": 1,
      "message": "Nit: Trailing period.",
      "range": {
        "startLine": 330,
        "startChar": 80,
        "endLine": 330,
        "endChar": 81
      },
      "fixSuggestions": [
        {
          "fixId": "d2dc9020_d6834d36",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "libartservice/service/java/com/android/server/art/Dexopter.java",
              "range": {
                "startLine": 330,
                "startChar": 0,
                "endLine": 331,
                "endChar": 0
              },
              "replacement": "                        // Variables used in lambda needs to be effectively final.\n"
            }
          ]
        }
      ],
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "361a0930_1e3865b8",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 330,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2024-09-17T15:09:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aba87db1_339e7f47",
      "range": {
        "startLine": 330,
        "startChar": 80,
        "endLine": 330,
        "endChar": 81
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6adb6fe4_53d48bbb",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 331,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-16T10:14:09Z",
      "side": 1,
      "message": "You can use the value from `result` to avoid this assignment because it\u0027s already effectively final.",
      "range": {
        "startLine": 331,
        "startChar": 24,
        "endLine": 331,
        "endChar": 68
      },
      "fixSuggestions": [
        {
          "fixId": "3fc2cfeb_fc4b8da9",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "libartservice/service/java/com/android/server/art/Dexopter.java",
              "range": {
                "startLine": 331,
                "startChar": 0,
                "endLine": 332,
                "endChar": 0
              },
              "replacement": ""
            },
            {
              "path": "libartservice/service/java/com/android/server/art/Dexopter.java",
              "range": {
                "startLine": 340,
                "startChar": 0,
                "endLine": 341,
                "endChar": 0
              },
              "replacement": "                                                result.compilerFilter(), mParams.getReason(),\n"
            }
          ]
        }
      ],
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e3e5688c_a558920d",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 331,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2024-09-17T15:09:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6adb6fe4_53d48bbb",
      "range": {
        "startLine": 331,
        "startChar": 24,
        "endLine": 331,
        "endChar": 68
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "110996f3_f1f4501e",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 336,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-09-16T10:14:09Z",
      "side": 1,
      "message": "Ditto.",
      "range": {
        "startLine": 335,
        "startChar": 0,
        "endLine": 336,
        "endChar": 58
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "551b3944_e6e888b1",
        "filename": "libartservice/service/java/com/android/server/art/Dexopter.java",
        "patchSetId": 9
      },
      "lineNbr": 336,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2024-09-17T15:09:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "110996f3_f1f4501e",
      "range": {
        "startLine": 335,
        "startChar": 0,
        "endLine": 336,
        "endChar": 58
      },
      "revId": "0328ab6f62c30fd844ba8b1fa01662fd5c52128a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}