{
  "comments": [
    {
      "key": {
        "uuid": "2b7365d6_c3e1e004",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-21T10:52:09Z",
      "side": 1,
      "message": "nit: mention for which instructions",
      "range": {
        "startLine": 29,
        "startChar": 41,
        "endLine": 29,
        "endChar": 52
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1444f984_7ad3fd4d",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-09-21T12:25:17Z",
      "side": 1,
      "message": "None in this CL, I will add comments in the followup CLs.",
      "parentUuid": "2b7365d6_c3e1e004",
      "range": {
        "startLine": 29,
        "startChar": 41,
        "endLine": 29,
        "endChar": 52
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "36897e76_58a8e0e4",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-21T10:52:09Z",
      "side": 1,
      "message": "All but \"Clear\" must be ...",
      "range": {
        "startLine": 33,
        "startChar": 2,
        "endLine": 33,
        "endChar": 65
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ed0fd58_44813e99",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-09-21T12:25:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "36897e76_58a8e0e4",
      "range": {
        "startLine": 33,
        "startChar": 2,
        "endLine": 33,
        "endChar": 65
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "510ad6ce_e0147f97",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 36,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-21T10:52:09Z",
      "side": 1,
      "message": "Add a comment why a page size is a good size.",
      "range": {
        "startLine": 36,
        "startChar": 26,
        "endLine": 36,
        "endChar": 31
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "218c2814_096cfbce",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 36,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-09-21T12:25:17Z",
      "side": 1,
      "message": "There is no right size - it is balance between performance and memory.\nI felt like I don\u0027t want to take more than a page.\nAt the same time I tried smaller sizes and did hurt performance.\nNo right answer.",
      "parentUuid": "510ad6ce_e0147f97",
      "range": {
        "startLine": 36,
        "startChar": 26,
        "endLine": 36,
        "endChar": 31
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "88a72698_225eaa15",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 36,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-21T12:29:43Z",
      "side": 1,
      "message": "Then add all of that rationale here please.",
      "parentUuid": "218c2814_096cfbce",
      "range": {
        "startLine": 36,
        "startChar": 26,
        "endLine": 36,
        "endChar": 31
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9d89ddf7_903255a8",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-21T10:52:09Z",
      "side": 1,
      "message": "from",
      "range": {
        "startLine": 41,
        "startChar": 63,
        "endLine": 41,
        "endChar": 67
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "203b4a2c_bb4f7d30",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-09-21T12:25:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9d89ddf7_903255a8",
      "range": {
        "startLine": 41,
        "startChar": 63,
        "endLine": 41,
        "endChar": 67
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b9c6319e_6d39e8fa",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 73,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-21T10:52:09Z",
      "side": 1,
      "message": "how is it made read only?",
      "range": {
        "startLine": 73,
        "startChar": 44,
        "endLine": 73,
        "endChar": 53
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fe988107_30a3b237",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 73,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-09-21T12:25:17Z",
      "side": 1,
      "message": "By changing the data_ pointer to the shared read-only table.",
      "parentUuid": "b9c6319e_6d39e8fa",
      "range": {
        "startLine": 73,
        "startChar": 44,
        "endLine": 73,
        "endChar": 53
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cc928643_10194342",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 73,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-21T12:29:43Z",
      "side": 1,
      "message": "I meant, how is that shared table made read-only?",
      "parentUuid": "fe988107_30a3b237",
      "range": {
        "startLine": 73,
        "startChar": 44,
        "endLine": 73,
        "endChar": 53
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9c3accbb_6202cce1",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 96,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-21T11:40:10Z",
      "side": 1,
      "message": "Just discussed this with vmarko, realizing the indirection. As this is for performance, can we avoid it?",
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb65b198_b2c6465b",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 96,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-09-21T12:25:17Z",
      "side": 1,
      "message": "Not easily.  At least I can not think of simple way.  Since this has good performance benefit as-is, I would rather keep the CL as-is, and experiment with any other tweaks later.\n\nPerformance wish, I was thinking I might be able to cache the value of this field in register in mterp maybe.",
      "parentUuid": "9c3accbb_6202cce1",
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "25150bf4_aa702233",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 96,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-21T12:29:43Z",
      "side": 1,
      "message": "Why not easily? Can you expand? Maybe we can discuss once you\u0027re back.",
      "parentUuid": "fb65b198_b2c6465b",
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4776a85e_35a5cbbd",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 96,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-09-21T12:46:46Z",
      "side": 1,
      "message": "It would be difficult to do the cheap clears.",
      "parentUuid": "25150bf4_aa702233",
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3c80e83b_dfeb1afc",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 96,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-09-21T13:02:52Z",
      "side": 1,
      "message": "When do we need to clear the data?\n\nIf there are plain references, we need to do clear the cache when we start the GC and that\u0027s easily done from the same checkpoint function that walks the stack to mark references. Native pointers or offsets do not need clearing, except when we unload a dex file. But to unload a dex file, we first start a GC and clear the cache; if we execute any code from the dex file during that GC, the dex file is live and cannot be unloaded.",
      "parentUuid": "4776a85e_35a5cbbd",
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "832076fe_94128c20",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 98,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-21T10:52:09Z",
      "side": 1,
      "message": "Why do we want a thread safe clear? Please add comments.",
      "range": {
        "startLine": 98,
        "startChar": 69,
        "endLine": 98,
        "endChar": 86
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0690cd01_a8edfd32",
        "filename": "runtime/interpreter/interpreter_cache.h",
        "patchSetId": 4
      },
      "lineNbr": 98,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-09-21T12:25:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "832076fe_94128c20",
      "range": {
        "startLine": 98,
        "startChar": 69,
        "endLine": 98,
        "endChar": 86
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c64154e6_ff19493b",
        "filename": "runtime/native/dalvik_system_DexFile.cc",
        "patchSetId": 4
      },
      "lineNbr": 329,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-21T10:52:09Z",
      "side": 1,
      "message": "Having this here looks odd and makes me think this code should really be in runtime/class_linker or something.",
      "range": {
        "startLine": 326,
        "startChar": 0,
        "endLine": 329,
        "endChar": 3
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "71f7b0e3_7cd07aff",
        "filename": "runtime/native/dalvik_system_DexFile.cc",
        "patchSetId": 4
      },
      "lineNbr": 329,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-09-21T12:25:17Z",
      "side": 1,
      "message": "Well, it needs to be called when DexFile gets freed from memory.\n\nThis seems like ok location to me (I was going based on the RemoveNativeDebugInfoForDex below - I recall finding a place for with was tricky and we eventually settled on this method).  I am open to better suggestions.",
      "parentUuid": "c64154e6_ff19493b",
      "range": {
        "startLine": 326,
        "startChar": 0,
        "endLine": 329,
        "endChar": 3
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "460b974f_fa0e0bc4",
        "filename": "runtime/native/dalvik_system_DexFile.cc",
        "patchSetId": 4
      },
      "lineNbr": 329,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-21T12:29:43Z",
      "side": 1,
      "message": "I think a DexFileManager is in need :)",
      "parentUuid": "71f7b0e3_7cd07aff",
      "range": {
        "startLine": 326,
        "startChar": 0,
        "endLine": 329,
        "endChar": 3
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "90e2c5b5_8476ae3b",
        "filename": "runtime/native/dalvik_system_DexFile.cc",
        "patchSetId": 4
      },
      "lineNbr": 329,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-09-21T12:46:46Z",
      "side": 1,
      "message": "In need indeed.",
      "parentUuid": "460b974f_fa0e0bc4",
      "range": {
        "startLine": 326,
        "startChar": 0,
        "endLine": 329,
        "endChar": 3
      },
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4fef54f2_3c925338",
        "filename": "runtime/thread.h",
        "patchSetId": 4
      },
      "lineNbr": 1306,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-21T10:52:09Z",
      "side": 1,
      "message": "Add high level comment why this method is needed.",
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59d94620_d6ccee7d",
        "filename": "runtime/thread.h",
        "patchSetId": 4
      },
      "lineNbr": 1306,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-09-21T12:25:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4fef54f2_3c925338",
      "revId": "ab19514cbab6b51e491ee0257a201771b0b4bfa9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}