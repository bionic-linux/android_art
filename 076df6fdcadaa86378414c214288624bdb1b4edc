{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "bc5b7687_2d452e2c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 11,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-06-07T14:44:15Z",
      "side": 1,
      "message": "[Sorry for the delay.]\n\nI find it confusing to have defaults in subdirs that need to use paths adapted to other locations. Maybe that\u0027s possible to solve with file groups, but before going into the details I\u0027d like to start with the motivation for this change. What\u0027s the problem with these two static libs?",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 63
      },
      "revId": "076df6fdcadaa86378414c214288624bdb1b4edc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d1f0d5d_e54dbf9c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 11,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2024-06-10T20:38:42Z",
      "side": 1,
      "message": "Initially I planned to hide more symbols that come from static lib dependencies of libart-compiler. But I couldn\u0027t repro the file size savings lately, because those symbols were not present in libart.so anyway (either something changed since then or the measurements were erroneous to begin with).\n\nNow the only practical value of this change is to simplify the way libart is built. I think it saves some headache by avoiding all of the debug/release/for-test intermediate dependencies. Including more libraries into libart.so should be easier too.\n\nThough, I don\u0027t insist on merging this CL if you think it\u0027s not worth it.",
      "parentUuid": "bc5b7687_2d452e2c",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 63
      },
      "revId": "076df6fdcadaa86378414c214288624bdb1b4edc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "67ff0ad9_64457ded",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 11,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-06-11T12:47:35Z",
      "side": 1,
      "message": "\u003e I think it saves some headache by avoiding all of the debug/release/for-test intermediate dependencies.\n\nThat\u0027s a good point. However, those intermediate deps are consistent with the approach elsewhere which people are used to, while this adds a new approach for a few components and it arguably has some weirdness of its own. If we could completely replace the -d library splits and the `*_static_defaults` then it\u0027d be a more compelling win, but as it is this reduces the consistency across the different components. So overall I prefer to keep it as-is, even though I agree this gets rid of some unpleasant boilerplate.\n\nBtw, regarding the -d libs, there\u0027s b/234351700 about removing them altogether. The conclusion there is that there\u0027s no blocker, but it\u0027s quite a bit of work and not anywhere near the top of my to-do list. I\u0027d also like to take a closer look at the `*_static_defaults` - there are e.g. approaches to avoid static linking for tests now, so they may not be necessary to keep either. So my long-term vision is to have just one library, either static or dynamic, for each component.",
      "parentUuid": "2d1f0d5d_e54dbf9c",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 63
      },
      "revId": "076df6fdcadaa86378414c214288624bdb1b4edc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "99ca5088_d2a1db73",
        "filename": "Android.bp",
        "patchSetId": 8
      },
      "lineNbr": 1,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-06-07T14:44:15Z",
      "side": 1,
      "message": "If we\u0027re going to this approach then I\u0027d like to see all the global stuff in build/Android.bp getting moved here, so that we don\u0027t get a split between this file and that one which doesn\u0027t make sense. That\u0027s better off in a separate CL though, so not marking as blocked.",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 71
      },
      "revId": "076df6fdcadaa86378414c214288624bdb1b4edc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}