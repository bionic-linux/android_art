{
  "comments": [
    {
      "key": {
        "uuid": "597ac0a7_5cfc6839",
        "filename": "runtime/gc/space/image_space.cc",
        "patchSetId": 3
      },
      "lineNbr": 2430,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2019-03-12T17:19:01Z",
      "side": 1,
      "message": "Assert that the next section starts at page boundary and round up.",
      "revId": "5635e039acad466870ba1ca1a2d72613f8773c9a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c85a284f_14d38c78",
        "filename": "runtime/gc/space/image_space.cc",
        "patchSetId": 3
      },
      "lineNbr": 2430,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2019-03-12T19:56:16Z",
      "side": 1,
      "message": "You mean align up in the image writer? I don\u0027t see why that\u0027s better than just madvising the largest aligned portion of the metadata.",
      "parentUuid": "597ac0a7_5cfc6839",
      "revId": "5635e039acad466870ba1ca1a2d72613f8773c9a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cfcb4412_5705a606",
        "filename": "runtime/gc/space/image_space.cc",
        "patchSetId": 3
      },
      "lineNbr": 2430,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2019-03-12T23:12:57Z",
      "side": 1,
      "message": "Wouldn\u0027t that potentially save (a little bit of) memory, as you\u0027re not sharing a resident page with stuff that doesn\u0027t have to be? I\u0027m fine with this as-is, but I think invariants are nice and should be considered for a follow-up.",
      "parentUuid": "c85a284f_14d38c78",
      "revId": "5635e039acad466870ba1ca1a2d72613f8773c9a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "43a5f714_f0d28130",
        "filename": "runtime/gc/space/image_space.cc",
        "patchSetId": 3
      },
      "lineNbr": 2430,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2019-03-13T03:33:59Z",
      "side": 1,
      "message": "App images are currently private dirty so I\u0027m not sure how we could avoid the alignment padding taking up the RAM in this case. Maybe with reordering the sections or something.",
      "parentUuid": "cfcb4412_5705a606",
      "revId": "5635e039acad466870ba1ca1a2d72613f8773c9a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0b2a92a5_0a8b953a",
        "filename": "runtime/gc/space/image_space.cc",
        "patchSetId": 3
      },
      "lineNbr": 2430,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2019-03-13T07:28:41Z",
      "side": 1,
      "message": "Right now the padding is empty, there is nothing between the metadata section and the bitmap section which starts at a page boundary.",
      "parentUuid": "43a5f714_f0d28130",
      "revId": "5635e039acad466870ba1ca1a2d72613f8773c9a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92dd9815_e12bd5cb",
        "filename": "runtime/runtime.cc",
        "patchSetId": 3
      },
      "lineNbr": 2792,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2019-03-12T17:19:01Z",
      "side": 1,
      "message": "Why are you not clearing the references in associated DexCaches?\n\nThe code shall keep reading from the pre-resolved strings array. To save memory, you\u0027re now relying on this read to come from the shared zero page. If we changed the app image configuration to use --image-format\u003duncompressed, we would actually reload those pages from the disk and crash when using these un-relocated references.",
      "range": {
        "startLine": 2792,
        "startChar": 10,
        "endLine": 2792,
        "endChar": 41
      },
      "revId": "5635e039acad466870ba1ca1a2d72613f8773c9a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb8d05e6_4af29f6f",
        "filename": "runtime/runtime.cc",
        "patchSetId": 3
      },
      "lineNbr": 2792,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2019-03-12T19:56:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "92dd9815_e12bd5cb",
      "range": {
        "startLine": 2792,
        "startChar": 10,
        "endLine": 2792,
        "endChar": 41
      },
      "revId": "5635e039acad466870ba1ca1a2d72613f8773c9a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}