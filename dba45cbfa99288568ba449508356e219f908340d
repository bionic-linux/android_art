{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6a458101_c5f343f5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-11-15T18:22:22Z",
      "side": 1,
      "message": "+1 after cursory review, to allow respin (with PS2) to start.",
      "revId": "dba45cbfa99288568ba449508356e219f908340d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6b52a4c1_5ebf4d77",
        "filename": "runtime/gc/space/image_space.cc",
        "patchSetId": 2
      },
      "lineNbr": 569,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-11-15T22:37:11Z",
      "side": 1,
      "message": "nit: go/16kb prefer \u00274 KB\u0027 everywhere (obviously ignore this and just submit, but hey)",
      "range": {
        "startLine": 569,
        "startChar": 72,
        "endLine": 569,
        "endChar": 74
      },
      "revId": "dba45cbfa99288568ba449508356e219f908340d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2fd7a933_a752d962",
        "filename": "runtime/oat/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 1157,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2024-11-18T10:20:22Z",
      "side": 1,
      "message": "Not sure about this: we\u0027d generate oat files with 4k alignment here no? And that\u0027s ok because we wouldn\u0027t have executable code in the oat file?\n\nAlso given the changes above line 1111, where we never load odex file, why would we want to generate files with the verify filter?",
      "range": {
        "startLine": 1155,
        "startChar": 0,
        "endLine": 1157,
        "endChar": 37
      },
      "fixSuggestions": [
        {
          "fixId": "ec467870_2b9e2b94",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "runtime/oat/oat_file_assistant.cc",
              "range": {
                "startLine": 1154,
                "startChar": 0,
                "endLine": 1160,
                "endChar": 0
              },
              "replacement": ""
            }
          ]
        }
      ],
      "revId": "dba45cbfa99288568ba449508356e219f908340d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ff6457ad_d6fe96c0",
        "filename": "runtime/oat/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 1157,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-11-18T11:11:51Z",
      "side": 1,
      "message": "The function affects the result of GetDexOptNeeded. I added these lines to avoid repeated recompilation during bg-dexopt on 16KB page devices.\n\nOn 16KB page devices, because we reject to open the oat file, `file` is the vdex, and `current` is \"verify\".\n\nWithout these lines, `target` will be \"speed-profile\", so `GetDexOptNeeded` will return true. This will repeatedly happen everyday during bg-dexopt.\n\nAfter adding these lines, we will only compile the app if `current` is less than \"verify\" (e.g., \"run-from-apk\"). This happens when an app is newly installed. In this case, we will still generate the oat file with 4K alignment, which will admittedly waste some cycles, but the oat file won\u0027t be opened because the change on line 1111 will prevent it.\n\nI didn\u0027t change dex2oat because I wanted to minimize the change, but I\u0027m open to other suggestions if you have a better approach.",
      "parentUuid": "2fd7a933_a752d962",
      "range": {
        "startLine": 1155,
        "startChar": 0,
        "endLine": 1157,
        "endChar": 37
      },
      "revId": "dba45cbfa99288568ba449508356e219f908340d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "74296b1e_5f3b74cf",
        "filename": "runtime/runtime.cc",
        "patchSetId": 2
      },
      "lineNbr": 3505,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-11-15T22:37:11Z",
      "side": 1,
      "message": "We can simplify and remove a lot of #defs as well, since this is the default and always on. Like this change, it\u0027s much easier to only change that one value, not the other values.",
      "range": {
        "startLine": 3505,
        "startChar": 0,
        "endLine": 3505,
        "endChar": 29
      },
      "revId": "dba45cbfa99288568ba449508356e219f908340d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}