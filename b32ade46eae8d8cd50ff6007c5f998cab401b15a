{
  "comments": [
    {
      "key": {
        "uuid": "e066f49b_c11d9176",
        "filename": "compiler/oat_writer.cc",
        "patchSetId": 6
      },
      "lineNbr": 1542,
      "author": {
        "id": 1103743
      },
      "writtenOn": "2017-03-14T17:30:20Z",
      "side": 1,
      "message": "i.e.,",
      "range": {
        "startLine": 1542,
        "startChar": 42,
        "endLine": 1542,
        "endChar": 45
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0dd03ec7_8f76471d",
        "filename": "compiler/oat_writer.cc",
        "patchSetId": 6
      },
      "lineNbr": 1542,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2017-03-14T22:28:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e066f49b_c11d9176",
      "range": {
        "startLine": 1542,
        "startChar": 42,
        "endLine": 1542,
        "endChar": 45
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3e8d40d9_45dc5587",
        "filename": "compiler/oat_writer.cc",
        "patchSetId": 6
      },
      "lineNbr": 1543,
      "author": {
        "id": 1103743
      },
      "writtenOn": "2017-03-14T17:30:20Z",
      "side": 1,
      "message": "Is this used?  I can\u0027t find a use.",
      "range": {
        "startLine": 1543,
        "startChar": 13,
        "endLine": 1543,
        "endChar": 24
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2a261ac1_4f23a433",
        "filename": "compiler/oat_writer.cc",
        "patchSetId": 6
      },
      "lineNbr": 1543,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2017-03-14T22:28:28Z",
      "side": 1,
      "message": "Used by DCHECK_OFFSET_",
      "parentUuid": "3e8d40d9_45dc5587",
      "range": {
        "startLine": 1543,
        "startChar": 13,
        "endLine": 1543,
        "endChar": 24
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7da6adec_9268c21a",
        "filename": "compiler/oat_writer.cc",
        "patchSetId": 6
      },
      "lineNbr": 1544,
      "author": {
        "id": 1103743
      },
      "writtenOn": "2017-03-14T17:30:20Z",
      "side": 1,
      "message": "Is this local needed?  There\u0027s only one use.",
      "range": {
        "startLine": 1544,
        "startChar": 20,
        "endLine": 1544,
        "endChar": 23
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8d0ecfba_ee1138e8",
        "filename": "compiler/oat_writer.cc",
        "patchSetId": 6
      },
      "lineNbr": 1544,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2017-03-14T22:28:28Z",
      "side": 1,
      "message": "Used by DCHECK_OFFSET_",
      "parentUuid": "7da6adec_9268c21a",
      "range": {
        "startLine": 1544,
        "startChar": 20,
        "endLine": 1544,
        "endChar": 23
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bc67a659_70d0dcfa",
        "filename": "compiler/optimizing/stack_map_stream.cc",
        "patchSetId": 6
      },
      "lineNbr": 155,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-03-14T22:53:43Z",
      "side": 1,
      "message": "explain why",
      "range": {
        "startLine": 155,
        "startChar": 27,
        "endLine": 155,
        "endChar": 84
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d06100ba_f05c0415",
        "filename": "runtime/method_info.h",
        "patchSetId": 6
      },
      "lineNbr": 46,
      "author": {
        "id": 1103743
      },
      "writtenOn": "2017-03-14T17:30:20Z",
      "side": 1,
      "message": "missing a space",
      "range": {
        "startLine": 46,
        "startChar": 51,
        "endLine": 46,
        "endChar": 52
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7b6de345_4e240c05",
        "filename": "runtime/method_info.h",
        "patchSetId": 6
      },
      "lineNbr": 46,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2017-03-14T22:28:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d06100ba_f05c0415",
      "range": {
        "startLine": 46,
        "startChar": 51,
        "endLine": 46,
        "endChar": 52
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4fd5c622_b09b65b0",
        "filename": "runtime/method_info.h",
        "patchSetId": 6
      },
      "lineNbr": 53,
      "author": {
        "id": 1103743
      },
      "writtenOn": "2017-03-14T17:30:20Z",
      "side": 1,
      "message": "Will it matter that for \u003c 127 methods the MethodIndexTypes are all misaligned?",
      "range": {
        "startLine": 53,
        "startChar": 4,
        "endLine": 53,
        "endChar": 71
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d4040017_1e4cf58b",
        "filename": "runtime/method_info.h",
        "patchSetId": 6
      },
      "lineNbr": 53,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2017-03-14T22:28:28Z",
      "side": 1,
      "message": "I put a comment below about pesky alignment requirements.",
      "parentUuid": "4fd5c622_b09b65b0",
      "range": {
        "startLine": 53,
        "startChar": 4,
        "endLine": 53,
        "endChar": 71
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ce207c0_f7bd22f8",
        "filename": "runtime/oat_quick_method_header.h",
        "patchSetId": 6
      },
      "lineNbr": 193,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-14T17:10:27Z",
      "side": 1,
      "message": "This isn\u0027t going in the direction we want for OatQuickMethodHeader, which is only having an offset to CodeInfo (through vmap_table_offset). Can you please move method_info_offset_ to CodeInfo?\n\nAlso the only reason I understand you want this to be an offset is that you could dedupe some of it? If not, then I think the table should be inlined in CodeInfo.",
      "range": {
        "startLine": 192,
        "startChar": 0,
        "endLine": 193,
        "endChar": 36
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68fe0a7b_bfd02b7b",
        "filename": "runtime/oat_quick_method_header.h",
        "patchSetId": 6
      },
      "lineNbr": 193,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2017-03-14T17:15:32Z",
      "side": 1,
      "message": "If I move it into code info it will hurt dedupe for obv reasons. +~2.5% code size from doing that. I agree that we could move the frame info into code info though.",
      "parentUuid": "3ce207c0_f7bd22f8",
      "range": {
        "startLine": 192,
        "startChar": 0,
        "endLine": 193,
        "endChar": 36
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f65faa39_ac25e111",
        "filename": "runtime/oat_quick_method_header.h",
        "patchSetId": 6
      },
      "lineNbr": 193,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-14T17:30:27Z",
      "side": 1,
      "message": "It shouldn\u0027t hurt dedupe: you can add to the CodeInfo object  one extra entry containing that offset.",
      "parentUuid": "68fe0a7b_bfd02b7b",
      "range": {
        "startLine": 192,
        "startChar": 0,
        "endLine": 193,
        "endChar": 36
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1591ede1_322aa37c",
        "filename": "runtime/oat_quick_method_header.h",
        "patchSetId": 6
      },
      "lineNbr": 193,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2017-03-14T22:28:28Z",
      "side": 1,
      "message": "But the whole point of moving the method indices out was to help dedupe, moving an offset back in will regress this by since it will be unique for each different set of method ids.",
      "parentUuid": "f65faa39_ac25e111",
      "range": {
        "startLine": 192,
        "startChar": 0,
        "endLine": 193,
        "endChar": 36
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "41958019_1390e6fe",
        "filename": "runtime/oat_quick_method_header.h",
        "patchSetId": 6
      },
      "lineNbr": 193,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-03-14T22:53:43Z",
      "side": 1,
      "message": "Nicolas, what\u0027s the rationale for single offset here? If there\u0027s a strong one we should document it in the code as a design choice.\n\nMathieu, I think this requires better motivation and explanations on how the savings are achieved and why the dedup won\u0027t work as good if this is is part of the CodeInfo. i.e. I don\u0027t think the obvious is that obvious.",
      "parentUuid": "1591ede1_322aa37c",
      "range": {
        "startLine": 192,
        "startChar": 0,
        "endLine": 193,
        "endChar": 36
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "66835d14_88e79a21",
        "filename": "runtime/oat_quick_method_header.h",
        "patchSetId": 6
      },
      "lineNbr": 193,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-15T11:03:17Z",
      "side": 1,
      "message": "OK, after chatting with Mathieu and David I now have a better understanding. I agree with Calin we\u0027d want more comments here, something like\n\n\"We put that offset out of CodeInfo as the CodeInfo has good dedupe properties, but the offset breaks it. The offset contains .... which are hard to dedupe\".\n\n\nNote that we unfortunately create a OatQuickMethodHeader for methods that are being quickened (something we should really cleanup...), so quickened methods will have a +4 increase for something unused. But maybe benefits are high enough to not make it matter.",
      "parentUuid": "41958019_1390e6fe",
      "range": {
        "startLine": 192,
        "startChar": 0,
        "endLine": 193,
        "endChar": 36
      },
      "revId": "b32ade46eae8d8cd50ff6007c5f998cab401b15a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}