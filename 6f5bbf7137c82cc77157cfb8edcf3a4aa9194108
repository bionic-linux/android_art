{
  "comments": [
    {
      "key": {
        "uuid": "27a2e9ba_d3296dc0",
        "filename": "runtime/gc/collector/concurrent_copying-inl.h",
        "patchSetId": 9
      },
      "lineNbr": 245,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2018-11-20T00:15:47Z",
      "side": 1,
      "message": "Why not get rid of this and just directly return true or false in each branch? It doesn\u0027t seem to add anything. Or is there a typo and the then clause isn\u0027t meant to be empty?",
      "range": {
        "startLine": 245,
        "startChar": 2,
        "endLine": 245,
        "endChar": 25
      },
      "revId": "6f5bbf7137c82cc77157cfb8edcf3a4aa9194108",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80a6eeb0_c3b26d5d",
        "filename": "runtime/gc/collector/concurrent_copying-inl.h",
        "patchSetId": 9
      },
      "lineNbr": 245,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2018-11-20T00:47:02Z",
      "side": 1,
      "message": "I think you are right. I can simplify the logic as follows:\n\nif (from_ref-\u003eGetReadBarrierStateAcquire() \u003d\u003d ReadBarrier::GrayState()) {\n  return true;\n} else if (kEnableGenerationalConcurrentCopyingCollection\n           \u0026\u0026 young_gen_\n           \u0026\u0026 !done_scanning_.load(std::memory_order_acquire)) {\n  // Assume that the comment below from line 253 - 272 is here.\n  return false;\n} else {\n  return region_space_bitmap_-\u003eTest(from_ref);\n}\n\nSame applies to the IsMarkedInNonMovingSpace().\n\nHans, please let me know what you think of this from correctness POV.",
      "parentUuid": "27a2e9ba_d3296dc0",
      "range": {
        "startLine": 245,
        "startChar": 2,
        "endLine": 245,
        "endChar": 25
      },
      "revId": "6f5bbf7137c82cc77157cfb8edcf3a4aa9194108",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e0ae0395_b9e6a180",
        "filename": "runtime/gc/collector/concurrent_copying-inl.h",
        "patchSetId": 9
      },
      "lineNbr": 245,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2018-11-20T22:54:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "80a6eeb0_c3b26d5d",
      "range": {
        "startLine": 245,
        "startChar": 2,
        "endLine": 245,
        "endChar": 25
      },
      "revId": "6f5bbf7137c82cc77157cfb8edcf3a4aa9194108",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2048cddd_187283a7",
        "filename": "runtime/gc/collector/concurrent_copying.cc",
        "patchSetId": 9
      },
      "lineNbr": 1398,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2018-11-15T21:56:22Z",
      "side": 1,
      "message": "Worth maybe moving the null check to the AssertToSpaceInvariant?",
      "range": {
        "startLine": 1395,
        "startChar": 1,
        "endLine": 1398,
        "endChar": 5
      },
      "revId": "6f5bbf7137c82cc77157cfb8edcf3a4aa9194108",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4a6c958_895f2867",
        "filename": "runtime/gc/collector/concurrent_copying.cc",
        "patchSetId": 9
      },
      "lineNbr": 1398,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2018-11-20T22:54:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2048cddd_187283a7",
      "range": {
        "startLine": 1395,
        "startChar": 1,
        "endLine": 1398,
        "endChar": 5
      },
      "revId": "6f5bbf7137c82cc77157cfb8edcf3a4aa9194108",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d3525002_576c1a66",
        "filename": "runtime/gc/collector/concurrent_copying.cc",
        "patchSetId": 9
      },
      "lineNbr": 2347,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2018-11-20T00:15:47Z",
      "side": 1,
      "message": "Same question as before. Why not just\n\nif (from_ref-\u003eGetReadBarrierStateAcquire() \u003d\u003d ReadBarrier::GrayState()) {\n    return true;\n}\n\nand get rid of is_marked, etc.",
      "range": {
        "startLine": 2347,
        "startChar": 4,
        "endLine": 2347,
        "endChar": 83
      },
      "revId": "6f5bbf7137c82cc77157cfb8edcf3a4aa9194108",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2800d24a_bd23ce3b",
        "filename": "runtime/gc/collector/concurrent_copying.cc",
        "patchSetId": 9
      },
      "lineNbr": 2347,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2018-11-20T22:54:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d3525002_576c1a66",
      "range": {
        "startLine": 2347,
        "startChar": 4,
        "endLine": 2347,
        "endChar": 83
      },
      "revId": "6f5bbf7137c82cc77157cfb8edcf3a4aa9194108",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}