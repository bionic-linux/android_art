{
  "comments": [
    {
      "key": {
        "uuid": "5ad35b96_075c7634",
        "filename": "runtime/instrumentation.cc",
        "patchSetId": 5
      },
      "lineNbr": 884,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "It\u0027s all temporary, as getting rid of the current_method is one solution from multiple others. I think it\u0027s more instrumentation that needs revisiting.",
      "range": {
        "startLine": 883,
        "startChar": 38,
        "endLine": 884,
        "endChar": 93
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "daa58b1c_ab99e90c",
        "filename": "runtime/instrumentation.cc",
        "patchSetId": 5
      },
      "lineNbr": 885,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "Just to be clear: b/33630159 is a workaround until we properly support deopt of runtime callers.\n\nSo all in all, I\u0027d just drop the reference of current_method here.",
      "range": {
        "startLine": 885,
        "startChar": 1,
        "endLine": 885,
        "endChar": 43
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "faa88ff5_ecaaeb22",
        "filename": "runtime/jit/jit_code_cache.cc",
        "patchSetId": 5
      },
      "lineNbr": 629,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "Two things that I realize are missing with regards to the JIT:\n\n1) What about methods that get redefined but are not on the stack so we don\u0027t create obsolete methods? (I\u0027ve mentioned that in the original change). I think you need to cleanup stuff for those too.\n\n2) In theory You need to update CHA data structures for obsolete methods. The good news is that CHA only does inlining, which is disabled for debuggable apps. So please add a DCHECK somewhere we don\u0027t do CHA for debuggable apps.",
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "faa88ff5_8ca52755",
        "filename": "runtime/jit/jit_code_cache.cc",
        "patchSetId": 5
      },
      "lineNbr": 643,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "See my comment in the initial change that is sort of done atomically, so I wouldn\u0027t bother with making this a TODO. I\u0027d expand the comment about the atomicity.",
      "range": {
        "startLine": 640,
        "startChar": 39,
        "endLine": 643,
        "endChar": 75
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ac9e3ea_e5aaf622",
        "filename": "runtime/openjdkjvmti/ti_redefine.cc",
        "patchSetId": 5
      },
      "lineNbr": 79,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "error_msg",
      "range": {
        "startLine": 79,
        "startChar": 77,
        "endLine": 79,
        "endChar": 87
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "daa58b1c_eb93f1e6",
        "filename": "runtime/openjdkjvmti/ti_redefine.cc",
        "patchSetId": 5
      },
      "lineNbr": 118,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "Say what \"this\" is.",
      "range": {
        "startLine": 118,
        "startChar": 9,
        "endLine": 118,
        "endChar": 13
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ac9e3ea_c5affa30",
        "filename": "runtime/openjdkjvmti/ti_redefine.cc",
        "patchSetId": 5
      },
      "lineNbr": 158,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "Move this to JitCodeCache::MoveObsoleteMethod. Otherwise, you\u0027re not handling the profiling info. Also, who knows if the JIT is going to cache more things in the future.",
      "range": {
        "startLine": 158,
        "startChar": 27,
        "endLine": 158,
        "endChar": 77
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ab4f348_51c2b442",
        "filename": "runtime/openjdkjvmti/ti_redefine.cc",
        "patchSetId": 5
      },
      "lineNbr": 160,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "Drop (and note that MoveObsoleteMethod doesn\u0027t update entrypoints).",
      "range": {
        "startLine": 159,
        "startChar": 63,
        "endLine": 160,
        "endChar": 33
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "daa58b1c_0b8bddb1",
        "filename": "runtime/openjdkjvmti/ti_redefine.cc",
        "patchSetId": 5
      },
      "lineNbr": 163,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "This looks misplaced. Move it just after line 153? Or just drop?",
      "range": {
        "startLine": 163,
        "startChar": 8,
        "endLine": 163,
        "endChar": 93
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa00309_4d35f991",
        "filename": "runtime/openjdkjvmti/ti_redefine.cc",
        "patchSetId": 5
      },
      "lineNbr": 170,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "Move this in the constructor.",
      "range": {
        "startLine": 170,
        "startChar": 4,
        "endLine": 170,
        "endChar": 21
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ab57f43_306568c8",
        "filename": "runtime/openjdkjvmti/ti_redefine.cc",
        "patchSetId": 5
      },
      "lineNbr": 256,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "Say why.",
      "range": {
        "startLine": 256,
        "startChar": 2,
        "endLine": 256,
        "endChar": 48
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ad35b96_6769f2d2",
        "filename": "runtime/openjdkjvmti/ti_redefine.cc",
        "patchSetId": 5
      },
      "lineNbr": 474,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "Isn\u0027t that only used line 481? I\u0027d inline it there to not pollute.",
      "range": {
        "startLine": 467,
        "startChar": 0,
        "endLine": 474,
        "endChar": 1
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa00309_adf45dae",
        "filename": "runtime/openjdkjvmti/ti_redefine.cc",
        "patchSetId": 5
      },
      "lineNbr": 476,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "Add a comment explaining what this method does.",
      "range": {
        "startLine": 476,
        "startChar": 0,
        "endLine": 476,
        "endChar": 72
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "daa58b1c_6b88a1b3",
        "filename": "runtime/openjdkjvmti/ti_redefine.cc",
        "patchSetId": 5
      },
      "lineNbr": 476,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "FindAndAllocateObsoleteMethods?",
      "range": {
        "startLine": 476,
        "startChar": 16,
        "endLine": 476,
        "endChar": 39
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ab4f348_91b25ce0",
        "filename": "runtime/openjdkjvmti/ti_redefine.cc",
        "patchSetId": 5
      },
      "lineNbr": 502,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "Add a comment what this method does.",
      "range": {
        "startLine": 502,
        "startChar": 16,
        "endLine": 502,
        "endChar": 37
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ab4f348_71c53849",
        "filename": "runtime/openjdkjvmti/ti_redefine.h",
        "patchSetId": 5
      },
      "lineNbr": 132,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "I don\u0027t understand this TODO.",
      "range": {
        "startLine": 132,
        "startChar": 2,
        "endLine": 132,
        "endChar": 28
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3aa30717_4e605315",
        "filename": "runtime/stack.cc",
        "patchSetId": 5
      },
      "lineNbr": 621,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "Inline this back where it was, you don\u0027t need this change anymore.",
      "range": {
        "startLine": 617,
        "startChar": 0,
        "endLine": 621,
        "endChar": 1
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "faa88ff5_ccaf2f31",
        "filename": "runtime/stack.cc",
        "patchSetId": 5
      },
      "lineNbr": 795,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "Revert the change (looking at the left in gerrit, that means make this uint32_t line 797).",
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "daa58b1c_4b85e597",
        "filename": "runtime/stack.cc",
        "patchSetId": 5
      },
      "lineNbr": 859,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "No need to change this.",
      "range": {
        "startLine": 859,
        "startChar": 0,
        "endLine": 859,
        "endChar": 83
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ab4f348_d1ace487",
        "filename": "test/916-obsolete-jit/src/Main.java",
        "patchSetId": 5
      },
      "lineNbr": 149,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "You should use ensureJitCompiled early on in the test, and then you are guaranteed to enter doTest with them compiled.",
      "range": {
        "startLine": 146,
        "startChar": 5,
        "endLine": 149,
        "endChar": 21
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3aa30717_ae2bb7b0",
        "filename": "test/916-obsolete-jit/src/Transform.java",
        "patchSetId": 5
      },
      "lineNbr": 32,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "Revisit",
      "range": {
        "startLine": 32,
        "startChar": 12,
        "endLine": 32,
        "endChar": 18
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "faa88ff5_2cb5137e",
        "filename": "test/916-obsolete-jit/src/Transform.java",
        "patchSetId": 5
      },
      "lineNbr": 33,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "once...",
      "range": {
        "startLine": 33,
        "startChar": 11,
        "endLine": 33,
        "endChar": 26
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa00309_cd03a9c0",
        "filename": "test/916-obsolete-jit/src/Transform.java",
        "patchSetId": 5
      },
      "lineNbr": 35,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-12-16T15:09:43Z",
      "side": 1,
      "message": "What\u0027s \"this\"?",
      "range": {
        "startLine": 35,
        "startChar": 12,
        "endLine": 35,
        "endChar": 16
      },
      "revId": "96ffd30d78ddce854140ab88896f562a011d17dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}