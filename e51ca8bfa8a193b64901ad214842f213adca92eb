{
  "comments": [
    {
      "key": {
        "uuid": "ade97f6b_bd7058fd",
        "filename": "runtime/jit/jit_code_cache.cc",
        "patchSetId": 7
      },
      "lineNbr": 341,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2016-11-29T21:21:45Z",
      "side": 1,
      "message": "The class loader keeps the class live, you can probably just call IsMarked on the class and never do it on the class loader.",
      "range": {
        "startLine": 341,
        "startChar": 32,
        "endLine": 341,
        "endChar": 44
      },
      "revId": "e51ca8bfa8a193b64901ad214842f213adca92eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d90030a_82c99c6a",
        "filename": "runtime/jit/jit_code_cache.cc",
        "patchSetId": 7
      },
      "lineNbr": 341,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-11-29T21:26:14Z",
      "side": 1,
      "message": "But IsMarked will return null for newly allocated classes on CMS. So the code here will not know if the null is because the class is dead, or if it\u0027s just been allocated.\n\nRight?",
      "parentUuid": "ade97f6b_bd7058fd",
      "range": {
        "startLine": 341,
        "startChar": 32,
        "endLine": 341,
        "endChar": 44
      },
      "revId": "e51ca8bfa8a193b64901ad214842f213adca92eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ade97f6b_5d2eecbc",
        "filename": "runtime/jit/jit_code_cache.cc",
        "patchSetId": 7
      },
      "lineNbr": 341,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2016-11-29T21:31:12Z",
      "side": 1,
      "message": "Hmm true, I think WaitUntilInlineCacheAccessible is not called before calling AddInvokeInfo. Are there any issues from newly allocated class loaders maybe not being marked?",
      "parentUuid": "4d90030a_82c99c6a",
      "range": {
        "startLine": 341,
        "startChar": 32,
        "endLine": 341,
        "endChar": 44
      },
      "revId": "e51ca8bfa8a193b64901ad214842f213adca92eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d90030a_e2b748d8",
        "filename": "runtime/jit/jit_code_cache.cc",
        "patchSetId": 7
      },
      "lineNbr": 341,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-11-29T21:40:24Z",
      "side": 1,
      "message": "Not calling WaitUntilInlineCacheAccessible before calling AddInvokeInfo is fine, as the only think AddInvokeInfo is doing is storing a class that is known live.\n\nNo there cannot be any issue with newly allocated class loaders, as they cannot be added to the list of weak root class loaders at this point.",
      "parentUuid": "ade97f6b_5d2eecbc",
      "range": {
        "startLine": 341,
        "startChar": 32,
        "endLine": 341,
        "endChar": 44
      },
      "revId": "e51ca8bfa8a193b64901ad214842f213adca92eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}