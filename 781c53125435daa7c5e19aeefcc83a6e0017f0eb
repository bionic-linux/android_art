{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "09021120_dd6a14ae",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 3190653
      },
      "writtenOn": "2024-01-31T11:58:37Z",
      "side": 1,
      "message": "Folks, could you please take a look?\n\nI implement RISC-V \"C\" extension. There are 4 commits, (1) basic support of \"C\" in emitter + tests, (2) support in disassembler, (3) part which applies compressed instructions automatically during code emitting + tests and (4) enabling \"C\" extension in codegen",
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f0350439_e1eda01c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "Partial review: header only.",
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4efa6ce8_c61e49f5",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 493,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "typo",
      "range": {
        "startLine": 493,
        "startChar": 9,
        "endLine": 493,
        "endChar": 15
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2fd03c20_cd9c18ae",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 494,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "I\u0027d prefer `int32_t` for offsets just like non-C loads/stores, even though their ranges are limited here.",
      "range": {
        "startLine": 494,
        "startChar": 27,
        "endLine": 494,
        "endChar": 35
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e02d35e8_0734f0c9",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 508,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "I\u0027d prefer `int32_t` for `imm` and `nzimm`.",
      "range": {
        "startLine": 508,
        "startChar": 25,
        "endLine": 508,
        "endChar": 32
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83d08df7_b24768ca",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 513,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "`rd_s`",
      "range": {
        "startLine": 513,
        "startChar": 27,
        "endLine": 513,
        "endChar": 29
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a59d928_ea225f3f",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 513,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "I\u0027d prefer `uint32_t` for `nzuimm`.",
      "range": {
        "startLine": 513,
        "startChar": 31,
        "endLine": 513,
        "endChar": 39
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b01438b_8609c0e8",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 514,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "I\u0027d prefer a 32-bit type for `shamt`. (Non-C shift instructions currently take an `int32_t` but we could change it to `uint32_t`.)",
      "range": {
        "startLine": 514,
        "startChar": 27,
        "endLine": 514,
        "endChar": 35
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6967d6b_6ddce630",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 527,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "Missing `CJal`.",
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f929c2fd_1553dcba",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 527,
      "author": {
        "id": 3190653
      },
      "writtenOn": "2024-02-07T16:36:14Z",
      "side": 1,
      "message": "Spec says `C.JAL is an RV32C-only instruction that performs the same operation` in 16.4 so probably it is not needed for riscv64",
      "parentUuid": "c6967d6b_6ddce630",
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6be93e99_d09b35e3",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 527,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-08T09:24:06Z",
      "side": 1,
      "message": "Right, I missed that bit.",
      "parentUuid": "f929c2fd_1553dcba",
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e242e0dc_53f10664",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 530,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "I\u0027d prefer `int32_t`.",
      "range": {
        "startLine": 530,
        "startChar": 30,
        "endLine": 530,
        "endChar": 37
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b65507ba_80ec5886",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 1807,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "Why not simply `std::is_same_v\u003cReg, XRegister\u003e || std::is_same_v\u003cReg, FRegister\u003e` without any additional explanation?",
      "range": {
        "startLine": 1807,
        "startChar": 18,
        "endLine": 1807,
        "endChar": 80
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5879257_30f09034",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2008,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "`std::is_same_v\u003cT, uint32_t\u003e || std::is_same_v\u003cT, uint16_t\u003e`",
      "range": {
        "startLine": 2008,
        "startChar": 18,
        "endLine": 2008,
        "endChar": 73
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f19623c5_2b4615fc",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2018,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "Wrap this in `Emit32()` and\n\n    void Emit16(uint32_t value) {\n      Emit(dchecked_integral_cast\u003cuint16_t\u003e(value));\n    }",
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "80b64752_c8e27793",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2276,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "`1`",
      "range": {
        "startLine": 2276,
        "startChar": 22,
        "endLine": 2276,
        "endChar": 23
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e74fbfc0_f422d917",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2279,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "`rd_rs1`",
      "range": {
        "startLine": 2279,
        "startChar": 41,
        "endLine": 2279,
        "endChar": 43
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "295a4e1b_f39124df",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2285,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "Change to `uint32_t` (including all `static_cast\u003c\u003e`s) and pass to `Emit16()`. Same for other `EmitC*()` functions.",
      "range": {
        "startLine": 2285,
        "startChar": 4,
        "endLine": 2285,
        "endChar": 12
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0aa55747_ba906eb8",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2295,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "`1`",
      "range": {
        "startLine": 2295,
        "startChar": 23,
        "endLine": 2295,
        "endChar": 24
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "800bca14_cbad3a83",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2299,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "I\u0027d prefer a single `imm6` that we split here.",
      "range": {
        "startLine": 2299,
        "startChar": 48,
        "endLine": 2299,
        "endChar": 55
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f1810d4_214360cd",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2299,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "`rd_rs1`",
      "range": {
        "startLine": 2299,
        "startChar": 35,
        "endLine": 2299,
        "endChar": 37
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aa1487a4_4393a7d7",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2342,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "Remove the text? The \"Check failed: IsShortReg(rd_s) X\u003cN\u003e\" should be enough.",
      "range": {
        "startLine": 2342,
        "startChar": 31,
        "endLine": 2342,
        "endChar": 95
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "90e836ff_af95ad42",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2345,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "Helper function `EncodeShortReg()`.",
      "range": {
        "startLine": 2345,
        "startChar": 52,
        "endLine": 2345,
        "endChar": 83
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9dedadb7_375b7370",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2354,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "`rd\u0027/rs2\u0027` would be too long. What about `rds2\u0027`?",
      "range": {
        "startLine": 2354,
        "startChar": 31,
        "endLine": 2354,
        "endChar": 34
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fed38dc_09c7e532",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2358,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "`rd_rs2_s`",
      "range": {
        "startLine": 2358,
        "startChar": 70,
        "endLine": 2358,
        "endChar": 74
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "07b0d93f_5676cef9",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2358,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "Single `imm5` that would be split here?",
      "range": {
        "startLine": 2358,
        "startChar": 40,
        "endLine": 2358,
        "endChar": 47
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b460b86_f80fef85",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2362,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "Remove text.",
      "range": {
        "startLine": 2362,
        "startChar": 29,
        "endLine": 2362,
        "endChar": 92
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f3e09c6_c4bb3769",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2364,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "Remove text.",
      "range": {
        "startLine": 2364,
        "startChar": 28,
        "endLine": 2364,
        "endChar": 91
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9a261b2e_77008912",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2379,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "`rd\u0027/rs1` or `rds1\u0027`?",
      "range": {
        "startLine": 2379,
        "startChar": 20,
        "endLine": 2379,
        "endChar": 24
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "82a675e7_518baa13",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2382,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "`rd_rs1_s`",
      "range": {
        "startLine": 2382,
        "startChar": 41,
        "endLine": 2382,
        "endChar": 46
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "508dc6bd_f6eba6a8",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2384,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "Remove text.",
      "range": {
        "startLine": 2384,
        "startChar": 29,
        "endLine": 2384,
        "endChar": 92
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c3c344d0_6158e739",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2387,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "Remove text.",
      "range": {
        "startLine": 2387,
        "startChar": 29,
        "endLine": 2387,
        "endChar": 92
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3ed1332_4fb9e24f",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2405,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "We should use `int32_t offset`, `DCHECK()` the alignment (see `EmitJ()`) and extract the two parts here.",
      "range": {
        "startLine": 2405,
        "startChar": 31,
        "endLine": 2405,
        "endChar": 50
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eba58ab3_1d3128ef",
        "filename": "compiler/utils/riscv64/assembler_riscv64.h",
        "patchSetId": 1
      },
      "lineNbr": 2426,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-02-07T14:17:08Z",
      "side": 1,
      "message": "`int32_t offset`",
      "range": {
        "startLine": 2426,
        "startChar": 31,
        "endLine": 2426,
        "endChar": 45
      },
      "revId": "781c53125435daa7c5e19aeefcc83a6e0017f0eb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}