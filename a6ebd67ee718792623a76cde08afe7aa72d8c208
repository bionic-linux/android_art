{
  "comments": [
    {
      "key": {
        "uuid": "5f6920a1_7cbeb5ed",
        "filename": "runtime/profiler.cc",
        "patchSetId": 4
      },
      "lineNbr": 304,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2014-06-12T10:54:55Z",
      "side": 1,
      "message": "sorry to come back to this. \n\nThere are some CLs which fix the SELinux policy for profiler files. The files are created by installd and their permission is update to restrict access just to the system server and the app (https://android-review.googlesource.com/#/c/97674/2). I fear that creating the file like this will actually leak details. I\u0027ll check with nnk@ as there are some details regarding permissions that I\u0027m no fully familiar with.\n\nAs a side note:\nI\u0027m thinking that it might be cleaner and easier actually to update the original format and store the dex_pc in the current profile file. The disadvantage is that we\u0027ll take more space but I don\u0027t think we\u0027ll have so many different PC per functions to worry about it. One way to compact this is: \"method/total_count/size/[pc_1:count_1,pc_2:count_2...]\"",
      "range": {
        "startLine": 297,
        "startChar": 0,
        "endLine": 304,
        "endChar": 3
      },
      "revId": "a6ebd67ee718792623a76cde08afe7aa72d8c208",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bfc3fcc9_182e9580",
        "filename": "runtime/profiler.cc",
        "patchSetId": 4
      },
      "lineNbr": 304,
      "author": {
        "id": 1047393
      },
      "writtenOn": "2014-06-12T16:43:44Z",
      "side": 1,
      "message": "Yes, I have already noticed that the normal profile files are created by app installd. For all app installed into the device, the profile file can be read and written by apps and can be world readable for system user to read the file. This condition of creating new profile files will only happen when profile options are provided through a dalvikvm command. To my understanding, only the root user can directly invoke dalvikvm command to create a runtime, in this case, only the root user can read and write the create file (0660). I suspect this part will be only used when we test the functionality of the profiler as it will not be executed and change the permission in a normal routine.\n\nFor the side note, I agree that appending the original format would make it cleaner and compact. I was afraid it might break some dependencies in dex2oat when it loads the profile files.",
      "parentUuid": "5f6920a1_7cbeb5ed",
      "range": {
        "startLine": 297,
        "startChar": 0,
        "endLine": 304,
        "endChar": 3
      },
      "revId": "a6ebd67ee718792623a76cde08afe7aa72d8c208",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}