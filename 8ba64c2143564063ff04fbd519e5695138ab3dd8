{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6ccd11dd_10480190",
        "filename": "runtime/thread.h",
        "patchSetId": 3
      },
      "lineNbr": 426,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2021-05-14T19:35:05Z",
      "side": 0,
      "message": "This part is still correct, right? It might be worth preserving the comment, since the asymmetry with Set is weird.\n\nI\u0027m concerned that someone earlier decided it was important not to lock here. Are we sure this isn\u0027t used from a signal handler?",
      "range": {
        "startLine": 426,
        "startChar": 49,
        "endLine": 426,
        "endChar": 92
      },
      "revId": "8ba64c2143564063ff04fbd519e5695138ab3dd8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "abf1dfec_9f48ca9c",
        "filename": "runtime/thread.h",
        "patchSetId": 3
      },
      "lineNbr": 426,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-05-17T07:53:14Z",
      "side": 0,
      "message": "We\u0027re probably already locking from signal handlers (hopefully bottom locks), or do we have mechanisms in place to prevent it?",
      "parentUuid": "6ccd11dd_10480190",
      "range": {
        "startLine": 426,
        "startChar": 49,
        "endLine": 426,
        "endChar": 92
      },
      "revId": "8ba64c2143564063ff04fbd519e5695138ab3dd8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "51067684_8debaadb",
        "filename": "runtime/thread.h",
        "patchSetId": 3
      },
      "lineNbr": 426,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2021-05-17T23:30:35Z",
      "side": 0,
      "message": "I hope we avoid that as much as possible. The main practical problem is that it deadlocks if the handler is invoked while holding the lock. It\u0027s also officially undefined; there might be more subtle things that can break as well. Using reentrant locks may break in more devious ways, since we generally assume that if we already own the lock we\u0027re not in the middle of acquisition or release code. All of this is hard to prevent without disabling signals in various places.",
      "parentUuid": "abf1dfec_9f48ca9c",
      "range": {
        "startLine": 426,
        "startChar": 49,
        "endLine": 426,
        "endChar": 92
      },
      "revId": "8ba64c2143564063ff04fbd519e5695138ab3dd8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}