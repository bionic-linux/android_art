{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2f0dec7f_77f669fb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1039338
      },
      "writtenOn": "2021-07-02T15:48:58Z",
      "side": 1,
      "message": "I\u0027m not 100% sure why this is failing downstream.",
      "revId": "e6c42b9a3d22e94c4208c51c2b87b52a802b9b54",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3992be87_212218cf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1550939
      },
      "writtenOn": "2021-07-02T16:29:30Z",
      "side": 1,
      "message": "The error is:\n\n  multiple rules generate out/soong/vsoc_x86_64/dex_artjars/boot.prof\n  \nThat\u0027s what I get when I reproduce locally on master/cf_x86_64_phone-userdebug (two occurrences that differ in apex versions 10000 vs 31):\n\n  $ fgrep \u0027build out/soong/vsoc_x86_64/dex_artjars/boot.prof\u0027 \\\n      out/soong/build.ninja -A5\n      \n  build out/soong/vsoc_x86_64/dex_artjars/boot.prof: $\n      m.art-bootclasspath-fragment_android_common_apex10000.bootJarsProfile\n      ...\n      description \u003d ${m.art-bootclasspath-fragment_android_common_apex10000.moduleDesc}profile boot jars${m.art-bootclasspath-fragment_android_common_apex10000.moduleDescSuffix}\n\n  build out/soong/vsoc_x86_64/dex_artjars/boot.prof: $\n      m.art-bootclasspath-fragment_android_common_apex31.bootJarsProfile    \n      ...\n      description \u003d ${m.art-bootclasspath-fragment_android_common_apex31.moduleDesc}profile boot jars${m.art-bootclasspath-fragment_android_common_apex31.moduleDescSuffix}",
      "parentUuid": "2f0dec7f_77f669fb",
      "revId": "e6c42b9a3d22e94c4208c51c2b87b52a802b9b54",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "52b1876f_7c11ec60",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1550939
      },
      "writtenOn": "2021-07-02T16:31:23Z",
      "side": 1,
      "message": "So this must have something to do with git_master/sc-dev lagging behind aosp in terms of the current SDK version.",
      "parentUuid": "3992be87_212218cf",
      "revId": "e6c42b9a3d22e94c4208c51c2b87b52a802b9b54",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f488a07b_1f70fa94",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1550939
      },
      "writtenOn": "2021-07-02T16:43:55Z",
      "side": 1,
      "message": "In AOSP there is only the apex10000 variant.",
      "parentUuid": "52b1876f_7c11ec60",
      "revId": "e6c42b9a3d22e94c4208c51c2b87b52a802b9b54",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aa4f0d3a_ad568662",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1550939
      },
      "writtenOn": "2021-07-02T16:53:54Z",
      "side": 1,
      "message": "Also, to recall the context for bootImageProfileRule: we have two profiles, one for the ART boot image and one for the platform extension. They are currently the same (both for platform), but should become different later.\n\nPreviosuly bootImageProfileRule used to be wrapped in Once() and we generated only the platform profile, but Once() was removed recently, so now when that function gets called twice for different variants of the apex, but for the same type of boot image, it generates duplicate rules.\n\nMaybe we can parameterize the profile file paths on apex version and have some additional rule to choose the latest version and install it where necessary. Or else we can generate the profile for the latest version only. I\u0027m not sure because I don\u0027t understand why we have these different apex versions and how they get installed.",
      "parentUuid": "f488a07b_1f70fa94",
      "revId": "e6c42b9a3d22e94c4208c51c2b87b52a802b9b54",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}