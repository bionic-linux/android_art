{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "33859834_2b89102a",
        "filename": "libartbase/base/file_utils.cc",
        "patchSetId": 4
      },
      "lineNbr": 431,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-07-09T08:21:52Z",
      "side": 1,
      "message": "nit: we do one argument per line",
      "range": {
        "startLine": 431,
        "startChar": 81,
        "endLine": 431,
        "endChar": 100
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6cb53573_31dce0ac",
        "filename": "libartbase/base/file_utils.cc",
        "patchSetId": 4
      },
      "lineNbr": 431,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2021-07-12T01:45:14Z",
      "side": 1,
      "message": "I found that clang-format can be configured to do so.",
      "parentUuid": "33859834_2b89102a",
      "range": {
        "startLine": 431,
        "startChar": 81,
        "endLine": 431,
        "endChar": 100
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a7641ce_d45b99b6",
        "filename": "libartbase/base/file_utils_test.cc",
        "patchSetId": 4
      },
      "lineNbr": 172,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-07-09T08:21:52Z",
      "side": 1,
      "message": "Looks like name clashing could happen here? Should we add a prefix before the isa? Like system for /system files, or /apex for files in /apex?",
      "range": {
        "startLine": 172,
        "startChar": 32,
        "endLine": 172,
        "endChar": 63
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4ee13a32_c783fc98",
        "filename": "libartbase/base/file_utils_test.cc",
        "patchSetId": 4
      },
      "lineNbr": 172,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2021-07-12T01:45:14Z",
      "side": 1,
      "message": "Thank you for raising this. I revisited it and decided to revert the changes for boot classpath artifacts. We don\u0027t have to provide artifact names for boot classpath components in /apex because we don\u0027t compile them. Even if we did compile them, boot classpath components would be compiled into a single file rather than one file per component.",
      "parentUuid": "7a7641ce_d45b99b6",
      "range": {
        "startLine": 172,
        "startChar": 32,
        "endLine": 172,
        "endChar": 63
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5d04ec8_1692530e",
        "filename": "libartbase/base/file_utils_test.cc",
        "patchSetId": 4
      },
      "lineNbr": 172,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-07-12T12:02:02Z",
      "side": 1,
      "message": "I think we could still be exposed to name clashing between different mainline modules contributing to system server. It\u0027d be best to add some differentiator for jars coming from different apexes.",
      "parentUuid": "4ee13a32_c783fc98",
      "range": {
        "startLine": 172,
        "startChar": 32,
        "endLine": 172,
        "endChar": 63
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1a35aea7_2a73f420",
        "filename": "odrefresh/odrefresh.cc",
        "patchSetId": 4
      },
      "lineNbr": 278,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-07-09T08:21:52Z",
      "side": 1,
      "message": "This will include ART jars, is it expected to put them in boot_extension_jars_ ?",
      "range": {
        "startLine": 278,
        "startChar": 63,
        "endLine": 278,
        "endChar": 79
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "44780321_f22f740a",
        "filename": "odrefresh/odrefresh.cc",
        "patchSetId": 4
      },
      "lineNbr": 278,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2021-07-12T01:45:14Z",
      "side": 1,
      "message": "Yes, that\u0027s fine. As mentioned in the comment, boot_extension_jars_ are just used as the dependencies for compiling the system_server. They won\u0027t actually be compiled. The compiled artifacts for those ART jars are already in the ART APEX.",
      "parentUuid": "1a35aea7_2a73f420",
      "range": {
        "startLine": 278,
        "startChar": 63,
        "endLine": 278,
        "endChar": 79
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8438ca47_b6634ab0",
        "filename": "odrefresh/odrefresh.cc",
        "patchSetId": 4
      },
      "lineNbr": 278,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-07-12T12:00:25Z",
      "side": 1,
      "message": "I suggest not naming the field boot_extension_jars_ then. ART jars are usually referred as \"primary boot image\" and framework jars as \"extension\".",
      "parentUuid": "44780321_f22f740a",
      "range": {
        "startLine": 278,
        "startChar": 63,
        "endLine": 278,
        "endChar": 79
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fc5348c1_fc38ff5e",
        "filename": "odrefresh/odrefresh.cc",
        "patchSetId": 4
      },
      "lineNbr": 611,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-07-09T08:21:52Z",
      "side": 1,
      "message": "nit: one per line",
      "range": {
        "startLine": 611,
        "startChar": 61,
        "endLine": 611,
        "endChar": 86
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a1f18b2d_ab9c856d",
        "filename": "odrefresh/odrefresh.cc",
        "patchSetId": 4
      },
      "lineNbr": 611,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2021-07-12T01:45:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fc5348c1_fc38ff5e",
      "range": {
        "startLine": 611,
        "startChar": 61,
        "endLine": 611,
        "endChar": 86
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "439a0609_82edd086",
        "filename": "odrefresh/schema/current.txt",
        "patchSetId": 4
      },
      "lineNbr": 12,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-07-09T08:21:52Z",
      "side": 1,
      "message": "If we want to trigger compilation on any system server / bootclasspath jar, don\u0027t you need this info also for all other modules?",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 12,
        "endChar": 3
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cce2ea4a_3d33763d",
        "filename": "odrefresh/schema/current.txt",
        "patchSetId": 4
      },
      "lineNbr": 12,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2021-07-12T01:45:14Z",
      "side": 1,
      "message": "I think comparing the size and checksums is sufficient for now. We may need the version and modified time info if we want to trigger compilation by just incrementing the version number or touching the jars for debugging purpose. Anyway, that can be a separate change. If you think that\u0027s necessary, I can create a subsequent CL to do so.",
      "parentUuid": "439a0609_82edd086",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 12,
        "endChar": 3
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8bbc26f5_a07e3f90",
        "filename": "odrefresh/schema/current.txt",
        "patchSetId": 4
      },
      "lineNbr": 12,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-07-12T12:00:25Z",
      "side": 1,
      "message": "Where are the size and checksum checks?\n\nI think we need to go with something consistent: if we trigger recompilation for ART version changes, we should do the same for other modules.",
      "parentUuid": "cce2ea4a_3d33763d",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 12,
        "endChar": 3
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "09a6ee99_db9fa305",
        "filename": "odrefresh/schema/current.txt",
        "patchSetId": 4
      },
      "lineNbr": 12,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2021-07-12T13:25:02Z",
      "side": 1,
      "message": "We now need to deal with samegrade APEX versions where the checksum and size don\u0027t change so we should start using the information in apex-info-list.xml. A samegrade APEX update will have the same version number, but a different lastUpdateMillis value (modification time of the APEX).\n\nWe currently have back-off policy for the existing compilation path. This will need revisiting as the number of triggers and number of apexes is larger.",
      "parentUuid": "8bbc26f5_a07e3f90",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 12,
        "endChar": 3
      },
      "revId": "03691bf9dac84ffde19168770382e4f3d8d4eb58",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}