{
  "comments": [
    {
      "key": {
        "uuid": "cddfa7b1_81322c79",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2018-12-05T16:51:14Z",
      "side": 1,
      "message": "native heap object?",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 11
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ff3269c_6a518c95",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2353,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2018-12-05T18:46:06Z",
      "side": 1,
      "message": "The std:: version of this rereads cur_msg on failure, so there\u0027s no need to do it in the loop. (One of the design aspects of atomics that I\u0027ve come to regret.) But I would just use a plain exchange here.",
      "range": {
        "startLine": 2353,
        "startChar": 27,
        "endLine": 2353,
        "endChar": 48
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59a3e83b_bcd651ce",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2353,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-12-05T19:08:36Z",
      "side": 1,
      "message": "You\u0027d still need a loop, though, just not the load? Anyways, changed to use exchange.",
      "parentUuid": "0ff3269c_6a518c95",
      "range": {
        "startLine": 2353,
        "startChar": 27,
        "endLine": 2353,
        "endChar": 48
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d257f85a_1b01e3ce",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2353,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2018-12-05T21:50:42Z",
      "side": 1,
      "message": "Yes, you would still need the loop.",
      "parentUuid": "59a3e83b_bcd651ce",
      "range": {
        "startLine": 2353,
        "startChar": 27,
        "endLine": 2353,
        "endChar": 48
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "20562712_b22fd0c0",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2356,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2018-12-05T16:51:14Z",
      "side": 1,
      "message": "You can just do\n\n  delete cur_msg;\n\nhere (`delete` is a no-op on a null pointer).",
      "range": {
        "startLine": 2354,
        "startChar": 0,
        "endLine": 2356,
        "endChar": 3
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "53901583_6d4e1fab",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2356,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-12-05T18:43:28Z",
      "side": 1,
      "message": "I normally prefer to be explicit for the algorithmic view, but sure.",
      "parentUuid": "20562712_b22fd0c0",
      "range": {
        "startLine": 2354,
        "startChar": 0,
        "endLine": 2356,
        "endChar": 3
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d470ead0_df0a960f",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2356,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2018-12-05T19:09:24Z",
      "side": 1,
      "message": "Unless it\u0027s part of the standard, I don\u0027t think we should assume that the internal implementation would check for null.",
      "parentUuid": "53901583_6d4e1fab",
      "range": {
        "startLine": 2354,
        "startChar": 0,
        "endLine": 2356,
        "endChar": 3
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a4b0a27b_549cf59d",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2356,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-12-05T19:16:03Z",
      "side": 1,
      "message": "It is part of the language spec, I think.",
      "parentUuid": "d470ead0_df0a960f",
      "range": {
        "startLine": 2354,
        "startChar": 0,
        "endLine": 2356,
        "endChar": 3
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c106630b_e18b26d1",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2356,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2018-12-05T21:50:42Z",
      "side": 1,
      "message": "It is. IMHO, an uncharacteristic trade-off of performance for code simplicity. It dates back to C\u0027s free().",
      "parentUuid": "a4b0a27b_549cf59d",
      "range": {
        "startLine": 2354,
        "startChar": 0,
        "endLine": 2356,
        "endChar": 3
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "72dcac01_3d855942",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2364,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2018-12-05T16:51:14Z",
      "side": 1,
      "message": "I think the fact that you replace the fault message with a null pointer when you read it should be part of this method\u0027s documentation.",
      "range": {
        "startLine": 2364,
        "startChar": 11,
        "endLine": 2364,
        "endChar": 67
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d581620d_0a963d15",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2364,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-12-05T18:43:28Z",
      "side": 1,
      "message": "It\u0027s only temporary, though, so as to a) not have it deleted by a concurrent SetFaultMessage and b) retain ordering when trying to add it back.",
      "parentUuid": "72dcac01_3d855942",
      "range": {
        "startLine": 2364,
        "startChar": 11,
        "endLine": 2364,
        "endChar": 67
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70b90a29_c3c7b091",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2364,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2018-12-05T18:46:06Z",
      "side": 1,
      "message": "Again this should also just be fault_message_.exchange(null_str).",
      "parentUuid": "72dcac01_3d855942",
      "range": {
        "startLine": 2364,
        "startChar": 11,
        "endLine": 2364,
        "endChar": 67
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0aa81f4a_e2a7aff3",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2364,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-12-05T19:08:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "70b90a29_c3c7b091",
      "range": {
        "startLine": 2364,
        "startChar": 11,
        "endLine": 2364,
        "endChar": 67
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e0c4ad08_a0efeef7",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2364,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2018-12-05T21:50:42Z",
      "side": 1,
      "message": "One GetFaultMessage can still cause a concurrent GetFaultMessage to see an unexpected null, with very small probability, right? I presume we expect this not to matter, but I agree with Roland that it\u0027s probably worth documenting.",
      "parentUuid": "0aa81f4a_e2a7aff3",
      "range": {
        "startLine": 2364,
        "startChar": 11,
        "endLine": 2364,
        "endChar": 67
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8d3df2a_16b7d026",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2364,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-12-05T21:53:22Z",
      "side": 1,
      "message": "Hm. I guess from the usage point of view the whole feature is a \"write-only\" thing and the reader is for abort logging purposes only. I\u0027ll document (and make the getter private, if I can).",
      "parentUuid": "e0c4ad08_a0efeef7",
      "range": {
        "startLine": 2364,
        "startChar": 11,
        "endLine": 2364,
        "endChar": 67
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "60780694_7bd302b0",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2364,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-12-06T00:06:08Z",
      "side": 1,
      "message": "How about this?",
      "parentUuid": "e8d3df2a_16b7d026",
      "range": {
        "startLine": 2364,
        "startChar": 11,
        "endLine": 2364,
        "endChar": 67
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f98474fc_88565054",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2369,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2018-12-05T18:23:38Z",
      "side": 1,
      "message": "What if cur_msg is nullptr here?",
      "range": {
        "startLine": 2365,
        "startChar": 2,
        "endLine": 2369,
        "endChar": 3
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d83cb73_7ff9fdd3",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2369,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-12-05T18:43:28Z",
      "side": 1,
      "message": "Good point.",
      "parentUuid": "f98474fc_88565054",
      "range": {
        "startLine": 2365,
        "startChar": 2,
        "endLine": 2369,
        "endChar": 3
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "66c04a9c_c98e706d",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2369,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2018-12-05T18:46:06Z",
      "side": 1,
      "message": "Needs to be compare_exchange_strong.",
      "parentUuid": "6d83cb73_7ff9fdd3",
      "range": {
        "startLine": 2365,
        "startChar": 2,
        "endLine": 2369,
        "endChar": 3
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a3a5a43_ef4d1979",
        "filename": "runtime/runtime.cc",
        "patchSetId": 1
      },
      "lineNbr": 2369,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-12-05T19:08:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "66c04a9c_c98e706d",
      "range": {
        "startLine": 2365,
        "startChar": 2,
        "endLine": 2369,
        "endChar": 3
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2b988629_7357061f",
        "filename": "runtime/runtime.h",
        "patchSetId": 1
      },
      "lineNbr": 515,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2018-12-05T16:51:14Z",
      "side": 1,
      "message": "This comment needs to be updated.",
      "range": {
        "startLine": 514,
        "startChar": 0,
        "endLine": 515,
        "endChar": 38
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6db14dc5_db583a24",
        "filename": "runtime/runtime.h",
        "patchSetId": 1
      },
      "lineNbr": 515,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-12-05T18:43:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2b988629_7357061f",
      "range": {
        "startLine": 514,
        "startChar": 0,
        "endLine": 515,
        "endChar": 38
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "12f89466_7d510b49",
        "filename": "runtime/runtime.h",
        "patchSetId": 1
      },
      "lineNbr": 903,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2018-12-05T16:51:14Z",
      "side": 1,
      "message": "Could you add a comment why this member needs to be atomic?",
      "range": {
        "startLine": 903,
        "startChar": 2,
        "endLine": 903,
        "endChar": 13
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c90d992_ca4319e6",
        "filename": "runtime/runtime.h",
        "patchSetId": 1
      },
      "lineNbr": 903,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-12-05T18:43:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "12f89466_7d510b49",
      "range": {
        "startLine": 903,
        "startChar": 2,
        "endLine": 903,
        "endChar": 13
      },
      "revId": "24f60c887201c9f87d3449856cfa0b69535ea684",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}