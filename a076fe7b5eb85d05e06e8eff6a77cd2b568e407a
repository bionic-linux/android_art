{
  "comments": [
    {
      "key": {
        "uuid": "e2029df6_9f09178d",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1118,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Hmm, sharing the loop for compressed and uncompressed compare is actually more complicated than I previously realized. But let\u0027s try to get this right. I\u0027ll just add comments with the exact code below.",
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_7f640b47",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1125,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Replace with\n\n  // For string compression, calculate the number of bytes to compare (not chars).\n  // This could in theory exceed INT32_MAX, so treat temp0 as unsigned.\n  __ cmp(temp4, ShifterOperand(0));\n  __ it(GE);\n  __ add(temp0, temp0, temp0, GE);",
      "range": {
        "startLine": 1119,
        "startChar": 0,
        "endLine": 1125,
        "endChar": 31
      },
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_9f5eb774",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1135,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Insert\n\n  Label find_char_diff_2nd_cmp;",
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_5f694f1b",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1143,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Remove.",
      "range": {
        "startLine": 1143,
        "startChar": 0,
        "endLine": 1143,
        "endChar": 42
      },
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_1f73c70f",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1148,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Replace with\n\n   __ b(\u0026find_char_diff_2nd_cmp, NE);",
      "range": {
        "startLine": 1148,
        "startChar": 0,
        "endLine": 1148,
        "endChar": 28
      },
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_df543f5a",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1152,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Replace with\n\n  // With string compression, we have compared 8 bytes, otherwise 4 chars.\n  __ subs(temp0, temp0, ShifterOperand(mirror::kUseStringCompression ? 8 : 4));\n  __ b(\u0026loop, HI);  // Treating temp0 as unsigned in all cases.",
      "range": {
        "startLine": 1150,
        "startChar": 0,
        "endLine": 1152,
        "endChar": 18
      },
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_bf617332",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1154,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Insert\n\n  __ Bind(\u0026find_char_diff_2nd_cmp);\n  if (mirror::kUseStringCompression) {\n    __ subs(temp0, temp0, 4);  // 4 bytes previously compared.\n    __ b(\u0026end, LS);  // Was the second comparison fully beyond the end?\n  } else {\n    // Without string compression, we can start treating temp0 as signed\n    // and rely on the signed comparison below.\n    __ sub(temp0, temp0, 2);  // 2 chars previously compared.\n  }",
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_7f4d2bc5",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1155,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Remove.",
      "range": {
        "startLine": 1155,
        "startChar": 21,
        "endLine": 1155,
        "endChar": 28
      },
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_5f526f69",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1162,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Remove.",
      "range": {
        "startLine": 1162,
        "startChar": 23,
        "endLine": 1162,
        "endChar": 30
      },
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_5fbf0f7c",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1163,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Replace with \"without string compression, it could be \u003c 1 if a difference is found by the second CMP\"",
      "range": {
        "startLine": 1163,
        "startChar": 6,
        "endLine": 1163,
        "endChar": 66
      },
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_1f4ce7c5",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1166,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Insert: \"Without string compression, \"",
      "range": {
        "startLine": 1166,
        "startChar": 4,
        "endLine": 1166,
        "endChar": 5
      },
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_ff401b8c",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1167,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Insert:\n\n  // With string compression, (temp1 \u003e\u003e 3) \u003d byte where the difference occurs, in the interval [0,3].",
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_df3d5f18",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1169,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Replace with \"(kUseStringCompression ? 3 : 4)\"",
      "range": {
        "startLine": 1169,
        "startChar": 27,
        "endLine": 1169,
        "endChar": 28
      },
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_9f37d736",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 20
      },
      "lineNbr": 1172,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Replace with\n\n  // The comparison is unsigned for string compression, otherwise signed.\n  __ cmp(temp0, ShifterOperand(temp1, LSR, mirror::kUseStringCompression ? 3 : 4));\n  __ b(\u0026end, mirror::kUseStringCompression ? LS : LE);",
      "range": {
        "startLine": 1171,
        "startChar": 0,
        "endLine": 1172,
        "endChar": 17
      },
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2029df6_3fc44308",
        "filename": "compiler/optimizing/intrinsics_arm64.cc",
        "patchSetId": 20
      },
      "lineNbr": 1306,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-09-29T19:17:03Z",
      "side": 1,
      "message": "Can you \"copy\" my suggestions from ARM String.compareTo() intrinsic?",
      "revId": "a076fe7b5eb85d05e06e8eff6a77cd2b568e407a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}