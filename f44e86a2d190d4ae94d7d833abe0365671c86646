{
  "comments": [
    {
      "key": {
        "uuid": "3cf3951c_a4a3e64e",
        "filename": "runtime/mem_map.cc",
        "patchSetId": 2
      },
      "lineNbr": 200,
      "author": {
        "id": 1003723
      },
      "writtenOn": "2014-03-24T16:47:41Z",
      "side": 1,
      "message": "it was unclear to me from reading strerror that this was safe. what if ReadFileToString uses strerror? the doc stays the string may be modified by a subsequent call to strerror.",
      "range": {
        "startLine": 200,
        "startChar": 4,
        "endLine": 200,
        "endChar": 41
      },
      "revId": "f44e86a2d190d4ae94d7d833abe0365671c86646",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bcdf857e_2e1b2c5b",
        "filename": "runtime/mem_map.cc",
        "patchSetId": 2
      },
      "lineNbr": 200,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2014-03-24T17:10:11Z",
      "side": 1,
      "message": "You are right, we should move the strerror below for safety. Though my reading of the manual is that you must call strerror to change the value (just setting errno is not enough):\n\nThe string pointed to shall not be modified by the application, but may be overwritten by a subsequent call to strerror()\n\nI can\u0027t find an occurrence of that in ReadFileToString or called functions.\n\n\nIan asked me to do this change before posting his bug. He wanted const char* to avoid the memory allocation of std::string. That\u0027s why I changed your PS.",
      "parentUuid": "3cf3951c_a4a3e64e",
      "range": {
        "startLine": 200,
        "startChar": 4,
        "endLine": 200,
        "endChar": 41
      },
      "revId": "f44e86a2d190d4ae94d7d833abe0365671c86646",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1cf0910e_43613a6b",
        "filename": "runtime/mem_map.cc",
        "patchSetId": 2
      },
      "lineNbr": 200,
      "author": {
        "id": 1003723
      },
      "writtenOn": "2014-03-24T17:14:31Z",
      "side": 1,
      "message": "we can\u0027t move the strerror down, we want to preserve the value from the mmmap syscall.\n\nmy point is, we shouldn\u0027t assume what ReadFileToString does. it could change later and no one would think to come back here.\n\nhe wanted to remove the std::string in the common case. its only in the error case now. I tried to change to const char* too, but felt it was not safe given the significant code that runs between the mmap and the error logging.",
      "parentUuid": "bcdf857e_2e1b2c5b",
      "range": {
        "startLine": 200,
        "startChar": 4,
        "endLine": 200,
        "endChar": 41
      },
      "revId": "f44e86a2d190d4ae94d7d833abe0365671c86646",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}