{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b15f087c_6c5ed0a4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1042276
      },
      "writtenOn": "2021-10-05T15:25:07Z",
      "side": 1,
      "message": "FYI Jiakai, we\u0027re still waiting for the VM layer to support multiple vCPUs.",
      "revId": "815769c30530855a7ed9186ed6616e080ef018a1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a6ea63c_384a0143",
        "filename": "odrefresh/odrefresh.cc",
        "patchSetId": 1
      },
      "lineNbr": 522,
      "author": {
        "id": 1042276
      },
      "writtenOn": "2021-10-05T15:25:07Z",
      "side": 1,
      "message": "I\u0027d prefer not to touch this in this change just to de-risk.  I\u0027ve seen the task succeeded because it\u0027s still allowed to finish within max_child_process_seconds_ (even if the remaining time is little).  It happened in the VM though, but I don\u0027t know how plenty of the budget is for low-end devices.",
      "range": {
        "startLine": 522,
        "startChar": 14,
        "endLine": 522,
        "endChar": 17
      },
      "revId": "815769c30530855a7ed9186ed6616e080ef018a1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd40ed45_026a8854",
        "filename": "odrefresh/odrefresh.cc",
        "patchSetId": 1
      },
      "lineNbr": 522,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2021-10-05T15:34:07Z",
      "side": 1,
      "message": "That\u0027s a reasonable worry. For VMs I have increased the time remaining by more than max_child_process_seconds, so I think there shouldn\u0027t be any cases where the new code will constrain a child where the old one wouldn\u0027t have?\n\nJiakai - WDYT? Should we increase kMaximumExecutionSeconds to be safe in the non-VM case, or just leave this code alone?",
      "parentUuid": "5a6ea63c_384a0143",
      "range": {
        "startLine": 522,
        "startChar": 14,
        "endLine": 522,
        "endChar": 17
      },
      "revId": "815769c30530855a7ed9186ed6616e080ef018a1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "204534f9_d0a050f2",
        "filename": "odrefresh/odrefresh.cc",
        "patchSetId": 1
      },
      "lineNbr": 522,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2021-10-07T23:44:44Z",
      "side": 1,
      "message": "I believe `std::max` is a mistake. Thank you for spotting it and fixing it. I\u0027d suggest keeping this fix in this change, and kMaximumExecutionSeconds doesn\u0027t need to be increased. As I experimented in b/197275229#comment3, Flame takes 67s from start to end, so the 300s budget should be enough even for low-end devices. Taking more than 300s on boot sounds like a problem that the system health team would flag.",
      "parentUuid": "cd40ed45_026a8854",
      "range": {
        "startLine": 522,
        "startChar": 14,
        "endLine": 522,
        "endChar": 17
      },
      "revId": "815769c30530855a7ed9186ed6616e080ef018a1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e0f64a04_f93c192b",
        "filename": "odrefresh/odrefresh.cc",
        "patchSetId": 1
      },
      "lineNbr": 522,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2021-10-08T08:14:31Z",
      "side": 1,
      "message": "The increase to 500s is only needed when running under nested virtualization (running in a VM while running on Cuttlefish running in a VM on GCE), which is incredibly slow. I\u0027m currently enabling it whenever we\u0027re running in a VM, just because detecting nested virtualization is non-trivial.\nThis wouldn\u0027t be necessary on any real device.\n(And the point of CompOS is to avoid doing this at boot time anyway, of course.)",
      "parentUuid": "204534f9_d0a050f2",
      "range": {
        "startLine": 522,
        "startChar": 14,
        "endLine": 522,
        "endChar": 17
      },
      "revId": "815769c30530855a7ed9186ed6616e080ef018a1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}