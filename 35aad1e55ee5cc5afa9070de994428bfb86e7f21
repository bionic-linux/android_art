{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "531ca12e_cf93638f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2021-03-29T18:30:11Z",
      "side": 1,
      "message": "+danalbert (who goes to the secret cylon meetings) for whether or not mainline is being held to the NDK naming conventions or not...",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "02e527be_b9a9498c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-29T20:42:52Z",
      "side": 1,
      "message": "Without a good reason not to, mainline guidelines are the same as NDK APIs.",
      "parentUuid": "531ca12e_cf93638f",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "73a73075_fb6799d4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-29T20:57:13Z",
      "side": 1,
      "message": "Sorry, let me rephrase the original question.\nWe can still change this API before it is set to stone.\nDo you have any suggested changes we should make? \n\nI have tried to follow the guideline where it specifies conventions,\nand used preference/gut where it does not dictate any.\n\nFor example:\n * The guideline does not specify capitalization, so I tried to match C++.\n * The guideline does not specify how to name enum values, code in practice seems to use all caps, but the is against google style. I am still unsure what the best approach is.... CLASS_VALUE \u003d 1, kClass_Value \u003d 1, Class_kValue \u003d 1 ... ?",
      "parentUuid": "02e527be_b9a9498c",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0c9ecf55_1d4b3741",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-30T22:51:42Z",
      "side": 1,
      "message": "Waiting for clarification on a number of under-specified guidelines but here\u0027s a first pass.",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "881ded11_7053955d",
        "filename": "libdexfile/external/dex_file_supp_test.cc",
        "patchSetId": 5
      },
      "lineNbr": 141,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-30T22:51:42Z",
      "side": 1,
      "message": "I\u0027m pretty sure we need the C API to be tested directly as well. That\u0027s the interface to the system and the C++ wrapper could have different behavior than the underlying API. (waiting for confirmation https://critique-ng.corp.google.com/cl/365914513)",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bd8fccfa_c96fd641",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 17,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-30T22:51:42Z",
      "side": 1,
      "message": "FYI you can use `#pragma once` if you prefer",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fbf2744_b3e6c496",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 30,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-30T22:51:42Z",
      "side": 1,
      "message": "https://g3doc.corp.google.com/company/teams/android-api-council/ndk_guidelines.md?cl\u003dhead#naming (applies to everything here)",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aa4f0ef1_19e97c99",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 30,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T00:12:57Z",
      "side": 1,
      "message": "I assume it is ok as is?  It seems to follow the guideline.\n\nOtherwise could you be more specific what is the desired change?",
      "parentUuid": "3fbf2744_b3e6c496",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54574905_3aa6296e",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 30,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-31T00:54:15Z",
      "side": 1,
      "message": "AExtDexFile according to the guide. I don\u0027t think it\u0027s any different for mainline.",
      "parentUuid": "aa4f0ef1_19e97c99",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "951873b5_a8448e0e",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 30,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T18:41:27Z",
      "side": 1,
      "message": "Wait, there is requirement to prefix names with \"A\"?\n\nThat should be mentioned in the guideline if that is the case.\n\nIt should be also explained - I find that very confusing. I think the only class prefix that I have ever seen was \"I\" for interfaces. I could possibly understand \"C\" for C-API, but \"A\"?\n\nAs it stands now, I read the guideline as: \"a class name\" should become \"AClassName\". Implying, \"foo bar\" should become \"FooBar\", etc...",
      "parentUuid": "54574905_3aa6296e",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a6d6025_7324d56c",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 60,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-30T22:51:42Z",
      "side": 1,
      "message": "https://g3doc.corp.google.com/company/teams/android-api-council/ndk_guidelines.md?cl\u003dhead (AExtDexFile_MethodInfoCallback)\n\nI don\u0027t understand why this is a callback instead of just an out param. If there\u0027s no reason for that make it an out param, if there is I suspect it\u0027ll become clear when the docs are expanded.",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9423b2d0_751923a0",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 60,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T00:12:57Z",
      "side": 1,
      "message": "Needs to be callback to deal with passing back string pointers.\nEspecially for the case where we call the callback for all methods.",
      "parentUuid": "2a6d6025_7324d56c",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e43f7f6_a5e81bd1",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 60,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-31T00:54:15Z",
      "side": 1,
      "message": "Given the lack of any usable collections in C point 2 makes sense.\n\nI don\u0027t understand point 1 though. What\u0027s the problem with returning a string pointer? (In other words, why not have ExtDexFile_GetMethodInfoForOffset return the struct and only require the callback for ExtDexFile_GetAllMethodInfos?)",
      "parentUuid": "9423b2d0_751923a0",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6993f2a1_25fd5400",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 60,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T18:41:27Z",
      "side": 1,
      "message": "See https://android-review.googlesource.com/c/platform/art/+/1621094 for extensive debate on this topic.\n\nTLDR: We can not do:\n  const char* ExtDexFile_GetMethodName(...) {\n    std::string name \u003d PrettyPrintMethod(...);  // Dies when scope exits!\n    return name.data();  // But you can do callback with name.data() here.\n  }\n\nThe callback is clumsy, but neat solution to lifetime, ownership and performance issues.",
      "parentUuid": "8e43f7f6_a5e81bd1",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16af9a63_d32364d5",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 64,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-30T22:51:42Z",
      "side": 1,
      "message": "suggested",
      "range": {
        "startLine": 64,
        "startChar": 44,
        "endLine": 64,
        "endChar": 51
      },
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f0b9efbd_752deacf",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 64,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T00:12:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "16af9a63_d32364d5",
      "range": {
        "startLine": 64,
        "startChar": 44,
        "endLine": 64,
        "endChar": 51
      },
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c8ec150_87bcc904",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 65,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-30T22:51:42Z",
      "side": 1,
      "message": "https://g3doc.corp.google.com/company/teams/android-api-council/ndk_guidelines.md?cl\u003dhead#compatibilty-cts_2 (bad anchor name, it\u0027s the section about documentation)\n\nApplies to all the other functions as well.",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9981fc7a_7551d847",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 65,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T00:12:57Z",
      "side": 1,
      "message": "What is the ask here?  Copy-paste content of the ExtDexFileError enum in comment?",
      "parentUuid": "0c8ec150_87bcc904",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a5063b7_1c845126",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 65,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-31T00:54:15Z",
      "side": 1,
      "message": "Every function needs to document what error cases the function can return, under what circumstances. Parameters need to be documented.\n\nExample: https://cs.android.com/android/platform/superproject/+/master:packages/modules/NeuralNetworks/runtime/include/NeuralNetworks.h;l\u003d237-291;drc\u003da7e069f5523a0295d62ae19d38eb06bc9ce70126\n\n(you don\u0027t *have* to use doxygen for mainline, but the same sort of information needs to be there)\n\nIn this particular case, I\u0027m guessing (and I shouldn\u0027t be guessing) this will return ExtDexFileError_Error if location points somewhere other than the first byte of a dex file. The docs need to say that.\n\nIf the size is too small, does that return the same error?\n\nNeed to mention that the caller needs to call ExtDexFile_Destroy when done.\n\nDoes the ExtDexFile become invalid if the memory at location is freed?",
      "parentUuid": "9981fc7a_7551d847",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7d296f7c_ef13a0f3",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 65,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T19:52:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2a5063b7_1c845126",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b234245_89fa7c86",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 72,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-30T22:51:42Z",
      "side": 1,
      "message": "Does this function not have any failure cases?",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df3bd6fa_a11b2b94",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 72,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-30T22:51:42Z",
      "side": 1,
      "message": "Should this be const? Same question for the next function.",
      "range": {
        "startLine": 72,
        "startChar": 39,
        "endLine": 72,
        "endChar": 55
      },
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b10c1b76_966cc58b",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 72,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T00:12:57Z",
      "side": 1,
      "message": "No, the object can be modified (internal cache).",
      "parentUuid": "df3bd6fa_a11b2b94",
      "range": {
        "startLine": 72,
        "startChar": 39,
        "endLine": 72,
        "endChar": 55
      },
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dc9fec34_df8dc3bc",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 72,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T00:12:57Z",
      "side": 1,
      "message": "If the method is not found, the callback is not called.",
      "parentUuid": "1b234245_89fa7c86",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ee43ee37_8392050b",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 75,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-30T22:51:42Z",
      "side": 1,
      "message": "Const?",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a486716e_b102d550",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 75,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T00:12:57Z",
      "side": 1,
      "message": "\u0027const\u0027 qualifier on function type \u0027ExtDexFile_MethodInfoCallback\u0027 (aka \u0027void (void *, ExtDexFileMethodInfo *)\u0027) has no effect",
      "parentUuid": "ee43ee37_8392050b",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0481245e_4e9e2778",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 86,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-30T22:51:42Z",
      "side": 1,
      "message": "go/android-ndk-api-guidelines#nullable (applies to the other functions as well)",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cb7e2ce8_2f5e708b",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 5
      },
      "lineNbr": 86,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T00:12:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0481245e_4e9e2778",
      "revId": "35aad1e55ee5cc5afa9070de994428bfb86e7f21",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}