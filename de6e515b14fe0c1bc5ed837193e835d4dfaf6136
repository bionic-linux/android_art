{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a4a4a12a_e87b03d1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2021-05-04T17:18:37Z",
      "side": 1,
      "message": "Thank you. I\u0027m still happy to update the busytown invocations - as mentioned I entirely agree installclean should be done there.\n\n[For the record, this is a follow-up on the discussion in https://r.android.com/1688226.]",
      "revId": "de6e515b14fe0c1bc5ed837193e835d4dfaf6136",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "afa284a2_4141a6bf",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-05-04T18:44:02Z",
      "side": 1,
      "message": "Can we remove these? I don\u0027t want to see those warnings every time I build :)",
      "revId": "de6e515b14fe0c1bc5ed837193e835d4dfaf6136",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "53339956_52920372",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-05-05T14:46:22Z",
      "side": 1,
      "message": "That is WAI (being semi-annoying). You should pass the argument every time you build.\n\nIt is compromise between me and Martin.\n1) I think installclean should be default as it guarantees good working build and has very small cost.\n2) It breaks Martin\u0027s workflow where he intentionally wants to keep stale system image around.\n\nThe compromise is that people should always pass that flag locally, and it will warn them if they don\u0027t. If you don\u0027t pass that flag, it is likely ok, but it is a quick visual reminder that if things oddly break, that might be the reason.\n\nOn further thought, I think bazel is right - tests should not be allowed to use files which are not explicit build dependency.  In other words, we should be using chroot on host as well, which would make the flag irrelevant.  But that is big task.",
      "parentUuid": "afa284a2_4141a6bf",
      "revId": "de6e515b14fe0c1bc5ed837193e835d4dfaf6136",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0b36e14e_b405f1a6",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2021-05-05T15:15:36Z",
      "side": 1,
      "message": "Well, the images I want to keep around aren\u0027t stale, and that\u0027s why I want to keep them. I\u0027m fine with this compromise; see also the rather long discussion on https://r.android.com/1688226.",
      "parentUuid": "53339956_52920372",
      "revId": "de6e515b14fe0c1bc5ed837193e835d4dfaf6136",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a9b5de06_0c02489d",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-05-05T20:11:35Z",
      "side": 1,
      "message": "Heh, sorry for joining the long debate. But if we think it should be a warning and shouldn\u0027t be the thing to do, why don\u0027t you (Martin) just pass the flag?",
      "parentUuid": "0b36e14e_b405f1a6",
      "revId": "de6e515b14fe0c1bc5ed837193e835d4dfaf6136",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "292e301d_2b4861dd",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-05-05T20:20:07Z",
      "side": 1,
      "message": "Martin wants to strictly preserve the old behavior of the script and (hopefully) doesn\u0027t mind the stdout warning, as installclean breaks his workflow.\n\nI wanted to always do installclean for correctness, but as compromise, I settled for always having to add explicit --installclean and being nagged if I forget it.",
      "parentUuid": "a9b5de06_0c02489d",
      "revId": "de6e515b14fe0c1bc5ed837193e835d4dfaf6136",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "15a88a05_9c34160d",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2021-05-05T21:31:20Z",
      "side": 1,
      "message": "I\u0027m not a proponent of the warning, but I\u0027m fine with it as a compromise. At the lowest level I want a script that only does what it needs to do and nothing else, and installclean isn\u0027t at all side-effect free (see the other thread for further arguments - let\u0027s not rehash it here).\n\nIf we choose to make installclean the default I intend to add an environment variable to turn it off, because I\u0027m certain I will trip on forgetting the flag otherwise, and that will annoy me.",
      "parentUuid": "292e301d_2b4861dd",
      "revId": "de6e515b14fe0c1bc5ed837193e835d4dfaf6136",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}