{
  "comments": [
    {
      "key": {
        "uuid": "6bb9d8a9_c7c6be1e",
        "filename": "runtime/utils.h",
        "patchSetId": 1
      },
      "lineNbr": 492,
      "author": {
        "id": 1003723
      },
      "writtenOn": "2015-02-13T21:37:01Z",
      "side": 1,
      "message": "\"for a DexFile or OatFile location\"? and then discuss the new subtle leading / stripping behavior?",
      "range": {
        "startLine": 492,
        "startChar": 42,
        "endLine": 492,
        "endChar": 66
      },
      "revId": "073866207ad1661ede110f105e4b1ea9bcedaec8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0bb5bcf7_df6b9fd5",
        "filename": "runtime/utils.h",
        "patchSetId": 1
      },
      "lineNbr": 492,
      "author": {
        "id": 1057373
      },
      "writtenOn": "2015-02-17T18:42:00Z",
      "side": 1,
      "message": "I don\u0027t understand this comment.\n\nMy understanding of what the function does is this: given a dex location and the path of a dalvik cache directory, return the path to what the oat file should be named. This is done by turning the dex location into a file name (replacing \u0027/\u0027 with \u0027@\u0027 to get a valid filename), and adding \u0027@classes.dex\u0027. Does it do something different for the boot image?\n\nAfter thinking some more, there is an ambiguity about what should happen if the dex location isn\u0027t absolute. Two sensible options are:\n 1. Turn a relative dex location into an absolute dex location and form the oat file name from that.\n 2. Treat a relative dex location as a separate dex location from the dex location corresponding to the absolute path of the relative dex location.\n\nI had only thought of (2), not (1) when I posted this change. It seems a shame to add the work and complexity of (1) given that nobody uses relative dex locations. I\u0027ll have to think more about what I want to do here.\n\nThoughts?",
      "parentUuid": "6bb9d8a9_c7c6be1e",
      "range": {
        "startLine": 492,
        "startChar": 42,
        "endLine": 492,
        "endChar": 66
      },
      "revId": "073866207ad1661ede110f105e4b1ea9bcedaec8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8b644c9b_0e7b0f55",
        "filename": "runtime/utils.h",
        "patchSetId": 1
      },
      "lineNbr": 492,
      "author": {
        "id": 1003723
      },
      "writtenOn": "2015-02-18T08:38:25Z",
      "side": 1,
      "message": "the first half of the comment is just a nit about adding \"location\" to make it clear it is not a file path.\n\nprobably cache_location should be renamed to cache_directory to conversely make it clear it is expected to be a real path.\n\nthe second part about stripping leading / characters is because that seems to be part of the functional change to behavior in utils.cc\n\nas far as relative dex locations, they used to work with dalvik. in fact i think there was some grossness that the art/tools/art script needs fully qualified instead of relative paths (and the old dalvik script did not). it is something we have lived without for a while, but it would make life easier to not have the limitation.",
      "parentUuid": "0bb5bcf7_df6b9fd5",
      "range": {
        "startLine": 492,
        "startChar": 42,
        "endLine": 492,
        "endChar": 66
      },
      "revId": "073866207ad1661ede110f105e4b1ea9bcedaec8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0babfcf0_4c3dffb4",
        "filename": "runtime/utils.h",
        "patchSetId": 1
      },
      "lineNbr": 492,
      "author": {
        "id": 1057373
      },
      "writtenOn": "2015-02-18T16:37:08Z",
      "side": 1,
      "message": "How did relative dex locations work in dalvik?\nWas \"/foo/bar/sludge.jar\" considered the same as \"../bar/sludge.jar\" when the current working directory was \"/foo/cat/\"? Or were they considered distinct dex locations?",
      "parentUuid": "8b644c9b_0e7b0f55",
      "range": {
        "startLine": 492,
        "startChar": 42,
        "endLine": 492,
        "endChar": 66
      },
      "revId": "073866207ad1661ede110f105e4b1ea9bcedaec8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "abbf508b_0f22a948",
        "filename": "runtime/utils_test.cc",
        "patchSetId": 1
      },
      "lineNbr": 355,
      "author": {
        "id": 1003723
      },
      "writtenOn": "2015-02-13T21:37:01Z",
      "side": 1,
      "message": "need cases for without leading / now as well.",
      "range": {
        "startLine": 355,
        "startChar": 0,
        "endLine": 355,
        "endChar": 43
      },
      "revId": "073866207ad1661ede110f105e4b1ea9bcedaec8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}