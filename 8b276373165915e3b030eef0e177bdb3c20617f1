{
  "comments": [
    {
      "key": {
        "uuid": "a6644b8c_783db2ec",
        "filename": "runtime/jit/debugger_interface.cc",
        "patchSetId": 1
      },
      "lineNbr": 145,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2019-10-03T17:52:36Z",
      "side": 1,
      "message": "Since we changed the interface at least for JITCodeEntryPublic, can you also update the magic number, so simpleperf know the difference?",
      "range": {
        "startLine": 145,
        "startChar": 60,
        "endLine": 145,
        "endChar": 63
      },
      "revId": "8b276373165915e3b030eef0e177bdb3c20617f1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "45228c41_f69e237f",
        "filename": "runtime/jit/debugger_interface.cc",
        "patchSetId": 1
      },
      "lineNbr": 145,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2019-10-04T12:29:56Z",
      "side": 1,
      "message": "The change is backwards compatible though (since only new field was added at the end).\nSo I intentionally didn\u0027t want to change the magic until there is breaking change.\nYou can ignore the new field in simpleperf for your purposes.\nOr if you do care, you can check the sizeof_entry.",
      "parentUuid": "a6644b8c_783db2ec",
      "range": {
        "startLine": 145,
        "startChar": 60,
        "endLine": 145,
        "endChar": 63
      },
      "revId": "8b276373165915e3b030eef0e177bdb3c20617f1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "241e8f60_3685459d",
        "filename": "runtime/jit/debugger_interface.cc",
        "patchSetId": 1
      },
      "lineNbr": 145,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2019-10-04T18:02:48Z",
      "side": 1,
      "message": "I don\u0027t understand why not change the magic, even if it seems backward compatible.\nFrom user\u0027s point of simpleperf, there are below changes:\n1. sizeof_entry in JITDescriptor is changed, and simpleperf checks that. So simpleperf can\u0027t work with new interface without a change.\n2. With seqlock_ field in JITCodeEntryPublic, simpleperf can check if an entry is valid without rechecking the seqlock_ in JITDescriptorPublic. It is an improvement that simpleperf wants to take advantage of.\n3. In application_tail_entry_ and zygote_head_, the symfile_addr is 0 and symfile_size is 0, and they are valid in linked list. Current simpleperf probably can\u0027t deal with it. So we need a change.\n\nSo simpleperf wants to know the difference in interface. And a change in magic field is the most convenient way. I can use sizeof_entry, but I feel that\u0027s not elegant.",
      "parentUuid": "45228c41_f69e237f",
      "range": {
        "startLine": 145,
        "startChar": 60,
        "endLine": 145,
        "endChar": 63
      },
      "revId": "8b276373165915e3b030eef0e177bdb3c20617f1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cbdfd34_e8572945",
        "filename": "runtime/jit/debugger_interface.cc",
        "patchSetId": 1
      },
      "lineNbr": 145,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2019-10-04T22:01:40Z",
      "side": 1,
      "message": "Well, keeping the version same and relying on sizeof field was very intentional.\nBut at the same time, I don\u0027t feel strongly about it.   I am happy to change it.",
      "parentUuid": "241e8f60_3685459d",
      "range": {
        "startLine": 145,
        "startChar": 60,
        "endLine": 145,
        "endChar": 63
      },
      "revId": "8b276373165915e3b030eef0e177bdb3c20617f1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8b2345c8_b62f881c",
        "filename": "runtime/jit/debugger_interface.cc",
        "patchSetId": 1
      },
      "lineNbr": 145,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2019-10-04T22:24:56Z",
      "side": 1,
      "message": "Thanks!",
      "parentUuid": "7cbdfd34_e8572945",
      "range": {
        "startLine": 145,
        "startChar": 60,
        "endLine": 145,
        "endChar": 63
      },
      "revId": "8b276373165915e3b030eef0e177bdb3c20617f1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}