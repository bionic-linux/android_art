{
  "comments": [
    {
      "key": {
        "uuid": "ddb333b8_88215bca",
        "filename": "runtime/stack.cc",
        "patchSetId": 9
      },
      "lineNbr": 225,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2019-03-25T17:09:42Z",
      "side": 1,
      "message": "This won\u0027t work, we try to be best effort in non-debuggable.",
      "range": {
        "startLine": 222,
        "startChar": 2,
        "endLine": 225,
        "endChar": 3
      },
      "revId": "d9f0346a5fdca470d3f7516706dc3c38fe160612",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e775c169_695249e4",
        "filename": "runtime/stack.cc",
        "patchSetId": 9
      },
      "lineNbr": 225,
      "author": {
        "id": 1089808
      },
      "writtenOn": "2019-03-25T17:37:17Z",
      "side": 1,
      "message": "Ok, switching all the introduced CHECKs to to DCHECKs?",
      "parentUuid": "ddb333b8_88215bca",
      "range": {
        "startLine": 222,
        "startChar": 2,
        "endLine": 225,
        "endChar": 3
      },
      "revId": "d9f0346a5fdca470d3f7516706dc3c38fe160612",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "808bbb7f_88869ef1",
        "filename": "runtime/stack.cc",
        "patchSetId": 9
      },
      "lineNbr": 225,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2019-03-25T17:51:08Z",
      "side": 1,
      "message": "No, my comment wasn\u0027t about debug/ndebug, but about the \"debuggable\" flag passed to the runtime. GetVRegFromOptimizedCode might be called on a method at a point where the vreg_info isn\u0027t there.",
      "parentUuid": "e775c169_695249e4",
      "range": {
        "startLine": 222,
        "startChar": 2,
        "endLine": 225,
        "endChar": 3
      },
      "revId": "d9f0346a5fdca470d3f7516706dc3c38fe160612",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "78f2c89e_02a1cd08",
        "filename": "runtime/stack.cc",
        "patchSetId": 9
      },
      "lineNbr": 225,
      "author": {
        "id": 1089808
      },
      "writtenOn": "2019-03-25T18:21:28Z",
      "side": 1,
      "message": "I might have misunderstood our previous chats on that. Due to my understanding the only cases when GetVRegFromOptimizedCode can be called on \"non-debuggable\" method\u0027s frame is for InstrumentationInstallStack - and for this visitor needs_vreg_info is \u0027false\u0027 thus no check.\n\nDo you mean that something else (like openjdkjvmti) can do that? Could you share what those cases are please?",
      "parentUuid": "808bbb7f_88869ef1",
      "range": {
        "startLine": 222,
        "startChar": 2,
        "endLine": 225,
        "endChar": 3
      },
      "revId": "d9f0346a5fdca470d3f7516706dc3c38fe160612",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a56638a0_febc27fa",
        "filename": "runtime/stack.cc",
        "patchSetId": 9
      },
      "lineNbr": 225,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2019-03-27T12:57:58Z",
      "side": 1,
      "message": "I feel like this isn\u0027t the place to do such checks - I\u0027d much rather have a kIsDebugBuild sanity check in the constructor of the stack walker which will walk the stack and ensure that if needs_vreg_info_ is passed (should this really be called \"expect_stack_maps_to_contain_vregs\" ?) then walks the stack and verifies they all contain vreg info ?",
      "parentUuid": "78f2c89e_02a1cd08",
      "range": {
        "startLine": 222,
        "startChar": 2,
        "endLine": 225,
        "endChar": 3
      },
      "revId": "d9f0346a5fdca470d3f7516706dc3c38fe160612",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f844c0d_faf44cb3",
        "filename": "runtime/stack.cc",
        "patchSetId": 9
      },
      "lineNbr": 225,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2019-03-27T12:58:54Z",
      "side": 1,
      "message": "(eg, we could have a DebuggableStackVisitor that does this check at construction. That will actually be nice to actually differentiate visitors that can only run in debuggable mode).",
      "parentUuid": "a56638a0_febc27fa",
      "range": {
        "startLine": 222,
        "startChar": 2,
        "endLine": 225,
        "endChar": 3
      },
      "revId": "d9f0346a5fdca470d3f7516706dc3c38fe160612",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}