{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2311f155_78bcc0e4",
        "filename": "runtime/art_method.h",
        "patchSetId": 9
      },
      "lineNbr": 360,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-10-22T15:49:42Z",
      "side": 1,
      "message": "Except for the \"jitzygote\" case - running without compiled boot image. Is that worth adding a comment?",
      "range": {
        "startLine": 360,
        "startChar": 22,
        "endLine": 360,
        "endChar": 46
      },
      "revId": "6334a76d52347d19760d86d3f2de5cb61504d75a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1abac55c_79f68fbf",
        "filename": "runtime/art_method.h",
        "patchSetId": 9
      },
      "lineNbr": 360,
      "author": {
        "id": 1889741
      },
      "writtenOn": "2024-10-22T16:19:14Z",
      "side": 1,
      "message": "I can add a comment about this. I\u0027d still treat intrinsics as memory shared for `jitzygote`. WDYT?",
      "parentUuid": "2311f155_78bcc0e4",
      "range": {
        "startLine": 360,
        "startChar": 22,
        "endLine": 360,
        "endChar": 46
      },
      "revId": "6334a76d52347d19760d86d3f2de5cb61504d75a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47dc4f53_2a19f8a2",
        "filename": "runtime/interpreter/mterp/armng/main.S",
        "patchSetId": 9
      },
      "lineNbr": 1549,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-10-22T15:49:42Z",
      "side": 1,
      "message": "Do we want to reduce this to two instructions?\n\n    orns wip, wip, wip, lsl #(ART_METHOD_IS_INTRINSIC_FLAG_BIT - ART_METHOD_IS_MEMORY_SHARED_FLAG_BIT)\n    bmi \\if_hot\n\nGiven that this uses a \"shifted register\" instruction, it may not necessarily be faster. It could be faster on some CPU cores and slower on others.",
      "range": {
        "startLine": 1545,
        "startChar": 4,
        "endLine": 1549,
        "endChar": 15
      },
      "revId": "6334a76d52347d19760d86d3f2de5cb61504d75a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35b2a481_78ca12c9",
        "filename": "runtime/interpreter/mterp/armng/main.S",
        "patchSetId": 9
      },
      "lineNbr": 1549,
      "author": {
        "id": 1889741
      },
      "writtenOn": "2024-10-22T16:19:14Z",
      "side": 1,
      "message": "We had a talk with Nicolas yesterday about reordering these checks (In a previous patchset I was checking first the ART_METHOD_IS_INTRINSIC_FLAG bit). The conclusion was to land an implementation that wouldn\u0027t be more costly for the regular methods and treat the memory shared / intrinsic methods as the slow path.\n\nIn that sense, I think the `orns+bmi` should be faster than the 4 instructions but I am not sure it will be faster that `tst+beq` for the regular instructions.\n\nWDYT about leaving the checks as-is?",
      "parentUuid": "47dc4f53_2a19f8a2",
      "range": {
        "startLine": 1545,
        "startChar": 4,
        "endLine": 1549,
        "endChar": 15
      },
      "revId": "6334a76d52347d19760d86d3f2de5cb61504d75a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3900c5c1_4dbd6914",
        "filename": "runtime/interpreter/mterp/riscv64/main.S",
        "patchSetId": 9
      },
      "lineNbr": 252,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2024-10-22T15:49:42Z",
      "side": 1,
      "message": "If you reorder the checks (they both go to the same `\\if_hot` label), the answer is in my comment on PS3: Replace LWU with LW and check the sign bit with BLTZ.",
      "range": {
        "startLine": 252,
        "startChar": 4,
        "endLine": 252,
        "endChar": 71
      },
      "revId": "6334a76d52347d19760d86d3f2de5cb61504d75a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "23065119_d9c349a3",
        "filename": "runtime/interpreter/mterp/riscv64/main.S",
        "patchSetId": 9
      },
      "lineNbr": 252,
      "author": {
        "id": 1889741
      },
      "writtenOn": "2024-10-22T16:19:14Z",
      "side": 1,
      "message": "Same as above regarding the order of the checks.",
      "parentUuid": "3900c5c1_4dbd6914",
      "range": {
        "startLine": 252,
        "startChar": 4,
        "endLine": 252,
        "endChar": 71
      },
      "revId": "6334a76d52347d19760d86d3f2de5cb61504d75a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}