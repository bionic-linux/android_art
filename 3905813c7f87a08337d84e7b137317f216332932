{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "86b7590b_92ad4a21",
        "filename": "libdexfile/external/dex_file_ext.cc",
        "patchSetId": 8
      },
      "lineNbr": 167,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-09-18T12:54:03Z",
      "side": 0,
      "message": "Dropping this makes `ADexFile_create` reject cdex files with `ADEXFILE_ERROR_INVALID_HEADER`, which causes some simpleperf tests to [fail](http://android-build/test_investigate/invocation/I58800010317282283/test/TR68329447776166796/?blocking\u003dblocking\u0026status\u003dnone), which is due to `testdata/base.vdex` containing cdex.\n\n@yabinc@google.com, you added it [here](https://r.android.com/664058). Is the intention to test cdex?\n\nDo we have any compat considerations to take into account that require us to continue supporting cdex files to some extent? The ART runtime can no longer load them to actually execute anything.",
      "range": {
        "startLine": 167,
        "startChar": 6,
        "endLine": 167,
        "endChar": 55
      },
      "revId": "3905813c7f87a08337d84e7b137317f216332932",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "583e0280_bee66916",
        "filename": "libdexfile/external/dex_file_ext.cc",
        "patchSetId": 8
      },
      "lineNbr": 167,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2024-09-18T16:05:23Z",
      "side": 0,
      "message": "Yes, simpleperf releases static executables in Android NDK and Studio, which can run on older Android versions. I want to keep its ability to collect Java symbols on somewhat old Android versions (at most back to Q). What\u0027s the oldest Android version are supposed to stop using cdex?",
      "parentUuid": "86b7590b_92ad4a21",
      "range": {
        "startLine": 167,
        "startChar": 6,
        "endLine": 167,
        "endChar": 55
      },
      "revId": "3905813c7f87a08337d84e7b137317f216332932",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e66f4f4e_16d6016f",
        "filename": "libdexfile/external/dex_file_ext.cc",
        "patchSetId": 8
      },
      "lineNbr": 167,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-09-19T22:10:36Z",
      "side": 0,
      "message": "We dropped the runtime support in VIC, or more precisely in the M-2024-03 Mainline rollout.\n\nSo then I take it you want us to keep everything unwind-related around for quite some time then? That\u0027s probably most of the stuff I was hoping to clean up here.\n\nWhat\u0027s the user journey when the static NDK binary reads vdex files containing cdex? Is it on host or device?",
      "parentUuid": "583e0280_bee66916",
      "range": {
        "startLine": 167,
        "startChar": 6,
        "endLine": 167,
        "endChar": 55
      },
      "revId": "3905813c7f87a08337d84e7b137317f216332932",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0194e6d6_7722387c",
        "filename": "libdexfile/external/dex_file_ext.cc",
        "patchSetId": 8
      },
      "lineNbr": 167,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2024-09-20T13:00:55Z",
      "side": 0,
      "message": "I wonder if we could move the compact_dex subclass into simpleperf (and possibly remove large part of it).\n\nAlternatively, I wonder what is the minimal code needed to get method names from both standard and compact dex (i.e. make that part of simpleperf independent of ART code base).",
      "parentUuid": "e66f4f4e_16d6016f",
      "range": {
        "startLine": 167,
        "startChar": 6,
        "endLine": 167,
        "endChar": 55
      },
      "revId": "3905813c7f87a08337d84e7b137317f216332932",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}