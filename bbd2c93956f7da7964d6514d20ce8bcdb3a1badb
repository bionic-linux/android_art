{
  "comments": [
    {
      "key": {
        "uuid": "1e8ae17c_021b2ac7",
        "filename": "runtime/native/sun_misc_Unsafe.cc",
        "patchSetId": 19
      },
      "lineNbr": 24,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-10-24T04:27:26Z",
      "side": 1,
      "message": "Goes with \"\" in the list below.",
      "range": {
        "startLine": 24,
        "startChar": 0,
        "endLine": 24,
        "endChar": 31
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f4743ce3_9be804b8",
        "filename": "runtime/native/sun_misc_Unsafe.cc",
        "patchSetId": 19
      },
      "lineNbr": 24,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T22:43:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1e8ae17c_021b2ac7",
      "range": {
        "startLine": 24,
        "startChar": 0,
        "endLine": 24,
        "endChar": 31
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b226958c_2e676cce",
        "filename": "runtime/native/sun_misc_Unsafe.cc",
        "patchSetId": 19
      },
      "lineNbr": 519,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "This takes a mutex from an @FastNative.\n\n1) Are you absolutely sure this won\u0027t cause a deadlock?\n2) Is the performance boost from @FastNative actually necessary here?",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bea05f1b_4eedf2e1",
        "filename": "runtime/native/sun_misc_Unsafe.cc",
        "patchSetId": 19
      },
      "lineNbr": 519,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T01:23:31Z",
      "side": 1,
      "message": "\u003e This takes a mutex from an @FastNative.\n\nI figured since Object.notify() which is similar in purpose is @FastNative, this would be too - and notify() also acquires a mutex. \n\u003e \n\u003e 1) Are you absolutely sure this won\u0027t cause a deadlock?\n\nIf we deadlock here, that would be disastrous already - but I am pretty confident, since there\u0027s the global lock order enforcement.\n\u003e 2) Is the performance boost from @FastNative actually necessary here?\n\nIt would be nice for calls to unpark() that do not require a wake (namely unparking a thread that has not yet gone to sleep) to be as close to free as possible.",
      "parentUuid": "b226958c_2e676cce",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f0424060_e896d731",
        "filename": "runtime/native/sun_misc_Unsafe.cc",
        "patchSetId": 19
      },
      "lineNbr": 519,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-10-24T04:27:26Z",
      "side": 1,
      "message": "We do have an old test case (067), but please add a case to 004-ThreadStress, as 067 doesn\u0027t really stress the unpark case.\n\nNote: lock ordering is only sufficient if threads holding locks always make progress, which is not the case with Waits. (However, we have debug checks for that.)",
      "parentUuid": "bea05f1b_4eedf2e1",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd2d682f_3a0edf32",
        "filename": "runtime/native/sun_misc_Unsafe.cc",
        "patchSetId": 19
      },
      "lineNbr": 519,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T23:46:50Z",
      "side": 1,
      "message": "Added DCHECKs and enhanced ThreadStressTest.",
      "parentUuid": "f0424060_e896d731",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6f697b3a_cc8c3508",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 286,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "nit: is_absolute",
      "range": {
        "startLine": 286,
        "startChar": 23,
        "endLine": 286,
        "endChar": 33
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "165e9684_fd96ba4d",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 286,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T01:23:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6f697b3a_cc8c3508",
      "range": {
        "startLine": 286,
        "startChar": 23,
        "endLine": 286,
        "endChar": 33
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eaf9bbaf_e7e0c331",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 292,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "Doesn\u0027t this allow it to go to values 3,4,5, etc or am I missing something?",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "985ffd91_48ebef92",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 292,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "kNoPermit",
      "range": {
        "startLine": 292,
        "startChar": 68,
        "endLine": 292,
        "endChar": 69
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e436ad8a_3d0d2374",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 292,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T01:23:31Z",
      "side": 1,
      "message": "No - since this is only unparking the current thread, if we increment to 2 there\u0027s an store that pushes it back to 1. This can\u0027t be called concurrently with itself.",
      "parentUuid": "eaf9bbaf_e7e0c331",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "45dfe064_40d4a15b",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 292,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2018-10-24T22:11:30Z",
      "side": 1,
      "message": "I\u0027m kind of neutral on this, since you need to know the numeric values to understand the code. Maybe kNoPermit_1 and kNoPermitWaiterWaiting_2? I\u0027m personally also OK with the way it is, given that the values are documented in the .h file.",
      "parentUuid": "985ffd91_48ebef92",
      "range": {
        "startLine": 292,
        "startChar": 68,
        "endLine": 292,
        "endChar": 69
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7f4a90f0_a0eac043",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 292,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T22:34:31Z",
      "side": 1,
      "message": "I\u0027ve now made sure that there\u0027s explanatory comments at each usage of these constants, but I think making them named would actually make it harder to follow the logic.",
      "parentUuid": "45dfe064_40d4a15b",
      "range": {
        "startLine": 292,
        "startChar": 68,
        "endLine": 292,
        "endChar": 69
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "150f200c_f57fa55f",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 300,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "kNoPermitWaiterWaiting ?",
      "range": {
        "startLine": 300,
        "startChar": 41,
        "endLine": 300,
        "endChar": 42
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3815e407_be82aaad",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 302,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "nit: /* uaddr2 */",
      "range": {
        "startLine": 302,
        "startChar": 21,
        "endLine": 302,
        "endChar": 28
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88481d82_0b6cd2cd",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 302,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T01:23:31Z",
      "side": 1,
      "message": "I don\u0027t think it makes sense to document undefined params",
      "parentUuid": "3815e407_be82aaad",
      "range": {
        "startLine": 302,
        "startChar": 21,
        "endLine": 302,
        "endChar": 28
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "edf0110a_7cbb4ec1",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 303,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "nit: /*val3*/",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fea21d6e_27fbd176",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 303,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T01:23:31Z",
      "side": 1,
      "message": "Val3 is unused for wait calls.",
      "parentUuid": "edf0110a_7cbb4ec1",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c9d350f4_650027f4",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 317,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "kNoPermitWaiterWaiting ?",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "27f4ff65_eb6b4ca0",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 319,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "nit: /* uaddr2 */",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69758c18_c3254080",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 319,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T01:23:31Z",
      "side": 1,
      "message": "Unused for wait calls",
      "parentUuid": "27f4ff65_eb6b4ca0",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7f0c3c24_8859ab14",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 327,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "kNoPermitWaiterWaiting ?",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d78fd783_4a9759c3",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 342,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "kNoPermit ?",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2a13417f_7f25611b",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 357,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "kNoPermitWaiterWaiting",
      "range": {
        "startLine": 357,
        "startChar": 67,
        "endLine": 357,
        "endChar": 68
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9dd31345_e1f83a0f",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 357,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "kPermitAvailable",
      "range": {
        "startLine": 357,
        "startChar": 34,
        "endLine": 357,
        "endChar": 35
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3c5768ee_3dd322a8",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 360,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "nit: space after /* if there\u0027s a space before */\n(here and in the rest of the file)",
      "range": {
        "startLine": 360,
        "startChar": 23,
        "endLine": 360,
        "endChar": 25
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "692e4c35_eddae15f",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 360,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T01:23:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3c5768ee_3dd322a8",
      "range": {
        "startLine": 360,
        "startChar": 23,
        "endLine": 360,
        "endChar": 25
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a9d502b_d31aa55d",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 361,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "nit: /* arg names */ here and below",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1db182b_9ae24f82",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 361,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T01:23:31Z",
      "side": 1,
      "message": "There are no arg names for futex wake, these are all unused.",
      "parentUuid": "5a9d502b_d31aa55d",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7eb7a3f8_afb3dfa2",
        "filename": "runtime/thread.cc",
        "patchSetId": 19
      },
      "lineNbr": 2221,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "kNoPermit",
      "range": {
        "startLine": 2221,
        "startChar": 27,
        "endLine": 2221,
        "endChar": 28
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "782fe6cc_f95748fd",
        "filename": "runtime/thread.h",
        "patchSetId": 19
      },
      "lineNbr": 583,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "What about negative?",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "76ca12bf_b5df9050",
        "filename": "runtime/thread.h",
        "patchSetId": 19
      },
      "lineNbr": 583,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T01:23:31Z",
      "side": 1,
      "message": "Parking for negative time is checked by the java code before calling in. The implementation just returns immediately though. I felt the need to call out 0 as a special case because \"park for zero seconds\" would not normally be interpreted as \"park forever\"",
      "parentUuid": "782fe6cc_f95748fd",
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b5b08977_5f782369",
        "filename": "runtime/thread.h",
        "patchSetId": 19
      },
      "lineNbr": 584,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "nit: is_absolute",
      "range": {
        "startLine": 584,
        "startChar": 17,
        "endLine": 584,
        "endChar": 27
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c002940_278822d7",
        "filename": "runtime/thread.h",
        "patchSetId": 19
      },
      "lineNbr": 584,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T01:23:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b5b08977_5f782369",
      "range": {
        "startLine": 584,
        "startChar": 17,
        "endLine": 584,
        "endChar": 27
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "78c1dc6a_4d2411f1",
        "filename": "runtime/thread.h",
        "patchSetId": 19
      },
      "lineNbr": 1567,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-10-23T23:17:29Z",
      "side": 1,
      "message": "nit: enum would be preferred\n\n  enum class ParkState {\n    kPermitAvailable \u003d 0,\n    kNoPermit \u003d 1,\n    kNoPermitWaiterWaiting \u003d 2,\n  };\n\n  AtomicInteger park_state_;  // see ParkState above.",
      "range": {
        "startLine": 1567,
        "startChar": 4,
        "endLine": 1567,
        "endChar": 17
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9402c8b_90c429b5",
        "filename": "runtime/thread.h",
        "patchSetId": 19
      },
      "lineNbr": 1567,
      "author": {
        "id": 1059543
      },
      "writtenOn": "2018-10-24T01:23:31Z",
      "side": 1,
      "message": "I thought about that, but I felt that it obscured the flow of the fetch_add. If I was just using exchanges I\u0027d use an enum, but it felt weird to add to an enum and get another enum...",
      "parentUuid": "78c1dc6a_4d2411f1",
      "range": {
        "startLine": 1567,
        "startChar": 4,
        "endLine": 1567,
        "endChar": 17
      },
      "revId": "bbd2c93956f7da7964d6514d20ce8bcdb3a1badb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}