{
  "comments": [
    {
      "key": {
        "uuid": "26d7e6f1_b5f8d1f1",
        "filename": "test/2008-redefine-then-old-reflect-field/src/art/Test2008.java",
        "patchSetId": 3
      },
      "lineNbr": 80,
      "author": {
        "id": 1080224
      },
      "writtenOn": "2020-01-09T02:44:43Z",
      "side": 1,
      "message": "Just making sure I understand correctly.\n\nIf we replace this with Transform.class.getDeclaredField(\"myField\").get(t), we would not run into this bug?\n\nOr are the Field object Singletons that are lazily created?",
      "range": {
        "startLine": 80,
        "startChar": 62,
        "endLine": 80,
        "endChar": 70
      },
      "revId": "163652e59b452d10ab7d282024d11de7b5796a26",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "acfeeda8_e781d4dc",
        "filename": "test/2008-redefine-then-old-reflect-field/src/art/Test2008.java",
        "patchSetId": 3
      },
      "lineNbr": 80,
      "author": {
        "id": 1047769
      },
      "writtenOn": "2020-01-09T17:46:34Z",
      "side": 1,
      "message": "\u003e Just making sure I understand correctly.\n\u003e \n\u003e If we replace this with Transform.class.getDeclaredField(\"myField\").get(t), we would not run into this bug?\n\nIt would fix it here but it isn\u0027t a general solution unfortunately. The issue is that j.l.r.Field objects of classes being redefined are made invalid after the redefinition. Since redefinition can happen at any time there is no \u0027safe\u0027 way to use the Field objects technically.\n\n\u003e Or are the Field object Singletons that are lazily created?\n\nField objects are not singletons AFAICT. All the Class \u0027Field\u0027 methods end up here: https://cs.android.com/android/platform/superproject/+/master:art/runtime/native/java_lang_Class.cc;l\u003d265?q\u003dGetDeclaredFields%20\u0026ss\u003dandroid%2Fplatform%2Fsuperproject which just creates new j.l.r.Field instances every time.",
      "parentUuid": "26d7e6f1_b5f8d1f1",
      "range": {
        "startLine": 80,
        "startChar": 62,
        "endLine": 80,
        "endChar": 70
      },
      "revId": "163652e59b452d10ab7d282024d11de7b5796a26",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}