{
  "comments": [
    {
      "key": {
        "uuid": "dcf58392_bc1a36e0",
        "filename": "runtime/interpreter/interpreter_common.cc",
        "patchSetId": 2
      },
      "lineNbr": 459,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2016-10-19T17:37:16Z",
      "side": 1,
      "message": "What code does this optimization refer to? We don\u0027t do the double-store (storing null to the reference array when storing a non-reference to a vreg) for non-moving collectors?",
      "range": {
        "startLine": 458,
        "startChar": 0,
        "endLine": 459,
        "endChar": 93
      },
      "revId": "c449e8b79aaaf156ce055524c41474cc1200ed5a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dcf58392_bc84f6a3",
        "filename": "runtime/interpreter/interpreter_common.cc",
        "patchSetId": 2
      },
      "lineNbr": 459,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2016-10-19T17:53:02Z",
      "side": 1,
      "message": "Look at SetVReg[Primitive] in stack.h. The comments are from there and I also put it on the AssignRegister side.\n\nIf it\u0027s a non-moving collector then it skips clearing the reference array element for that vreg.\n\nBasically in rare cases the primitive value \u003d\u003d the reference value, and in that case it\u0027s indistinguishable from a real reference. For non-moving collectors that seems not to matter (it just adds an extra root) much because it won\u0027t have to rewrite the value.\n\nFor moving collectors it\u0027s a problem since if we moved it then the primitive value would incorrectly change.",
      "parentUuid": "dcf58392_bc1a36e0",
      "range": {
        "startLine": 458,
        "startChar": 0,
        "endLine": 459,
        "endChar": 93
      },
      "revId": "c449e8b79aaaf156ce055524c41474cc1200ed5a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dcf58392_d51b9595",
        "filename": "runtime/interpreter/interpreter_common.cc",
        "patchSetId": 2
      },
      "lineNbr": 459,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2016-10-19T19:37:07Z",
      "side": 1,
      "message": "Thanks for clarifying.",
      "parentUuid": "dcf58392_bc84f6a3",
      "range": {
        "startLine": 458,
        "startChar": 0,
        "endLine": 459,
        "endChar": 93
      },
      "revId": "c449e8b79aaaf156ce055524c41474cc1200ed5a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c0657a0_e8efb305",
        "filename": "runtime/interpreter/interpreter_common.cc",
        "patchSetId": 2
      },
      "lineNbr": 459,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-10-19T21:19:16Z",
      "side": 1,
      "message": "Can we drop all the code that works for !kMovingCollector? ART has grown up since :)",
      "parentUuid": "dcf58392_d51b9595",
      "range": {
        "startLine": 458,
        "startChar": 0,
        "endLine": 459,
        "endChar": 93
      },
      "revId": "c449e8b79aaaf156ce055524c41474cc1200ed5a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c0657a0_483d9f82",
        "filename": "runtime/stack.h",
        "patchSetId": 2
      },
      "lineNbr": 291,
      "author": {
        "id": 1029223
      },
      "writtenOn": "2016-10-20T07:46:19Z",
      "side": 1,
      "message": "an",
      "range": {
        "startLine": 291,
        "startChar": 46,
        "endLine": 291,
        "endChar": 51
      },
      "revId": "c449e8b79aaaf156ce055524c41474cc1200ed5a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}