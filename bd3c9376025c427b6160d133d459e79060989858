{
  "comments": [
    {
      "key": {
        "uuid": "968387c4_c8bee3e9",
        "filename": "runtime/thread.cc",
        "patchSetId": 3
      },
      "lineNbr": 1211,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2014-08-01T18:25:29Z",
      "side": 1,
      "message": "Ian, I assume this is what you were talking about yesterday. This moves the RevokeThreadLocalBuffers call earlier from ~Thread() to Destroy(). The key is to ensure that the thread being destroyed won\u0027t try to allocate an object after this point (line 1211) (or else a buffer could be leaked). It looks fine though it\u0027s not the easiest for me see the whole code right now (due to the move). AssertThreadLocalBuffersAreRevoked() in line 1249 looks assuring.",
      "range": {
        "startLine": 1211,
        "startChar": 33,
        "endLine": 1211,
        "endChar": 57
      },
      "revId": "bd3c9376025c427b6160d133d459e79060989858",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7688d3e2_a79aae90",
        "filename": "runtime/thread.cc",
        "patchSetId": 3
      },
      "lineNbr": 1211,
      "author": {
        "id": 1010118
      },
      "writtenOn": "2014-08-01T19:29:51Z",
      "side": 1,
      "message": "Thanks for taking a look Hiroshi.",
      "parentUuid": "968387c4_c8bee3e9",
      "range": {
        "startLine": 1211,
        "startChar": 33,
        "endLine": 1211,
        "endChar": 57
      },
      "revId": "bd3c9376025c427b6160d133d459e79060989858",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}