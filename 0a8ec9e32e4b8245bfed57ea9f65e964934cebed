{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "75df81d5_32d74829",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1550939
      },
      "writtenOn": "2022-12-12T15:36:37Z",
      "side": 1,
      "message": "+1 to let mast@ the master of linkers and shared libraries to have a look at the rogue dependency. :)",
      "revId": "0a8ec9e32e4b8245bfed57ea9f65e964934cebed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "665df163_2977ae2c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2022-12-12T15:39:55Z",
      "side": 1,
      "message": "The specific repro: touching `art/libartbase/base/globals_unix.cc` causes `signal_dumper` to rebuild (without this `.bp` dependency) and I just could not figure out where that build dependency comes from.",
      "parentUuid": "75df81d5_32d74829",
      "revId": "0a8ec9e32e4b8245bfed57ea9f65e964934cebed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "389db8f4_a86826a7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1550939
      },
      "writtenOn": "2022-12-12T15:42:05Z",
      "side": 1,
      "message": "`NINJA_ARGS\u003d\"-d explain\" m` may help",
      "parentUuid": "665df163_2977ae2c",
      "revId": "0a8ec9e32e4b8245bfed57ea9f65e964934cebed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bdfb7276_e8980c51",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2022-12-12T15:43:50Z",
      "side": 1,
      "message": "I does not, I tried, it just implies that `singal_dumper` depends on `global_unix.cc` (with no intermediate steps) but it is not helpful with regards to why.",
      "parentUuid": "389db8f4_a86826a7",
      "revId": "0a8ec9e32e4b8245bfed57ea9f65e964934cebed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "32982767_97c5e79e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1550939
      },
      "writtenOn": "2022-12-12T15:45:54Z",
      "side": 1,
      "message": "Is it a build-time or a run-time dependency?",
      "parentUuid": "bdfb7276_e8980c51",
      "revId": "0a8ec9e32e4b8245bfed57ea9f65e964934cebed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f9abb492_e8d91af4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2022-12-12T15:46:20Z",
      "side": 1,
      "message": "Both.",
      "parentUuid": "32982767_97c5e79e",
      "revId": "0a8ec9e32e4b8245bfed57ea9f65e964934cebed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a896095b_fc43462c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-12-12T16:17:28Z",
      "side": 1,
      "message": "There\u0027s a dependency on libartbase via `libdexfile_support_static_defaults`, but it\u0027s a static one. It looks like this binary is intended to link all ART libraries statically, so adding libartbase as a shared lib is wrong.\n\nAlso, I can\u0027t reproduce with:\n\n```\n$ touch art/libartbase/base/globals_unix.cc\n$ m signal_dumper\n/.../\n#### build completed successfully (33 seconds) ####\n```\n\nI\u0027ve no idea why you could be seeing a different result than the above, but maybe you got your out tree into a weird state. Have you tried with `installclean` or `clean`? Which lunch or banchan target are you using?",
      "parentUuid": "f9abb492_e8d91af4",
      "revId": "0a8ec9e32e4b8245bfed57ea9f65e964934cebed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3226f7ec_61a02cc2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2022-12-12T16:26:57Z",
      "side": 1,
      "message": "Ah, right.  I still don\u0027t see the dependency path, but I trust you see it :-)\n\nI guess static makes sense.  But `globabls_unix.cc` expects shared, in a sense that it tries to dlopen both d and non-d version, and ensures that exactly one is loaded.\n\nI am not sure what to do.  Maybe we should adjust the code to also allow \"neither is loaded\".",
      "parentUuid": "a896095b_fc43462c",
      "revId": "0a8ec9e32e4b8245bfed57ea9f65e964934cebed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aa5936da_a75e6a2c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2022-12-12T16:56:08Z",
      "side": 1,
      "message": "Done.  Thanks Martin for proper fix.",
      "parentUuid": "3226f7ec_61a02cc2",
      "revId": "0a8ec9e32e4b8245bfed57ea9f65e964934cebed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f39b0583_fc8112c9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-12-12T17:59:12Z",
      "side": 1,
      "message": "No problem! This looks much better, thanks.",
      "parentUuid": "aa5936da_a75e6a2c",
      "revId": "0a8ec9e32e4b8245bfed57ea9f65e964934cebed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}