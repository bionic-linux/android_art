{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "abf16ed1_08032a38",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1958325
      },
      "writtenOn": "2023-11-07T12:54:35Z",
      "side": 1,
      "message": "Hi,\n\nWhile studying ART, I found it useful to be able to collect atrace using perfetto for workloads running inside the chroot, this CL allows it by mounting tracefs using a bind mount.\n\nI realised after doing this that Ruben had done a similar patch here for simpleperf, https://android-review.googlesource.com/c/platform/art/+/2611169, so this should help this use-case too.\n\nOne thing I noticed though is that I had to use a bind mount. If instead we mount tracefs with `mount -t tracefs`, it confuses the atrace service like so, over and over:\n\n    10-25 15:43:46.091     1     1 W init    : Killed 2 additional processes from a oneshot process group for service \u0027vendor.atrace-hal-1-0\u0027. This is new behavior, previously child processes would not be killed in this case.\n    ...\n    10-25 15:43:47.106     1     1 W init    : Killed 2 additional processes from a oneshot process group for service \u0027vendor.atrace-hal-1-0\u0027. This is new behavior, previously child processes would not be killed in this case.\n    \nAfter this, tracing no longer works, even outside of the chroot.\n\nI added a comment to that effect, but I\u0027m afraid I\u0027m not sure what\u0027s going on.\n\nThanks!\nPierre",
      "revId": "02fa55d9b52f5c1dc065e3f8fd63966d3bc5a83b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dbc5ad33_b739bd3b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1958325
      },
      "writtenOn": "2023-11-15T10:32:52Z",
      "side": 1,
      "message": "Friendly ping ðŸ˜Š\n\nLet me know if I should assign anyone in particular to look at this, it\u0027s so far been very useful to have atrace enabled inside the chroot.",
      "revId": "02fa55d9b52f5c1dc065e3f8fd63966d3bc5a83b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "27d350ac_cd7276fb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1975361
      },
      "writtenOn": "2023-11-23T08:12:38Z",
      "side": 1,
      "message": "Polite ping :)",
      "revId": "02fa55d9b52f5c1dc065e3f8fd63966d3bc5a83b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "90756a3b_f146f2fd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1958325
      },
      "writtenOn": "2023-11-23T12:40:57Z",
      "side": 1,
      "message": "Hi, thanks for re-running the test! I see I\u0027m missing a vote on \"Review-Enforcement\", I guess I need a second reviewer from Google.\n\n@Roland, I see you\u0027ve added atrace-related functionality recently for the GC (I\u0027ve also been adding custom metrics like that, for my own experiments, it\u0027s very useful!), could you take a look?\n\nLet me know if there\u0027s anything I need to do on my side, I\u0027m not yet familiar with the process for landing patches.\n\nThanks,\nPierre",
      "revId": "02fa55d9b52f5c1dc065e3f8fd63966d3bc5a83b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}