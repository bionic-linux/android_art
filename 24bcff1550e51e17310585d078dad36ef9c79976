{
  "comments": [
    {
      "key": {
        "uuid": "dccabe38_eb72b1e9",
        "filename": "runtime/arch/arm/quick_entrypoints_arm.S",
        "patchSetId": 8
      },
      "lineNbr": 1235,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-03-17T16:10:15Z",
      "side": 1,
      "message": "Load to r12 and exchange r4\u003c-\u003er12 below, that gives you better options (CBZ/CBNZ and 16-bit instructions instead of 32-bit).",
      "revId": "24bcff1550e51e17310585d078dad36ef9c79976",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ced36ca_0d1ed1a5",
        "filename": "runtime/arch/arm/quick_entrypoints_arm.S",
        "patchSetId": 8
      },
      "lineNbr": 1244,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-03-17T16:10:15Z",
      "side": 1,
      "message": "You could smooth this out with a bit of reordering:\n\n  .Limt_table_iterate:\n    ldr r4, [r0], #(2 * __SIZEOF_POINTER__)\n    cbz r4, .Lconflict_trampoline\n    cmp r4, r12\n    bne .Limt_table_iterate\n    ldr r0, [r0, #-__SIZEOF_POINTER__]",
      "revId": "24bcff1550e51e17310585d078dad36ef9c79976",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3cc67a31_71147296",
        "filename": "runtime/arch/arm/quick_entrypoints_arm.S",
        "patchSetId": 8
      },
      "lineNbr": 1244,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-03-17T16:45:28Z",
      "side": 1,
      "message": "If you want the fastest possible for a single-entry table:\n\n    ldr r4, [r0]\n  .Limt_table_iterate:\n    cmp r4, r12\n    bne .Limt_table_next_entry\n    // First entry is a hit.\n    ldr r0, [r0, #__SIZEOF_POINTER__]\n    ldr pc, [r0, #ART_METHOD_QUICK_CODE_OFFSET_32]\n  .Limt_table_next_entry:\n    cbz r4, .Lconflict_trampoline\n    ldr r4, [r0, #(2 * __SIZEOF_POINTER__)]!\n    b .Limt_table_iterate  // We could unroll the loop instead.\n                           // (Copy-paste the CMP+BNE+LDR+LDR above.)",
      "parentUuid": "1ced36ca_0d1ed1a5",
      "revId": "24bcff1550e51e17310585d078dad36ef9c79976",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dccabe38_cb9335d2",
        "filename": "runtime/arch/arm/quick_entrypoints_arm.S",
        "patchSetId": 8
      },
      "lineNbr": 1248,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-03-17T16:10:15Z",
      "side": 1,
      "message": "Either `ldr pc, #[r0, ...]` (single 32-bit instruction) or just use r4 (two 16-bit instructions).",
      "range": {
        "startLine": 1247,
        "startChar": 0,
        "endLine": 1248,
        "endChar": 10
      },
      "revId": "24bcff1550e51e17310585d078dad36ef9c79976",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3cc67a31_71c23256",
        "filename": "runtime/arch/arm64/quick_entrypoints_arm64.S",
        "patchSetId": 8
      },
      "lineNbr": 1704,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-03-17T16:10:15Z",
      "side": 1,
      "message": "Use xIP1 as the table iterator and smooth out as on ARM:\n\n  .Limt_table_iterate:\n    ldr x0, [xIP1], #(2 * __SIZEOF_POINTER__)\n    cbz x0, .Lconflict_trampoline\n    cmp xIP0, x0\n    bne .Limt_table_iterate\n    ldr x0, [xIP1, #-__SIZEOF_POINTER__]!  // Needs different registers.",
      "revId": "24bcff1550e51e17310585d078dad36ef9c79976",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9cbe868f_a944bd42",
        "filename": "runtime/arch/x86/quick_entrypoints_x86.S",
        "patchSetId": 8
      },
      "lineNbr": 1416,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-03-17T16:10:15Z",
      "side": 1,
      "message": "You could merge that with the PUSH EAX but you\u0027d have to do explicit .cfi_adjust_cfa_offset. And I think the .cfi_rel_offset from PUSH/POP is rather bogus here.",
      "range": {
        "startLine": 1416,
        "startChar": 4,
        "endLine": 1416,
        "endChar": 45
      },
      "revId": "24bcff1550e51e17310585d078dad36ef9c79976",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dccabe38_8b4c4d43",
        "filename": "runtime/arch/x86/quick_entrypoints_x86.S",
        "patchSetId": 8
      },
      "lineNbr": 1422,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-03-17T16:10:15Z",
      "side": 1,
      "message": "2 * __SIZEOF_POINTER__",
      "range": {
        "startLine": 1422,
        "startChar": 17,
        "endLine": 1422,
        "endChar": 18
      },
      "revId": "24bcff1550e51e17310585d078dad36ef9c79976",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c3deeec_3f3647cc",
        "filename": "runtime/arch/x86_64/quick_entrypoints_x86_64.S",
        "patchSetId": 8
      },
      "lineNbr": 1333,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-03-17T16:10:15Z",
      "side": 1,
      "message": "2 * __SIZEOF_POINTER__",
      "range": {
        "startLine": 1333,
        "startChar": 17,
        "endLine": 1333,
        "endChar": 19
      },
      "revId": "24bcff1550e51e17310585d078dad36ef9c79976",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dccabe38_2b68b983",
        "filename": "runtime/entrypoints/quick/quick_trampoline_entrypoints.cc",
        "patchSetId": 8
      },
      "lineNbr": 2132,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-03-17T16:10:15Z",
      "side": 1,
      "message": "Why do you need a handle?",
      "range": {
        "startLine": 2131,
        "startChar": 0,
        "endLine": 2132,
        "endChar": 67
      },
      "revId": "24bcff1550e51e17310585d078dad36ef9c79976",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}