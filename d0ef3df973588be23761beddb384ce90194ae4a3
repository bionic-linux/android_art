{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2ae946e5_6eb70ae4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2022-11-23T06:34:37Z",
      "side": 1,
      "message": "@jiakaiz@google.com all the failures are due to the check you added in (aosp/2309351). When I tried reproducing it locally, I found that boot image was preopted with `-Xgc:CMC`. That isn\u0027t a problem without this CL as in that case unless `ART_USE_READ_BARRIER\u003dfalse`, we ignore cmdline GC-type. But with this CL, we end up generating boot-image without read-barrier, but then while using it, the flags mismatch.\nI also tried using OVERRIDE_ENABLE_UFFD_GC with different values, which had no effect.\n\n\nCan you please see why `-Xgc:CMC` is emitted unconditionally on host? To confirm this you can just add `CHECK_EQ(gc_type, gc::CollectorType::kCollectorTypeNone);` in ShouldUseUserfaultfd() before returning.",
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9cb0a247_1ec2701b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1261281
      },
      "writtenOn": "2022-11-23T07:18:43Z",
      "side": 1,
      "message": "Hi Lokesh,\nObserved this change is causing regression in \"Performance Presubmit\" where calculator app launch times is regressed(patch set 4).\n\nhttps://screenshot.googleplex.com/3Eh4aKpJwDkP4FM\n\nCan you please take a look and fix before merging this change.",
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3c3c6b69_08cbb1a5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-11-23T14:07:50Z",
      "side": 1,
      "message": "It was my fault. aosp/2312212 should fix it.",
      "parentUuid": "2ae946e5_6eb70ae4",
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6df139de_9199c33d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1073883
      },
      "writtenOn": "2022-11-23T18:41:54Z",
      "side": 1,
      "message": "-1 due to the app startup performance impact.\n\nPlease make sure resolving the perf regression before merging the CL.",
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ba7bff2a_2c7d812f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-11-23T18:43:31Z",
      "side": 1,
      "message": "Hi Gopinath, the performance regression is due to a build system bug and it should be fixed by aosp/2312212. Could you please rerun the benchmark?",
      "parentUuid": "6df139de_9199c33d",
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "704782c2_0f547662",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1073883
      },
      "writtenOn": "2022-11-23T18:49:06Z",
      "side": 1,
      "message": "Bad trace from the presubmit build with this change\n\nhttps://android-build.googleplex.com/builds/tests/view?invocationId\u003dI08100010110900963\u0026testResultId\u003dTR72328386331554772\n\nGood build trace\n\nhttps://android-build.googleplex.com/builds/tests/view?invocationId\u003dI43000010111056503\u0026testResultId\u003dTR17828387292035825",
      "parentUuid": "6df139de_9199c33d",
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4bf52610_61813926",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1073883
      },
      "writtenOn": "2022-11-23T19:01:52Z",
      "side": 1,
      "message": "Sravan, Can you build this change on the reference build id https://android-build.googleplex.com/builds/branch-dashboard/git_master?build_id\u003d9324486 and above and run this test to see if you are able to repro or not?",
      "parentUuid": "704782c2_0f547662",
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc7ace30_f2903b43",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1064003
      },
      "writtenOn": "2022-11-23T19:06:30Z",
      "side": 1,
      "message": "Wow, that\u0027s pretty significant. @Lokesh Is that entirely from changing `gUseReadBarrier` to be a runtime variable? I wonder why that\u0027s not showing up on the newgc dashboard? https://dashboards.corp.google.com/google::android-crystalball-generated__appstartup_comparison_fixedversion_coldlaunch_raven_newgc?fb\u003dbuild_target:re:(raven-userdebug)%7C(raven_newgc-userdebug)\u0026fb\u003dbuild_branch:re:(git_master)%7C(git_master-throttled-nightly)\u0026fh\u003deJy9jjEKwzAMRe-i2SfIDTpnDMEotmgEtmsUaQild4-1FEr2jv_xebzlDZxhgs245KgoT1IIkF7FartzPTsNyq2bz4yKc6f0cEUlPEyoUtMj7ucmnKMf4jEe7txR1J_LGqBaUZ6pUFKYVIyGm7W4HD7hJ2oTbGm_R335f6LWCw0EaBc.\u0026f\u003dbuild_creation_timestamp:pd:30 As far as I can tell, setting ART_USE_READ_BARRIER\u003dfalse in the build should have made it a runtime (extern) switch, so in theory regressions from that would have been caught?",
      "parentUuid": "9cb0a247_1ec2701b",
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fc095479_d8f1857f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1064003
      },
      "writtenOn": "2022-11-23T19:07:11Z",
      "side": 1,
      "message": "Ah just seeing the reply from Jiakai, might have been false alarm if we can confirm.",
      "parentUuid": "cc7ace30_f2903b43",
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1471c67d_213e68a7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2022-11-23T19:08:22Z",
      "side": 1,
      "message": "Given that patchset 2 doesn\u0027t have the regression (correct me if I\u0027m wrong), I believe the regression will go away once the other presubmit failures are fixed, which are dependent on Jiakai\u0027s CL (aosp/2312212).\n\nBTW are these regressions in milliseconds?",
      "parentUuid": "9cb0a247_1ec2701b",
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "92794351_5f8a3e7e",
        "filename": "runtime/gc/collector/mark_compact.cc",
        "patchSetId": 4
      },
      "lineNbr": 19,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-11-23T14:07:50Z",
      "side": 1,
      "message": "No longer needed?",
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4b881a94_113a69ff",
        "filename": "runtime/gc/collector/mark_compact.cc",
        "patchSetId": 4
      },
      "lineNbr": 19,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2022-11-23T19:08:22Z",
      "side": 1,
      "message": "Needed for android::base::ReadFileToString()",
      "parentUuid": "92794351_5f8a3e7e",
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e485d894_f6720f90",
        "filename": "runtime/gc/collector/mark_compact.cc",
        "patchSetId": 4
      },
      "lineNbr": 98,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-11-23T14:07:50Z",
      "side": 1,
      "message": "Nit: The name doesn\u0027t apply anymore. Maybe rename it to `FetchCmdlineGcType`?",
      "range": {
        "startLine": 98,
        "startChar": 25,
        "endLine": 98,
        "endChar": 53
      },
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "52ab4a0b_f0f1c0b4",
        "filename": "runtime/gc/collector/mark_compact.cc",
        "patchSetId": 4
      },
      "lineNbr": 98,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2022-11-23T19:08:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e485d894_f6720f90",
      "range": {
        "startLine": 98,
        "startChar": 25,
        "endLine": 98,
        "endChar": 53
      },
      "revId": "d0ef3df973588be23761beddb384ce90194ae4a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}