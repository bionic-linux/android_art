{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d58915fa_7f610893",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2022-06-21T14:13:45Z",
      "side": 1,
      "message": "Can we make the check cover it?",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 19,
        "endChar": 13
      },
      "revId": "a7e4d63162fddeb538b0538005de110ee7e10e65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69f9ee8c_5085bff0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1894735
      },
      "writtenOn": "2022-06-21T15:04:57Z",
      "side": 1,
      "message": "We could, but as I mentioned in a later comment, I think we only need the have locals changed check only when OSRing because it is for that particular frame.",
      "parentUuid": "d58915fa_7f610893",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 19,
        "endChar": 13
      },
      "revId": "a7e4d63162fddeb538b0538005de110ee7e10e65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b661ecab_2462f854",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1894735
      },
      "writtenOn": "2022-06-22T07:42:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "69f9ee8c_5085bff0",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 19,
        "endChar": 13
      },
      "revId": "a7e4d63162fddeb538b0538005de110ee7e10e65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b63ae246_e572e669",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1894735
      },
      "writtenOn": "2022-06-21T09:51:36Z",
      "side": 1,
      "message": "PTAL. Thanks!",
      "revId": "a7e4d63162fddeb538b0538005de110ee7e10e65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8610a344_b8e588c2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1894735
      },
      "writtenOn": "2022-06-22T07:42:32Z",
      "side": 1,
      "message": "Thanks!",
      "revId": "a7e4d63162fddeb538b0538005de110ee7e10e65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "88e24488_a76fb606",
        "filename": "runtime/instrumentation.cc",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2022-06-21T14:13:45Z",
      "side": 1,
      "message": "Why do we not check if if locals have changed?",
      "revId": "a7e4d63162fddeb538b0538005de110ee7e10e65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "44f3b122_c87dfe51",
        "filename": "runtime/instrumentation.cc",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1894735
      },
      "writtenOn": "2022-06-21T15:04:57Z",
      "side": 1,
      "message": "In my understanding we change locals for a particular frame on the stack. It shouldn\u0027t stop us from using JITed code in the new invocations. So that check is really only needed for OSR.",
      "parentUuid": "88e24488_a76fb606",
      "revId": "a7e4d63162fddeb538b0538005de110ee7e10e65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e25ec1d3_f685fb59",
        "filename": "runtime/instrumentation.cc",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2022-06-21T15:08:53Z",
      "side": 1,
      "message": "But InterpretOnly is being called when we try to update the entrypoint. What if that update is for installing new jitted code?",
      "parentUuid": "44f3b122_c87dfe51",
      "revId": "a7e4d63162fddeb538b0538005de110ee7e10e65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9bd31db0_9051ef85",
        "filename": "runtime/instrumentation.cc",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1894735
      },
      "writtenOn": "2022-06-21T15:22:08Z",
      "side": 1,
      "message": "Yes, that should still be fine right? Updating entry point would only impact future calls. The locals changed for the frame that\u0027s already on the stack. When we want to change locals, we get the shadow frame for that particular frame id (we deoptimize if we were running optimized code) and change locals in the shadow frame. So I think other invocations wouldn\u0027t need slow interpreter. Maybe I am missing something here.",
      "parentUuid": "e25ec1d3_f685fb59",
      "revId": "a7e4d63162fddeb538b0538005de110ee7e10e65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2587aa35_90185439",
        "filename": "runtime/instrumentation.cc",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2022-06-21T20:44:45Z",
      "side": 1,
      "message": "Oh I see! But then then HaveLocalsChanged should really be attached to a frame right? So today with your CL, it\u0027s only OSR that looks at HaveLocalsChanged?",
      "parentUuid": "9bd31db0_9051ef85",
      "revId": "a7e4d63162fddeb538b0538005de110ee7e10e65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1fefd2b9_51716682",
        "filename": "runtime/instrumentation.cc",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1894735
      },
      "writtenOn": "2022-06-22T07:42:32Z",
      "side": 1,
      "message": "Yes, it should be attached to frame which is why I think it is maintained as a global instead of frame specific (more context [1]). If we use FrameId then we should also reset this when frame has exited since we would reuse FrameIds. Since we are now only using it to avoid OSR I don\u0027t think it is super important. \n\n[1] https://cs.android.com/android/platform/superproject/+/master:art/openjdkjvmti/ti_method.cc",
      "parentUuid": "2587aa35_90185439",
      "revId": "a7e4d63162fddeb538b0538005de110ee7e10e65",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}