{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0b054f8b_472668aa",
        "filename": "libartservice/service/java/com/android/server/art/Utils.java",
        "patchSetId": 2
      },
      "lineNbr": 430,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2023-10-11T20:30:04Z",
      "side": 1,
      "message": "\"handled above\", just to make it clear it\u0027s not order within the block below it\u0027s talking about.",
      "range": {
        "startLine": 430,
        "startChar": 51,
        "endLine": 430,
        "endChar": 52
      },
      "revId": "7807ca3b4f1f7310ea1993b54da38e6f7bfee77e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "732000b6_46c3db92",
        "filename": "libartservice/service/java/com/android/server/art/Utils.java",
        "patchSetId": 2
      },
      "lineNbr": 430,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2023-10-12T19:13:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0b054f8b_472668aa",
      "range": {
        "startLine": 430,
        "startChar": 51,
        "endLine": 430,
        "endChar": 52
      },
      "revId": "7807ca3b4f1f7310ea1993b54da38e6f7bfee77e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af0d587e_0328ae4a",
        "filename": "libartservice/service/java/com/android/server/art/Utils.java",
        "patchSetId": 2
      },
      "lineNbr": 440,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2023-10-11T20:30:04Z",
      "side": 1,
      "message": "Consider using a lambda for this, to avoid the code dup wrt the above.",
      "range": {
        "startLine": 432,
        "startChar": 0,
        "endLine": 440,
        "endChar": 13
      },
      "revId": "7807ca3b4f1f7310ea1993b54da38e6f7bfee77e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5c952c7a_d1af7599",
        "filename": "libartservice/service/java/com/android/server/art/Utils.java",
        "patchSetId": 2
      },
      "lineNbr": 440,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2023-10-12T19:13:45Z",
      "side": 1,
      "message": "This piece of code contains a `return`, so I can\u0027t put it in a lambda.",
      "parentUuid": "af0d587e_0328ae4a",
      "range": {
        "startLine": 432,
        "startChar": 0,
        "endLine": 440,
        "endChar": 13
      },
      "revId": "7807ca3b4f1f7310ea1993b54da38e6f7bfee77e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "daffed22_7e0beddd",
        "filename": "libartservice/service/java/com/android/server/art/Utils.java",
        "patchSetId": 2
      },
      "lineNbr": 440,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2023-10-13T11:43:38Z",
      "side": 1,
      "message": "The lambda could return either an InitProfileResult to return or null to continue. Maybe that\u0027d become more boilerplate than it\u0027s worth? I\u0027m not sure, I\u0027ll leave it to you.\n\nOne reason I brought it up is that the logic here may be prone to grow.",
      "parentUuid": "5c952c7a_d1af7599",
      "range": {
        "startLine": 432,
        "startChar": 0,
        "endLine": 440,
        "endChar": 13
      },
      "revId": "7807ca3b4f1f7310ea1993b54da38e6f7bfee77e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ec34883e_cfa9e3ff",
        "filename": "libartservice/service/java/com/android/server/art/Utils.java",
        "patchSetId": 2
      },
      "lineNbr": 440,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2023-10-13T13:56:52Z",
      "side": 1,
      "message": "\u003e The lambda could return either an InitProfileResult to return or null to continue. \n\nThanks for the suggestion. I tried that, but it made the code more verbose. https://diff.googleplex.com/#key\u003dRF4z6YMd73wr\n\nI\u0027m now trying a different approach. It\u0027s a bit cleaner, but it still has some boilerplate. At the end of the day, Java is not a great language for writing elegant code :) PTAL. If you think it\u0027s not worth it, I\u0027ll revert the code.",
      "parentUuid": "daffed22_7e0beddd",
      "range": {
        "startLine": 432,
        "startChar": 0,
        "endLine": 440,
        "endChar": 13
      },
      "revId": "7807ca3b4f1f7310ea1993b54da38e6f7bfee77e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b97d43b7_094f8dad",
        "filename": "libartservice/service/java/com/android/server/art/Utils.java",
        "patchSetId": 2
      },
      "lineNbr": 440,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2023-10-13T15:24:24Z",
      "side": 1,
      "message": "Yeah, \"elegant\" is hard to achieve here (to some extent it\u0027s a matter of adjusting one\u0027s perception of what that entails), but the (single) lambda approach didn\u0027t look too awful to me (I\u0027d put the assignments before the ifs though).\n\nI\u0027m a little less keen on this approach, because of all the lambdas ending up in the array, and the dislocated type below. So that\u0027s my Â¢2, I still leave it to you.",
      "parentUuid": "ec34883e_cfa9e3ff",
      "range": {
        "startLine": 432,
        "startChar": 0,
        "endLine": 440,
        "endChar": 13
      },
      "revId": "7807ca3b4f1f7310ea1993b54da38e6f7bfee77e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0bde9db7_70ec44fc",
        "filename": "libartservice/service/java/com/android/server/art/Utils.java",
        "patchSetId": 2
      },
      "lineNbr": 440,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2023-10-13T15:32:36Z",
      "side": 1,
      "message": "Alright, I\u0027ll keep the latest version then, as it at least avoid the duplication of the logic that is prone to grow.",
      "parentUuid": "b97d43b7_094f8dad",
      "range": {
        "startLine": 432,
        "startChar": 0,
        "endLine": 440,
        "endChar": 13
      },
      "revId": "7807ca3b4f1f7310ea1993b54da38e6f7bfee77e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a68b19d0_6e583603",
        "filename": "libartservice/service/javatests/com/android/server/art/PrimaryDexopterTest.java",
        "patchSetId": 2
      },
      "lineNbr": 805,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2023-10-11T20:30:04Z",
      "side": 1,
      "message": "\u003e Please fix this WARNING reported by Error Prone: [UnusedMethod] Method \u0027makeEmbeddedProfileNotUsable\u0027 is never used.\n\nIs there a test if none of the locations have a profile?",
      "range": {
        "startLine": 805,
        "startChar": 0,
        "endLine": 805,
        "endChar": 80
      },
      "revId": "7807ca3b4f1f7310ea1993b54da38e6f7bfee77e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "63e3de52_5c216730",
        "filename": "libartservice/service/javatests/com/android/server/art/PrimaryDexopterTest.java",
        "patchSetId": 2
      },
      "lineNbr": 805,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2023-10-12T19:13:45Z",
      "side": 1,
      "message": "\u003e Please fix this WARNING reported by Error Prone: [UnusedMethod] Method \u0027makeEmbeddedProfileNotUsable\u0027 is never used.\n\nRemoved.\n\n\u003e Is there a test if none of the locations have a profile?\n\nWe do, on line 235-242. That test doesn\u0027t need this method because I made all profiles unusable by default in `setUp`. I realized that we probably don\u0027t even need the `makeProfileNotUsable` method above. I forgot why I added it. Maybe it\u0027s fine to keep it for making things more explicit?",
      "parentUuid": "a68b19d0_6e583603",
      "range": {
        "startLine": 805,
        "startChar": 0,
        "endLine": 805,
        "endChar": 80
      },
      "revId": "7807ca3b4f1f7310ea1993b54da38e6f7bfee77e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9c915317_0350df5a",
        "filename": "libartservice/service/javatests/com/android/server/art/PrimaryDexopterTest.java",
        "patchSetId": 2
      },
      "lineNbr": 805,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2023-10-13T11:43:38Z",
      "side": 1,
      "message": "If it\u0027s made explicit by a call that in reality doesn\u0027t do anything then it can become a lie. I think in that case we\u0027re probably better off just with comments that they\u0027re not usable (if anything at all).\n\nThe most prudent approach would of course be to have less default mocking in `setUp`, so a call to either `blahUsable` or `blahNotUsable` is required, and then use `lenient` less as well.",
      "parentUuid": "63e3de52_5c216730",
      "range": {
        "startLine": 805,
        "startChar": 0,
        "endLine": 805,
        "endChar": 80
      },
      "revId": "7807ca3b4f1f7310ea1993b54da38e6f7bfee77e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cc4444b2_92208be2",
        "filename": "libartservice/service/javatests/com/android/server/art/PrimaryDexopterTest.java",
        "patchSetId": 2
      },
      "lineNbr": 805,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2023-10-13T13:56:52Z",
      "side": 1,
      "message": "OK, I dropped that method as well.\n\nI prefer having the default mocking in `setUp` because we have many tests that aren\u0027t related to profiles and I don\u0027t want to add multiple `makeProfileNotUsable` calls to every of them.",
      "parentUuid": "9c915317_0350df5a",
      "range": {
        "startLine": 805,
        "startChar": 0,
        "endLine": 805,
        "endChar": 80
      },
      "revId": "7807ca3b4f1f7310ea1993b54da38e6f7bfee77e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}