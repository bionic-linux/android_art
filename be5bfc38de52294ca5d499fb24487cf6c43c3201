{
  "comments": [
    {
      "key": {
        "uuid": "404be9fe_706c4b8f",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 111,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-13T21:43:57Z",
      "side": 1,
      "message": "The funny thing is that you can\u0027t do this.\n\nWe process the results with WIFEXITED and WEXITSTATUS macros which only look at the last 8 bits. so you loose the negative part. See my proposal below to unify the code paths.",
      "range": {
        "startLine": 111,
        "startChar": 49,
        "endLine": 111,
        "endChar": 81
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b07324b_f5bbee29",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 111,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2017-10-13T21:46:09Z",
      "side": 1,
      "message": "Why is Richard not CC-ed? He has strong opinions on what the result should look like (actually a struct packed into the exit code), and how that should be unified with GetDexoptNeeded return.",
      "parentUuid": "404be9fe_706c4b8f",
      "range": {
        "startLine": 111,
        "startChar": 49,
        "endLine": 111,
        "endChar": 81
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1c270999_020f8a17",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 111,
      "author": {
        "id": 1084268
      },
      "writtenOn": "2017-10-13T21:52:46Z",
      "side": 1,
      "message": "@andreas - done.\nSeems like I forgot to update the documentation. We are not returning negative exit codes. Will update the docs.",
      "parentUuid": "1b07324b_f5bbee29",
      "range": {
        "startLine": 111,
        "startChar": 49,
        "endLine": 111,
        "endChar": 81
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3de688f8_838c6eb5",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 111,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-13T21:55:30Z",
      "side": 1,
      "message": "I though he was (didn\u0027t check).\n\nI don\u0027t think there are so many options here, but maybe I\u0027m missing some options.\n\nDo you have opinions?",
      "parentUuid": "1b07324b_f5bbee29",
      "range": {
        "startLine": 111,
        "startChar": 49,
        "endLine": 111,
        "endChar": 81
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "86a68068_17477eb4",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 111,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-13T21:55:30Z",
      "side": 1,
      "message": "That\u0027s not true in the current implementation\n\n`dexopt_needed \u003d oat_file_assistant-\u003eGetDexOptNeeded(...)`\n\ncan be negative.",
      "parentUuid": "1c270999_020f8a17",
      "range": {
        "startLine": 111,
        "startChar": 49,
        "endLine": 111,
        "endChar": 81
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37db26c7_b561e8d8",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 111,
      "author": {
        "id": 1084268
      },
      "writtenOn": "2017-10-13T22:12:04Z",
      "side": 1,
      "message": "I am using its abs value in this implementation.\nSee line 307.",
      "parentUuid": "86a68068_17477eb4",
      "range": {
        "startLine": 111,
        "startChar": 49,
        "endLine": 111,
        "endChar": 81
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6698c95b_8d15fe07",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 304,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-13T21:43:57Z",
      "side": 1,
      "message": "you can drop \u0027_\u0027 in comments.",
      "range": {
        "startLine": 304,
        "startChar": 62,
        "endLine": 304,
        "endChar": 63
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de508ed0_1d484e85",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 315,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-13T21:43:57Z",
      "side": 1,
      "message": "Are we sure it doesn\u0027t collide with error codes? \n\nDocument and add checks.",
      "range": {
        "startLine": 315,
        "startChar": 11,
        "endLine": 315,
        "endChar": 17
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c981b854_cd3a0eac",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 315,
      "author": {
        "id": 1084268
      },
      "writtenOn": "2017-10-13T21:50:33Z",
      "side": 1,
      "message": "Error codes have 8th bit set to 1, while others have that set to 0.\nI have added documentation of this in the help and method doc.\nWhat kind of checks are you suggesting?",
      "parentUuid": "de508ed0_1d484e85",
      "range": {
        "startLine": 315,
        "startChar": 11,
        "endLine": 315,
        "endChar": 17
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "30fab3da_e3c6f41a",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 315,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-13T21:55:30Z",
      "side": 1,
      "message": "like a dcheck that the status is not any of the error codes.\n\nIt\u0027a not obvious since you shift an or things.",
      "parentUuid": "c981b854_cd3a0eac",
      "range": {
        "startLine": 315,
        "startChar": 11,
        "endLine": 315,
        "endChar": 17
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0cbc8b98_3c763e64",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 315,
      "author": {
        "id": 1084268
      },
      "writtenOn": "2017-10-13T22:12:04Z",
      "side": 1,
      "message": "Sure.",
      "parentUuid": "30fab3da_e3c6f41a",
      "range": {
        "startLine": 315,
        "startChar": 11,
        "endLine": 315,
        "endChar": 17
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "551d8a27_273540f8",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 343,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-13T21:43:57Z",
      "side": 1,
      "message": "This is kOutOfDate with Invalid filter.\n\nThis corresponds to the case where we don\u0027t have a vdex/odex and run from apk.",
      "range": {
        "startLine": 343,
        "startChar": 13,
        "endLine": 343,
        "endChar": 38
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c909602d_b4f5ba9e",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 358,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-13T21:43:57Z",
      "side": 1,
      "message": "I propose we always return the status. it will unify and simplify the code paths here and in installd.",
      "range": {
        "startLine": 358,
        "startChar": 7,
        "endLine": 358,
        "endChar": 25
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "af988ec6_03768d0f",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 358,
      "author": {
        "id": 1084268
      },
      "writtenOn": "2017-10-13T21:50:33Z",
      "side": 1,
      "message": "What if one wants to check if dexopt needed or not? Are you suggesting to move that logic to installd?",
      "parentUuid": "c909602d_b4f5ba9e",
      "range": {
        "startLine": 358,
        "startChar": 7,
        "endLine": 358,
        "endChar": 25
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c7c098f_72b4469a",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 358,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-13T21:55:30Z",
      "side": 1,
      "message": "yes, you can update the logic in installd as well.",
      "parentUuid": "af988ec6_03768d0f",
      "range": {
        "startLine": 358,
        "startChar": 7,
        "endLine": 358,
        "endChar": 25
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6f0637f1_de2bf79c",
        "filename": "dexoptanalyzer/dexoptanalyzer.cc",
        "patchSetId": 4
      },
      "lineNbr": 358,
      "author": {
        "id": 1084268
      },
      "writtenOn": "2017-10-13T22:12:04Z",
      "side": 1,
      "message": "ruhler@, what do you say?",
      "parentUuid": "4c7c098f_72b4469a",
      "range": {
        "startLine": 358,
        "startChar": 7,
        "endLine": 358,
        "endChar": 25
      },
      "revId": "be5bfc38de52294ca5d499fb24487cf6c43c3201",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}