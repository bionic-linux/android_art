{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b494f6fe_9e5a9ba2",
        "filename": "runtime/fault_handler.cc",
        "patchSetId": 7
      },
      "lineNbr": 295,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2022-10-28T09:55:57Z",
      "side": 1,
      "message": "This about this a little more: if we check the mutator lock is held, don\u0027t we know it\u0027s happening in our code (either in the runtime or in generated code)? If that\u0027s the case, then the pc check becomes more of a debugging check again that we don\u0027t crash in the runtime?",
      "range": {
        "startLine": 294,
        "startChar": 18,
        "endLine": 295,
        "endChar": 43
      },
      "revId": "4681d71a191eb5875fa0c4b33c667cd22b5c2d7a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6bc38ca5_c3ae8910",
        "filename": "runtime/fault_handler.cc",
        "patchSetId": 7
      },
      "lineNbr": 295,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2022-10-28T10:45:43Z",
      "side": 1,
      "message": "Every time we use a `ScopedObjectAccess` in native code (including JNI functions called by native app code), the thread becomes Runnable and takes the mutator lock. And it can crash without going to compiled code at all.",
      "parentUuid": "b494f6fe_9e5a9ba2",
      "range": {
        "startLine": 294,
        "startChar": 18,
        "endLine": 295,
        "endChar": 43
      },
      "revId": "4681d71a191eb5875fa0c4b33c667cd22b5c2d7a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "999420d3_14797810",
        "filename": "runtime/fault_handler.cc",
        "patchSetId": 7
      },
      "lineNbr": 295,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2022-10-28T13:10:52Z",
      "side": 1,
      "message": "Right, but when you say `it can crash`, the crash will happen in the runtime code (libart.so, libart-compiler.so, etc), so we\u0027re really protecting against our own crashes here, no?",
      "parentUuid": "6bc38ca5_c3ae8910",
      "range": {
        "startLine": 294,
        "startChar": 18,
        "endLine": 295,
        "endChar": 43
      },
      "revId": "4681d71a191eb5875fa0c4b33c667cd22b5c2d7a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7770e755_2e220b2e",
        "filename": "runtime/fault_handler.cc",
        "patchSetId": 7
      },
      "lineNbr": 295,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2022-10-28T14:41:21Z",
      "side": 1,
      "message": "Not necessarily - an app can pass invalid pointers to JNI functions that cause crashes in libart.so . These are app crashes that we cannot always prevent at the JNI API boundary (not even with CheckJNI enabled).",
      "parentUuid": "999420d3_14797810",
      "range": {
        "startLine": 294,
        "startChar": 18,
        "endLine": 295,
        "endChar": 43
      },
      "revId": "4681d71a191eb5875fa0c4b33c667cd22b5c2d7a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}