{
  "comments": [
    {
      "key": {
        "uuid": "13757f2b_aadcff5d",
        "filename": "runtime/class_bitstring_helper.h",
        "patchSetId": 10
      },
      "lineNbr": 31,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2017-08-23T17:08:40Z",
      "side": 1,
      "message": "mask \u0026 ~static_cast\u003cuint64_t\u003e(0xff)",
      "range": {
        "startLine": 31,
        "startChar": 9,
        "endLine": 31,
        "endChar": 25
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a49900b8_f8498677",
        "filename": "runtime/class_bitstring_helper.h",
        "patchSetId": 10
      },
      "lineNbr": 56,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2017-08-23T17:08:40Z",
      "side": 1,
      "message": "old \u0026 ~mask",
      "range": {
        "startLine": 56,
        "startChar": 10,
        "endLine": 56,
        "endChar": 28
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0e3abb7_ed35c156",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 10
      },
      "lineNbr": 2017,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "app image",
      "range": {
        "startLine": 2017,
        "startChar": 28,
        "endLine": 2017,
        "endChar": 36
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7f0cb0cf_a5536392",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 10
      },
      "lineNbr": 2018,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "app image",
      "range": {
        "startLine": 2018,
        "startChar": 43,
        "endLine": 2018,
        "endChar": 51
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55a2ee50_9cb4598e",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 10
      },
      "lineNbr": 5368,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "Why here? Please add a comment.",
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6604393e_e2b1c295",
        "filename": "runtime/instance_of_and_status.h",
        "patchSetId": 10
      },
      "lineNbr": 26,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "four",
      "range": {
        "startLine": 26,
        "startChar": 9,
        "endLine": 26,
        "endChar": 13
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a9a64f46_61797fcb",
        "filename": "runtime/instance_of_and_status.h",
        "patchSetId": 10
      },
      "lineNbr": 73,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "depth",
      "range": {
        "startLine": 73,
        "startChar": 25,
        "endLine": 73,
        "endChar": 28
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4eddb652_edadb692",
        "filename": "runtime/instance_of_and_status.h",
        "patchSetId": 10
      },
      "lineNbr": 84,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "depth",
      "range": {
        "startLine": 84,
        "startChar": 27,
        "endLine": 84,
        "endChar": 30
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d7e30060_8ead771e",
        "filename": "runtime/instance_of_and_status.h",
        "patchSetId": 10
      },
      "lineNbr": 94,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "IsUninitialized",
      "range": {
        "startLine": 94,
        "startChar": 7,
        "endLine": 94,
        "endChar": 17
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f3064bfb_93641ef4",
        "filename": "runtime/instance_of_and_status.h",
        "patchSetId": 10
      },
      "lineNbr": 103,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "depth (here and other methods below).",
      "range": {
        "startLine": 103,
        "startChar": 38,
        "endLine": 103,
        "endChar": 41
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "02d486ad_c8f684c2",
        "filename": "runtime/mirror/class-inl.h",
        "patchSetId": 10
      },
      "lineNbr": 520,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-09-07T01:18:14Z",
      "side": 1,
      "message": "Very brief note. There\u0027s a race here that needs to be documented in more depth. The fix is thankfully simple to implement.\n\nAs discussed offline (/w mingyao@, hboehm@):\n\nNeed to add fence on writer side:\n\n                       // e.g. parent instanceof Self\n      read source      // e.g. read parent class\n      fence\n      read target      // e.g. read self class\n\nand add the equivalent fence on the writer side (when assigning):\n\n      increment parent\u0027s \"next\" value\n      fence\n      assign self value to old parent next\n\nIn the JITted code the reader side fence becomes a no-op because JIT publication ensures a happens-before in the situations where the data race is not benign.\n\nThis race is not benign only when the object escapes during class initialization.\n\n   // thread (1)\n   class Self {\n      static {\n         global.self \u003d new Self();\n         sleep(INFINITY); // to emphasize the escapiness\n      }\n      // at the end of \u003cclinit\u003e assume bitstring is assigned\n      // (with a release for class status)\n   }\n\n   // thread (2)\n   class Parent extends Self {}\n\n   // thread (3)\n   while(global.self \u003d\u003d null);\n   global.self instanceof Parent; // must return false\n   // no \"acquire\" edge here because there is no HClinitCheck",
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa50a932_d983f7cf",
        "filename": "runtime/mirror/class-inl.h",
        "patchSetId": 10
      },
      "lineNbr": 525,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "indentation is off",
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ad6c6a95_a454c208",
        "filename": "runtime/mirror/class.cc",
        "patchSetId": 10
      },
      "lineNbr": 116,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2017-08-23T17:08:40Z",
      "side": 1,
      "message": "remove",
      "range": {
        "startLine": 116,
        "startChar": 11,
        "endLine": 116,
        "endChar": 12
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c5e38308_bafe82fd",
        "filename": "runtime/mirror/class.cc",
        "patchSetId": 10
      },
      "lineNbr": 117,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2017-08-23T17:08:40Z",
      "side": 1,
      "message": "break after the \u0027(\u0027, not before.",
      "range": {
        "startLine": 117,
        "startChar": 12,
        "endLine": 117,
        "endChar": 13
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95476071_5ec20690",
        "filename": "runtime/mirror/class.cc",
        "patchSetId": 10
      },
      "lineNbr": 120,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2017-08-23T17:08:40Z",
      "side": 1,
      "message": "ditto",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 120,
        "endChar": 72
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9f05c5eb_ac24d6db",
        "filename": "runtime/mirror/class.cc",
        "patchSetId": 10
      },
      "lineNbr": 286,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "DCHECK_GE",
      "range": {
        "startLine": 286,
        "startChar": 2,
        "endLine": 286,
        "endChar": 8
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "afab9417_7187d17f",
        "filename": "runtime/mirror/class.h",
        "patchSetId": 10
      },
      "lineNbr": 709,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "Add a comment when this is called.",
      "range": {
        "startLine": 709,
        "startChar": 2,
        "endLine": 709,
        "endChar": 74
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "35834e4c_f356956a",
        "filename": "runtime/mirror/class.h",
        "patchSetId": 10
      },
      "lineNbr": 712,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "Add a comment that this method is only for initializing classes in app images.",
      "range": {
        "startLine": 712,
        "startChar": 0,
        "endLine": 712,
        "endChar": 67
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "53dad167_d74b1fcc",
        "filename": "runtime/mirror/class.h",
        "patchSetId": 10
      },
      "lineNbr": 720,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "Given we use a magic constant, you can add a DCHECK that the status is indeed uninitialized.",
      "range": {
        "startLine": 720,
        "startChar": 17,
        "endLine": 720,
        "endChar": 18
      },
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dd149b7f_4c7dc500",
        "filename": "test/knownfailures.json",
        "patchSetId": 10
      },
      "lineNbr": 37,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-08-29T11:09:33Z",
      "side": 1,
      "message": "Please don\u0027t disable unconditionally and check with Andreas/Alex how to fix it.",
      "revId": "6882ad7cdb7c3ebdc96738aeac5820dbee7f7838",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}