{
  "comments": [
    {
      "key": {
        "uuid": "ad59120c_14fdeba5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2018-11-22T16:03:48Z",
      "side": 1,
      "message": "Could you add:\n\n  Bug: 113373927\n\nhere?",
      "revId": "f74f8634f4e7566f9f1a2c4d0d8a2fd6296f892a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ccaeb40e_87f0cc23",
        "filename": "build/apex/ld.config.txt",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2018-11-22T15:43:06Z",
      "side": 1,
      "message": "Tried \"dex2oat -h\" from this directory, and I see in the linker debug that it still loads all libs from /system/${LIB}. Verified that this file is in /apex/com.android.runtime/etc. Shouldn\u0027t it work better?",
      "revId": "f74f8634f4e7566f9f1a2c4d0d8a2fd6296f892a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02787be0_e6d26bca",
        "filename": "build/apex/ld.config.txt",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2018-11-22T16:43:27Z",
      "side": 1,
      "message": "Hmm, I have no idea. That worked for me though. Perhaps selinux denial? What is the label of this file? Is it accessible to the app?",
      "parentUuid": "ccaeb40e_87f0cc23",
      "revId": "f74f8634f4e7566f9f1a2c4d0d8a2fd6296f892a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "24865dac_4df7d418",
        "filename": "build/apex/ld.config.txt",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2018-11-22T17:52:16Z",
      "side": 1,
      "message": "Shouldn\u0027t be selinux - I\u0027ve actually disabled it completely to test this, while rpl@ is working on getting the selinux config in order.\n\n\u003e What is the label of this file? Is it accessible to the app?\n\nSorry, I don\u0027t know what you mean with label there. Permission bits look ok:\n\ntaimen:/ # ls -la /apex/com.android.runtime/                                                                                                     \ntotal 68\ndrwxr-xr-x 7 system system  4096 1970-01-01 01:00 .\ndrwxr-xr-x 6 root   root     120 2018-11-07 21:04 ..\ndrwxr-xr-x 2 system system  4096 1970-01-01 01:00 bin\ndrwxr-xr-x 2 system system  4096 1970-01-01 01:00 etc\ndrwxr-xr-x 2 system system  4096 1970-01-01 01:00 lib\ndrwxr-xr-x 2 system system  4096 1970-01-01 01:00 lib64\ndrwx------ 2 root   root   16384 2018-11-22 14:11 lost+found\n-rw-r--r-- 1 system system    52 1970-01-01 01:00 manifest.json\ntaimen:/ # ls -la /apex/com.android.runtime/etc/                                                                                                 \ntotal 24\ndrwxr-xr-x 2 system system 4096 1970-01-01 01:00 .\ndrwxr-xr-x 7 system system 4096 1970-01-01 01:00 ..\n-rw-r--r-- 1 system system 1090 1970-01-01 01:00 ld.config.txt\ntaimen:/ # ls -la /apex/com.android.runtime/bin/dex2oat                                                                                          \n-rwxr-xr-x 1 system system 539772 1970-01-01 01:00 /apex/com.android.runtime/bin/dex2oat\ntaimen:/ # id\nuid\u003d0(root) gid\u003d0(root) groups\u003d0(root),1004(input),1007(log),1011(adb),1015(sdcard_rw),1028(sdcard_r),3001(net_bt_admin),3002(net_bt),3003(inet),3006(net_bw_stats),3009(readproc),3011(uhid) context\u003du:r:su:s0\n\nHere\u0027s the logcat output: http://gpaste/6347587183443968",
      "parentUuid": "02787be0_e6d26bca",
      "revId": "f74f8634f4e7566f9f1a2c4d0d8a2fd6296f892a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b61b7abc_1d35d63a",
        "filename": "build/apex/ld.config.txt",
        "patchSetId": 2
      },
      "lineNbr": 2,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2018-11-22T15:43:06Z",
      "side": 1,
      "message": "We need some sort of expansion here to deal with this version number and the one in the search path below, right?",
      "range": {
        "startLine": 2,
        "startChar": 39,
        "endLine": 2,
        "endChar": 41
      },
      "revId": "f74f8634f4e7566f9f1a2c4d0d8a2fd6296f892a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "af77bbd0_7fb6a2e7",
        "filename": "build/apex/ld.config.txt",
        "patchSetId": 2
      },
      "lineNbr": 2,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2018-11-22T16:03:48Z",
      "side": 1,
      "message": "Why is this needed?",
      "parentUuid": "b61b7abc_1d35d63a",
      "range": {
        "startLine": 2,
        "startChar": 39,
        "endLine": 2,
        "endChar": 41
      },
      "revId": "f74f8634f4e7566f9f1a2c4d0d8a2fd6296f892a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4d765995_fb77db4e",
        "filename": "build/apex/ld.config.txt",
        "patchSetId": 2
      },
      "lineNbr": 2,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2018-11-22T16:19:39Z",
      "side": 1,
      "message": "Versioning like this might have been discussed at some point, but am of the understanding that the path without the suffix refers to the current version.",
      "parentUuid": "af77bbd0_7fb6a2e7",
      "range": {
        "startLine": 2,
        "startChar": 39,
        "endLine": 2,
        "endChar": 41
      },
      "revId": "f74f8634f4e7566f9f1a2c4d0d8a2fd6296f892a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "395e69fc_9e616b3c",
        "filename": "build/apex/ld.config.txt",
        "patchSetId": 2
      },
      "lineNbr": 2,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2018-11-22T16:36:41Z",
      "side": 1,
      "message": "The reason for this line is to pick the right linker config if a binary is started as /apex/com.android.runtime@1/bin/foo, regardless what\u0027s mounted on /apex/com.android.runtime.",
      "parentUuid": "4d765995_fb77db4e",
      "range": {
        "startLine": 2,
        "startChar": 39,
        "endLine": 2,
        "endChar": 41
      },
      "revId": "f74f8634f4e7566f9f1a2c4d0d8a2fd6296f892a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0900113f_ee2f3ae2",
        "filename": "build/apex/ld.config.txt",
        "patchSetId": 2
      },
      "lineNbr": 2,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2018-11-22T16:43:27Z",
      "side": 1,
      "message": "I don\u0027t think you need @1. You will always run art tools from /apex/com.android.runtime/bin.\n\n@1 directory is for the cases where having multiple versions of the same APEX makes sense, which isn\u0027t true for ART.",
      "parentUuid": "395e69fc_9e616b3c",
      "range": {
        "startLine": 2,
        "startChar": 39,
        "endLine": 2,
        "endChar": 41
      },
      "revId": "f74f8634f4e7566f9f1a2c4d0d8a2fd6296f892a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "52aedd97_fcce03f7",
        "filename": "build/apex/ld.config.txt",
        "patchSetId": 2
      },
      "lineNbr": 2,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2018-11-22T17:52:16Z",
      "side": 1,
      "message": "Good, that simplifies matters. I assumed several could be mounted temporarily during upgrades or rollbacks.\n\nIf we\u0027re making that assumption in this APEX, it\u0027d be good to make it explicit with a property in the manifest too. Then it\u0027d be nice if apexd didn\u0027t mount it on @1 at all, to avoid uncertainty about this.",
      "parentUuid": "0900113f_ee2f3ae2",
      "range": {
        "startLine": 2,
        "startChar": 39,
        "endLine": 2,
        "endChar": 41
      },
      "revId": "f74f8634f4e7566f9f1a2c4d0d8a2fd6296f892a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed702083_88aab807",
        "filename": "build/apex/ld.config.txt",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2018-11-22T16:03:48Z",
      "side": 1,
      "message": "Shouldn\u0027t we use\n\n  com.android.runtime\n\nhere?",
      "range": {
        "startLine": 9,
        "startChar": 38,
        "endLine": 9,
        "endChar": 59
      },
      "revId": "f74f8634f4e7566f9f1a2c4d0d8a2fd6296f892a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4d82fc9c_bf6a1103",
        "filename": "build/apex/ld.config.txt",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2018-11-22T16:36:41Z",
      "side": 1,
      "message": "Then a binary in /apex/com.android.runtime@1/bin/ could link to libraries in /apex/com.android.runtime@2/${LIB}, if that\u0027s what mounted on /apex/com.android.runtime.\n\nIt\u0027d be more correct to use a relative path ../${LIB} here, providing the linker would resolve it relative to the directory of the binary. I\u0027ve seen no sign that that would work though.",
      "parentUuid": "ed702083_88aab807",
      "range": {
        "startLine": 9,
        "startChar": 38,
        "endLine": 9,
        "endChar": 59
      },
      "revId": "f74f8634f4e7566f9f1a2c4d0d8a2fd6296f892a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f7df4f6a_e2ce6a7b",
        "filename": "build/apex/ld.config.txt",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2018-11-22T15:43:06Z",
      "side": 1,
      "message": "This is a small subset of the paths and other setup for the default namespace in the [system] section in /system/etc/ld.config.txt. How much of it do we need here?",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 16,
        "endChar": 48
      },
      "revId": "f74f8634f4e7566f9f1a2c4d0d8a2fd6296f892a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}