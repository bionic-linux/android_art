{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d75a106c_0702c330",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1013030
      },
      "writtenOn": "2021-03-31T07:23:11Z",
      "side": 1,
      "message": "Thanks Martin! I was wondering if this is also necessary with go/ag/14047085 in place?",
      "revId": "b30a5a1f26ea26d59baa7722fcf31aaa3c727563",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9dc05f4f_82527035",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2021-03-31T11:40:07Z",
      "side": 1,
      "message": "It depends on whether you need this to test to work with ART prebuilts or not. If it does then it can run on platform head against prebuilts of the ART module, otherwise it\u0027d only run on fixed platform images against master-art head.\n\nIf it should be used with prebuilts then we shouldn\u0027t do this CL, but rather add the necessary prebuilt modules, which at least means exporting test_com.android.art as a prebuilt module.\n\nSo what\u0027s the plan here?",
      "parentUuid": "d75a106c_0702c330",
      "revId": "b30a5a1f26ea26d59baa7722fcf31aaa3c727563",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5df16b32_d58b55a2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2021-03-31T11:42:08Z",
      "side": 1,
      "message": "Also, if the test should work with ART prebuilts in platform builds then it can\u0027t be in art/, because we\u0027ll remove the ART repos from the platform manifests.",
      "parentUuid": "9dc05f4f_82527035",
      "revId": "b30a5a1f26ea26d59baa7722fcf31aaa3c727563",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ce94828e_10dedbba",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1013030
      },
      "writtenOn": "2021-03-31T11:46:11Z",
      "side": 1,
      "message": "Yeah, I do think we should run this as part of the platform, because a part of what we\u0027re testing (odsign) is in the platform. So I think I\u0027ll move the test to system/security/ondevice-signing . If I do that, plus:\ngo/ag/14049406 and go/ag/14047085, I wonder if that is enough.",
      "parentUuid": "5df16b32_d58b55a2",
      "revId": "b30a5a1f26ea26d59baa7722fcf31aaa3c727563",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54e637f7_43cd3255",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2021-03-31T12:01:49Z",
      "side": 1,
      "message": "Then, if the test should also work on ART head it\u0027ll have to work in the master-art manifest. Short term it may be ok to add system/security to master-art if it doesn\u0027t bring in too many dependencies, but longer term we\u0027d need prebuilts for the test.\n\nIn any case, would you move test_com.android.art with the test then? What\u0027s the purpose of it?\n\n\u003e go/ag/14049406 and go/ag/14047085, I wonder if that is enough.\n\nI guess you\u0027re doing that because you need an APEX signed with the internal dev key to test with? If so, and if the test APEX is moved with the test then you\u0027d need essentially the same thing but maybe with the override_apex in a different location.",
      "parentUuid": "ce94828e_10dedbba",
      "revId": "b30a5a1f26ea26d59baa7722fcf31aaa3c727563",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5b3c626_d775e55a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1013030
      },
      "writtenOn": "2021-03-31T12:08:40Z",
      "side": 1,
      "message": "I think I\u0027m also fine with running this test only in the platform, but if I understand you correctly that means we need a test prebuilt as soon as ART gets moved out of the platform manifest?\n\nThe reason I need test_com.android.art is that I need to trigger the \"on-device signing\" flow for new artifacts; the odrefresh binary inside the ART apex determines whether new artifacts need to be generated, and the easiest way to trigger it to generate new artifacts is to install an ART apex which has a higher version number.\n\nI\u0027m not sure how easy it is to move test_com.android.art itself - I think it needs to be in the ART tree because it needs to be built exactly like the ART apex. (In fact, it is just an ART apex with a higher module version number).",
      "parentUuid": "54e637f7_43cd3255",
      "revId": "b30a5a1f26ea26d59baa7722fcf31aaa3c727563",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}