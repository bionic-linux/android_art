{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "001a8f58_236644cb",
        "filename": "libartservice/service/java/com/android/server/art/PreRebootDexoptJob.java",
        "patchSetId": 11
      },
      "lineNbr": 108,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-06-05T16:17:24Z",
      "side": 1,
      "message": "When would this be false? Can it be replaced with a `Utils.check`?",
      "range": {
        "startLine": 108,
        "startChar": 16,
        "endLine": 108,
        "endChar": 48
      },
      "revId": "b5e33d1d8fa60f8aabc5ebad2c507c812ed2b8bb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "52759b31_01750fce",
        "filename": "libartservice/service/java/com/android/server/art/PreRebootDexoptJob.java",
        "patchSetId": 11
      },
      "lineNbr": 108,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-06-05T16:29:52Z",
      "side": 1,
      "message": "When `onStopJob` is called.",
      "parentUuid": "001a8f58_236644cb",
      "range": {
        "startLine": 108,
        "startChar": 16,
        "endLine": 108,
        "endChar": 48
      },
      "revId": "b5e33d1d8fa60f8aabc5ebad2c507c812ed2b8bb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec3217b2_93975af8",
        "filename": "libartservice/service/java/com/android/server/art/PreRebootDexoptJob.java",
        "patchSetId": 11
      },
      "lineNbr": 108,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-06-06T09:53:52Z",
      "side": 1,
      "message": "Afaics it does a blocking cancel and then sets the flag false, and if a non-JobScheduler job has replaced it in `mRunningJob` then that blocking cancel has just been done earlier. So how does that happen?",
      "parentUuid": "52759b31_01750fce",
      "range": {
        "startLine": 108,
        "startChar": 16,
        "endLine": 108,
        "endChar": 48
      },
      "revId": "b5e33d1d8fa60f8aabc5ebad2c507c812ed2b8bb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7ae42282_6ca34ee5",
        "filename": "libartservice/service/java/com/android/server/art/PreRebootDexoptJob.java",
        "patchSetId": 11
      },
      "lineNbr": 108,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-06-06T12:36:21Z",
      "side": 1,
      "message": "Btw, providing I\u0027m not mistaken, I gather we [don\u0027t need](https://cs.android.com/android/_/android/platform/art/+/7650ceddfacb5c22b5e6f54458ae70f59eee5151:libartservice/service/java/com/android/server/art/PreRebootDexoptJob.java;l\u003d91-93;drc\u003d4f037d83d0c6a21208290af55bc8a2185f7f19d2) any complex logic to avoid the `jobFinished` call when cancelling in `onStopJob`. But a `Utils.check` on `mIsRunningJobKnownByJobScheduler` would be nice for clarity.",
      "parentUuid": "ec3217b2_93975af8",
      "range": {
        "startLine": 108,
        "startChar": 16,
        "endLine": 108,
        "endChar": 48
      },
      "revId": "b5e33d1d8fa60f8aabc5ebad2c507c812ed2b8bb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e77c85b1_3d785236",
        "filename": "libartservice/service/java/com/android/server/art/PreRebootDexoptJob.java",
        "patchSetId": 11
      },
      "lineNbr": 108,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-06-06T17:01:48Z",
      "side": 1,
      "message": "You are right! After moving the call into the future, we no longer need to avoid the `jobFinished` call because we never start a new job before we make the `jobFinished` call for the old job, so this if condition is moot. I\u0027ll send out a separate CL to replace it with `Utils.check`.",
      "parentUuid": "7ae42282_6ca34ee5",
      "range": {
        "startLine": 108,
        "startChar": 16,
        "endLine": 108,
        "endChar": 48
      },
      "revId": "b5e33d1d8fa60f8aabc5ebad2c507c812ed2b8bb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "acefcaec_7bcdc15d",
        "filename": "libartservice/service/java/com/android/server/art/PreRebootDexoptJob.java",
        "patchSetId": 11
      },
      "lineNbr": 235,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-06-05T16:17:24Z",
      "side": 1,
      "message": "`onJobFinishedLocked`?",
      "range": {
        "startLine": 235,
        "startChar": 67,
        "endLine": 235,
        "endChar": 80
      },
      "revId": "b5e33d1d8fa60f8aabc5ebad2c507c812ed2b8bb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6bce063d_f8673dbc",
        "filename": "libartservice/service/java/com/android/server/art/PreRebootDexoptJob.java",
        "patchSetId": 11
      },
      "lineNbr": 235,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-06-05T16:29:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "acefcaec_7bcdc15d",
      "range": {
        "startLine": 235,
        "startChar": 67,
        "endLine": 235,
        "endChar": 80
      },
      "revId": "b5e33d1d8fa60f8aabc5ebad2c507c812ed2b8bb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}