{
  "comments": [
    {
      "key": {
        "uuid": "289d58d4_7cc34578",
        "filename": "compiler/optimizing/intrinsics_arm64.cc",
        "patchSetId": 1
      },
      "lineNbr": 1177,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-04-26T14:15:11Z",
      "side": 1,
      "message": "What about eliding the slow path if \"!invoke-\u003eInputAt(1)-\u003eCanBeNull()\"?",
      "range": {
        "startLine": 1177,
        "startChar": 60,
        "endLine": 1177,
        "endChar": 92
      },
      "revId": "69e58b855289d6b192e401c88c2e7cf73aaada54",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c8659cc5_a3be6824",
        "filename": "compiler/optimizing/intrinsics_arm64.cc",
        "patchSetId": 1
      },
      "lineNbr": 1218,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-04-26T14:15:11Z",
      "side": 1,
      "message": "Given the kOutputOverlap, why not\n\n    __ Subs(out, str, arg);\n    __ B(\u0026end, eq);",
      "range": {
        "startLine": 1217,
        "startChar": 0,
        "endLine": 1218,
        "endChar": 25
      },
      "revId": "69e58b855289d6b192e401c88c2e7cf73aaada54",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "288b98a4_6311b6e4",
        "filename": "compiler/optimizing/intrinsics_arm64.cc",
        "patchSetId": 1
      },
      "lineNbr": 1224,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-04-26T14:15:11Z",
      "side": 1,
      "message": "Similarly,\n\n    __ Orr(out, temp0, temp1);\n    __ Cbz(out, \u0026end);",
      "range": {
        "startLine": 1223,
        "startChar": 0,
        "endLine": 1224,
        "endChar": 30
      },
      "revId": "69e58b855289d6b192e401c88c2e7cf73aaada54",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "289d58d4_5c43e9ee",
        "filename": "compiler/optimizing/intrinsics_arm64.cc",
        "patchSetId": 1
      },
      "lineNbr": 1226,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-04-26T14:15:11Z",
      "side": 1,
      "message": "Where did you set the condition? Should the \"__ Subs(out, temp0, temp1);\" be before this line? (That would also solve the problem that you didn\u0027t set \"out\" before the CBZ below.)",
      "range": {
        "startLine": 1226,
        "startChar": 31,
        "endLine": 1226,
        "endChar": 33
      },
      "revId": "69e58b855289d6b192e401c88c2e7cf73aaada54",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c87cbc59_eb5761fb",
        "filename": "compiler/optimizing/intrinsics_arm64.cc",
        "patchSetId": 1
      },
      "lineNbr": 1227,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-04-26T14:15:11Z",
      "side": 1,
      "message": "Shorter",
      "range": {
        "startLine": 1227,
        "startChar": 5,
        "endLine": 1227,
        "endChar": 13
      },
      "revId": "69e58b855289d6b192e401c88c2e7cf73aaada54",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a87f884b_7525f09d",
        "filename": "compiler/optimizing/intrinsics_arm64.cc",
        "patchSetId": 1
      },
      "lineNbr": 1239,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-04-26T14:15:11Z",
      "side": 1,
      "message": "Please also repeat the alignment assertions from VisitStringEquals() - you\u0027re reading characters 4 at a time.",
      "revId": "69e58b855289d6b192e401c88c2e7cf73aaada54",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "288b98a4_83e7a225",
        "filename": "compiler/optimizing/intrinsics_arm64.cc",
        "patchSetId": 1
      },
      "lineNbr": 1261,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-04-26T14:15:11Z",
      "side": 1,
      "message": "The fall-through to return_zero is wrong, we need to return the difference in lengths.\n\nYou can also do this without the loop:\n\n    // Get the bit position of the first character that differs.\n    temp1 \u003d temp0 ^ temp4;\n    temp1 \u003d RBIT(temp1);  // Or REV.\n    temp1 \u003d CLZ(temp1);\n    temp1 \u003d temp1 \u0026 ~15;  // BFIXL temp1, zr, #0, #4\n    if (temp2 \u003c (temp1 \u003e\u003e 4)) {  // CMP (shifted register)\n      goto end; // Alternatively do CSEL at the bottom.\n    }\n    // Extract the characters and calculate the difference.\n    temp0 \u003e\u003e\u003d temp1;\n    temp4 \u003e\u003e\u003d temp1;\n    temp0 \u0026\u003d 0xffff;  // UXTH\n    out \u003d temp0 - (temp4 \u0026 0xffff);  // SUB (extended register)",
      "range": {
        "startLine": 1254,
        "startChar": 0,
        "endLine": 1261,
        "endChar": 28
      },
      "revId": "69e58b855289d6b192e401c88c2e7cf73aaada54",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2874787a_38c7e5bd",
        "filename": "compiler/optimizing/intrinsics_arm64.cc",
        "patchSetId": 1
      },
      "lineNbr": 1264,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2016-04-26T14:15:11Z",
      "side": 1,
      "message": "With all the changes suggested above, this is unnecessary.",
      "range": {
        "startLine": 1263,
        "startChar": 0,
        "endLine": 1264,
        "endChar": 17
      },
      "revId": "69e58b855289d6b192e401c88c2e7cf73aaada54",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}