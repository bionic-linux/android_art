{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "85fbd72b_6d1acfaa",
        "filename": "runtime/thread.cc",
        "patchSetId": 4
      },
      "lineNbr": 1350,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2023-10-30T23:02:21Z",
      "side": 1,
      "message": "Why should this depend on page size? Isn\u0027t this just the amount of available stack space we are still guaranteed to have available without faulting right after we pass an overflow check? I.e. this the amount of stack space the runtime can use without overflow checks, more-or-less.\n\nThe same seems to apply to the actual usable stack size. I would have assumed that GetStackOverflowReservedBytes(kRuntimeISA) + \u003cactual usable stack size\u003e must be a multiple of the page size, and no less than GetStackOverflowReservedBytes(kRuntimeISA) + 4K. Only the protected area needs to be page-aligned by itself?",
      "range": {
        "startLine": 1350,
        "startChar": 5,
        "endLine": 1350,
        "endChar": 96
      },
      "revId": "fa81e8789b8bec1e5db7598b5663280e42057bfc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec361a13_096a0760",
        "filename": "runtime/thread.cc",
        "patchSetId": 4
      },
      "lineNbr": 1350,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2023-10-30T23:10:40Z",
      "side": 1,
      "message": "Actually, I\u0027m not sure I don\u0027t see a reason the actual values here matter a lot, since presumably only the actual stack region will typically end up with physical memory. I would like to see the comment be clearer on what\u0027s actually required vs. a discretionary choice.",
      "parentUuid": "85fbd72b_6d1acfaa",
      "range": {
        "startLine": 1350,
        "startChar": 5,
        "endLine": 1350,
        "endChar": 96
      },
      "revId": "fa81e8789b8bec1e5db7598b5663280e42057bfc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d6f3feb_1825ff0f",
        "filename": "runtime/thread.cc",
        "patchSetId": 4
      },
      "lineNbr": 1350,
      "author": {
        "id": 1280281
      },
      "writtenOn": "2023-11-01T21:04:21Z",
      "side": 1,
      "message": "The overflow reserved bytes indeed doesn\u0027t depend on page size. Another patch in the chain - where the value was updated to match page size on 16K systems - has been removed, and this part of the comment should\u0027ve been removed as well.\n\nThe comment is now updated to describe requirements and typical values for the components.\n\nAlso, a DCHECK_ALIGNED is added to check against the requirement for kStackOverflowProtectedSize.\n\nThe expression computing minimum stack size is updated accordingly - to round up the overall stack region size to page size matching the described requirement.",
      "parentUuid": "ec361a13_096a0760",
      "range": {
        "startLine": 1350,
        "startChar": 5,
        "endLine": 1350,
        "endChar": 96
      },
      "revId": "fa81e8789b8bec1e5db7598b5663280e42057bfc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}