{
  "comments": [
    {
      "key": {
        "uuid": "763d7d18_3821f141",
        "filename": "openjdkjvmti/ti_class.cc",
        "patchSetId": 1
      },
      "lineNbr": 946,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-23T21:12:17Z",
      "side": 1,
      "message": "nit: this would read more cleanly with 4 space line wrap\n\n  art::VisitClassLoaderDexFiles(\n      soa,\n      class_loader,\n      [\u0026](art::Thread* self, const art::DexFile* dex_file) {\n        dex_files.push_back(dex_file);\n        return false;\n      }\n  );\n\nallowing you to fit the lambda args on one line.",
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "79c497ae_286987da",
        "filename": "openjdkjvmti/ti_class.cc",
        "patchSetId": 1
      },
      "lineNbr": 952,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-23T21:12:17Z",
      "side": 1,
      "message": "nit: this seems wrong and I missed the lambda the first time I read this code, the way the } matching should work for lambdas is\n\n1) Find the line with [. \n2) Then go all the way to the left before hitting whitespace. \n3) The } should match that spot horizontally.\n\nso in this case it would match the [\n     \n      call(x,\n           y,\n           []{ ...\n           });\n\nbut with something else you might have\n     \n     auto x \u003d [] {...\n     };",
      "range": {
        "startLine": 952,
        "startChar": 2,
        "endLine": 952,
        "endChar": 3
      },
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32a1ae61_42d835dc",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 1
      },
      "lineNbr": 1133,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-23T21:12:17Z",
      "side": 1,
      "message": "nit: can you fit on one line?\n\n auto add_element_names \u003d\n     [\u0026](Thread* self, ObjPtr\u003cmirror::Object\u003e element, bool* error) {\n     ..............\n     };",
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d113a4be_37d0e070",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 1
      },
      "lineNbr": 1153,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-23T21:12:17Z",
      "side": 1,
      "message": "nit: /* parameter name */",
      "range": {
        "startLine": 1153,
        "startChar": 77,
        "endLine": 1153,
        "endChar": 82
      },
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d9645b1_7e192eb2",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 33,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-23T21:12:17Z",
      "side": 1,
      "message": "Why are there static functions in a header?",
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f0ee5adf_4042d8af",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 33,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-02-24T01:13:49Z",
      "side": 1,
      "message": "Imports into two compilation units, I assume?",
      "parentUuid": "9d9645b1_7e192eb2",
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b4a86b3_10392d75",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 33,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-24T01:44:31Z",
      "side": 1,
      "message": "That seems like undesirable behavior.\n\nAnother way of phrasing what you said: this will end up duplicating the definition across every translation unit that it\u0027s used in [and if it\u0027s not inlined].\n-----\nOTOH, if it\u0027s just \"inline\" but not \"static\" then the compiler has to assume it\u0027s callable from other .o files,  it compiles code anyway?\n\nHowever since the linker will anyway remove dead functions, this seems quite pointless that can do more harm than good.\n-----\n\nPerhaps while you\u0027re cleaning this up we can remove the \"static\" keywords from header functions [unless they are in a class]?",
      "parentUuid": "f0ee5adf_4042d8af",
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "39bd5ff7_01f7102e",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-23T21:12:17Z",
      "side": 1,
      "message": "Cant you just make another SOA? This doesn\u0027t seem so lightweight that reusing the SOA would be a big win.",
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db987af1_4ce994fe",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-02-24T01:13:49Z",
      "side": 1,
      "message": "Most callers, but especially the important class-loading part, already have a SOA. So it seemed valuable to pass it along.",
      "parentUuid": "39bd5ff7_01f7102e",
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ff1538a_b962b088",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-24T01:44:31Z",
      "side": 1,
      "message": "Just in terms of \"API niceness\" it\u0027s not adding any value. The mutator lock already provides the contract guarantees.",
      "parentUuid": "db987af1_4ce994fe",
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f52c1fda_b20142c2",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-02-23T17:16:48Z",
      "side": 1,
      "message": "Not sure it\u0027s the best API this way. Suggestions welcome.",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 57,
        "endChar": 72
      },
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "324b5077_fcc5b87e",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-23T21:12:17Z",
      "side": 1,
      "message": "nit: this indentation its wrong , \n   \n    x-\u003e\n        y\n\n4 space indentation as usual",
      "range": {
        "startLine": 62,
        "startChar": 2,
        "endLine": 62,
        "endChar": 6
      },
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b5d1f23_74be1c40",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-24T01:44:31Z",
      "side": 1,
      "message": "Why isn\u0027t this a CHECK/DCHECK?",
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5057e5cf_520c40c8",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 81,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-23T21:12:17Z",
      "side": 1,
      "message": "nit: /*out*/",
      "range": {
        "startLine": 81,
        "startChar": 29,
        "endLine": 81,
        "endChar": 30
      },
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b14849d9_42a2dc9c",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 81,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-24T01:44:31Z",
      "side": 1,
      "message": "I would \"break\" when fn returns false. That way it\u0027s modeling the while() idiom.\n\n   while(fn(self, elements)) {\n      ....\n   }\n\nif this function was a macro you would\u0027ve expected to break when the while condition becomes false.\n\nIt reminds me that in multicast event libraries that use the observer pattern -- \"return true\" means continue chaining the event (visiting the event listeners) and \"return false\" means stop and break out early (don\u0027t deliver event to other listeners).",
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5dfe3b26_41301a0f",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-23T21:12:17Z",
      "side": 1,
      "message": "I think if you just have a defaultReturn\u003d{} then it will work for void?",
      "range": {
        "startLine": 96,
        "startChar": 55,
        "endLine": 96,
        "endChar": 68
      },
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f1080ab_f3185323",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-02-24T01:13:49Z",
      "side": 1,
      "message": "Haven\u0027t tried. Would certainly be nice to replace the special case below.",
      "parentUuid": "5dfe3b26_41301a0f",
      "range": {
        "startLine": 96,
        "startChar": 55,
        "endLine": 96,
        "endChar": 68
      },
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e2aca5d_48d3b458",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-24T01:44:31Z",
      "side": 1,
      "message": "Sorry, I forgot to remove this comment. This only works with std::void_t\u003d{} which is C++17 (or you can define your own, not worth it).",
      "parentUuid": "5dfe3b26_41301a0f",
      "range": {
        "startLine": 96,
        "startChar": 55,
        "endLine": 96,
        "endChar": 68
      },
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ed5eacc_bee95c34",
        "filename": "runtime/class_loader_utils.h",
        "patchSetId": 1
      },
      "lineNbr": 138,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2018-02-23T21:12:17Z",
      "side": 1,
      "message": "Could\u0027ve been handled with a ReturnType\u003dstd::void_t in C++17. oh well.",
      "revId": "9efd3a55d5b250d5c026c4c65ccc801a0d50b495",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}