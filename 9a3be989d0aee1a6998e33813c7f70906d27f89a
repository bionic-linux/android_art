{
  "comments": [
    {
      "key": {
        "uuid": "421d051a_df6197e1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-03-03T23:22:22Z",
      "side": 1,
      "message": "Mathieu, Hiroshi, I\u0027d appreciate some context on this. Apparently, having the ArtField and ArtMethod call VisitRoot on their declaring class is fine, but anything else is not.",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 42
      },
      "revId": "9a3be989d0aee1a6998e33813c7f70906d27f89a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "82ea9d1e_2f32004a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2016-03-03T23:57:18Z",
      "side": 1,
      "message": "The way I see this is that a class makes its method/field roots reachable from GC and causes GC to visit them through it. It\u0027s sort of a canonical way for GC to visit methods/fields. This doesn\u0027t mean that GC can\u0027t visit methods/fields through other paths (like the allocation records). And it makes sense because if a class becomes (otherwise) unreachable but its methods are reachable from the allocation records (the allocation site stack traces), the methods makes the class reachable (note that methods/fields have a back pointer to their class) and avoids an incorrect situation like methods are alive but their class isn\u0027t and gets unloaded.\n\nSo, I don\u0027t think this assumption exists.\n\nDo you see a case where visiting methods/fields outside their class causes a problem?",
      "parentUuid": "421d051a_df6197e1",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 42
      },
      "revId": "9a3be989d0aee1a6998e33813c7f70906d27f89a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a220812e_531afc4e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-03-04T09:57:47Z",
      "side": 1,
      "message": "Mathieu: The ProfilingInfo objects are indeed visited twice. Once through the the allocation records (via SemiSpace::MarkRoots), and one through the mark stack (via SemiSpace::MarkReachableObjects).\n\nThe first visit through SemiSpace::MarkRoots moves entries in the ProfilingInfo from the from space to the to space. The second visit crashes because it doesn\u0027t expect a to space entry in the ProfilingInfo.\n\nI\u0027m not sure why it doesn\u0027t happen with the declaring class. I also don\u0027t understand the comment in \"Class::VisitNativeRoots\": \"// Visit roots first in case the declaring class gets moved\", which could be related.",
      "parentUuid": "82ea9d1e_2f32004a",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 42
      },
      "revId": "9a3be989d0aee1a6998e33813c7f70906d27f89a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e27a7932_b031c0ee",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2016-03-04T18:54:12Z",
      "side": 1,
      "message": "Good that this fixes (or avoids) the test failure.\n\nIf this turns out a different issue, I\u0027d prefer moving the profilinginfo visit code back to art_method as that\u0027s what directly points to the profiling info from a code organization point of view.",
      "parentUuid": "a220812e_531afc4e",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 42
      },
      "revId": "9a3be989d0aee1a6998e33813c7f70906d27f89a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4227c598_06de5a54",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-03-07T10:15:59Z",
      "side": 1,
      "message": "I agree. Now that Mathieu landed the GC fix, wer eyou successfull in reverting my changes?",
      "parentUuid": "e27a7932_b031c0ee",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 42
      },
      "revId": "9a3be989d0aee1a6998e33813c7f70906d27f89a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d79c592c_3b46b72e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2016-03-07T19:38:28Z",
      "side": 1,
      "message": "I haven\u0027t tried reverting yet.",
      "parentUuid": "4227c598_06de5a54",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 13,
        "endChar": 42
      },
      "revId": "9a3be989d0aee1a6998e33813c7f70906d27f89a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}