{
  "comments": [
    {
      "key": {
        "uuid": "fb77a30c_55079625",
        "filename": "runtime/thread-inl.h",
        "patchSetId": 3
      },
      "lineNbr": 227,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2016-08-17T22:47:50Z",
      "side": 1,
      "message": "Having this here doesn\u0027t seem safe because the GC thread flip may see the thread here and waits for a thread flip function to be called by the thread but the thread could get suspended again after this Locks::thread_suspend_count_lock_ critical section and block again, in which case the GC thread flip will wait for it for too long and cause timeouts, etc.",
      "range": {
        "startLine": 227,
        "startChar": 6,
        "endLine": 227,
        "endChar": 35
      },
      "revId": "efa0cbd5a58985a7c3ab73f1980d5fcaa928e47c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bb7c4b2e_0f6a2915",
        "filename": "runtime/thread-inl.h",
        "patchSetId": 3
      },
      "lineNbr": 227,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2016-08-18T00:25:18Z",
      "side": 1,
      "message": "Actually never mind. This delay risk already exists for the thread suspended at a normal suspend point (FullSuspendCheck) at low probability.",
      "parentUuid": "fb77a30c_55079625",
      "range": {
        "startLine": 227,
        "startChar": 6,
        "endLine": 227,
        "endChar": 35
      },
      "revId": "efa0cbd5a58985a7c3ab73f1980d5fcaa928e47c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fb77a30c_959cae09",
        "filename": "runtime/thread_list.cc",
        "patchSetId": 3
      },
      "lineNbr": 438,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2016-08-17T22:47:50Z",
      "side": 1,
      "message": "Given how kSuspended is currently used in many places, it doesn\u0027t look like a good idea to use it to detect a situation where the thread is just suspended for a thread flip and will go back to kRunnable soon after (without suspending all threads or going into to a GC critical section).",
      "range": {
        "startLine": 438,
        "startChar": 19,
        "endLine": 438,
        "endChar": 29
      },
      "revId": "efa0cbd5a58985a7c3ab73f1980d5fcaa928e47c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bb7c4b2e_2f40458f",
        "filename": "runtime/thread_list.cc",
        "patchSetId": 3
      },
      "lineNbr": 438,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2016-08-18T17:45:57Z",
      "side": 1,
      "message": "A fix is drop the kSuspended check because IsTransitioningToRunnable() will return true for the suspend in FullSuspendCheck() as well.",
      "parentUuid": "fb77a30c_959cae09",
      "range": {
        "startLine": 438,
        "startChar": 19,
        "endLine": 438,
        "endChar": 29
      },
      "revId": "efa0cbd5a58985a7c3ab73f1980d5fcaa928e47c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}