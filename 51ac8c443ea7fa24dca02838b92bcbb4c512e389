{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9be2d75f_854e2baa",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1889741
      },
      "writtenOn": "2023-02-10T16:55:16Z",
      "side": 1,
      "message": "https://cs.android.com/search?q\u003d%22Thread::Current()%22%20filepath:reference_type_propagation.cc\u0026ss\u003dandroid%2Fplatform%2Fsuperproject for many examples.",
      "range": {
        "startLine": 10,
        "startChar": 25,
        "endLine": 10,
        "endChar": 44
      },
      "revId": "51ac8c443ea7fa24dca02838b92bcbb4c512e389",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e7f4bb1_5c8ffa8c",
        "filename": "compiler/optimizing/reference_type_propagation.cc",
        "patchSetId": 1
      },
      "lineNbr": 340,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2023-02-10T16:59:59Z",
      "side": 1,
      "message": "Ugh, then shouldn\u0027t we remove the ReferenceTypePropagation gtests instead?",
      "range": {
        "startLine": 336,
        "startChar": 0,
        "endLine": 340,
        "endChar": 3
      },
      "revId": "51ac8c443ea7fa24dca02838b92bcbb4c512e389",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "94a8ffd1_81e0a307",
        "filename": "compiler/optimizing/reference_type_propagation.cc",
        "patchSetId": 1
      },
      "lineNbr": 340,
      "author": {
        "id": 1889741
      },
      "writtenOn": "2023-02-10T17:03:38Z",
      "side": 1,
      "message": "Those tests are passing since they don\u0027t go through `ReferenceTypePropagation::Run` so they can remain.\n\nThis comment is about the other gtests which go through the SSA builder which runs ReferenceTypePropagation and may encounter crashes when dealing with `Thread::Current()`. We weren\u0027t hitting those paths before but we will for sure if we land aosp/2427479 which is a fix for a crash.",
      "parentUuid": "4e7f4bb1_5c8ffa8c",
      "range": {
        "startLine": 336,
        "startChar": 0,
        "endLine": 340,
        "endChar": 3
      },
      "revId": "51ac8c443ea7fa24dca02838b92bcbb4c512e389",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9a9ba337_178de3c0",
        "filename": "compiler/optimizing/reference_type_propagation.cc",
        "patchSetId": 1
      },
      "lineNbr": 340,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2023-02-10T17:06:06Z",
      "side": 1,
      "message": "I think we should just create a runtime them in those tests. It\u0027s odd to accomodate gtests at this level.",
      "parentUuid": "94a8ffd1_81e0a307",
      "range": {
        "startLine": 336,
        "startChar": 0,
        "endLine": 340,
        "endChar": 3
      },
      "revId": "51ac8c443ea7fa24dca02838b92bcbb4c512e389",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b2f27ac_e7c5de9b",
        "filename": "compiler/optimizing/reference_type_propagation.cc",
        "patchSetId": 1
      },
      "lineNbr": 340,
      "author": {
        "id": 1889741
      },
      "writtenOn": "2023-02-10T17:08:58Z",
      "side": 1,
      "message": "Double checking I misspoke: The reason that the ReferenceTypePropagation gtests are passing is because they create a runtime. Other tests, e.g. ConstantFoldingTest do not and can crash. Do you think we should create a runtime in those too?",
      "parentUuid": "94a8ffd1_81e0a307",
      "range": {
        "startLine": 336,
        "startChar": 0,
        "endLine": 340,
        "endChar": 3
      },
      "revId": "51ac8c443ea7fa24dca02838b92bcbb4c512e389",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "784b37ab_1626c8ab",
        "filename": "compiler/optimizing/reference_type_propagation.cc",
        "patchSetId": 1
      },
      "lineNbr": 340,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2023-02-10T17:12:52Z",
      "side": 1,
      "message": "Yeah, if our passes depend on having a runtime. It\u0027s a shame if we do though, because testing the compiler standalone is simpler and nicer.",
      "parentUuid": "9b2f27ac_e7c5de9b",
      "range": {
        "startLine": 336,
        "startChar": 0,
        "endLine": 340,
        "endChar": 3
      },
      "revId": "51ac8c443ea7fa24dca02838b92bcbb4c512e389",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}