{
  "comments": [
    {
      "key": {
        "uuid": "dfb999d9_b9937f61",
        "filename": "compiler/dex/compiler_enums.h",
        "patchSetId": 4
      },
      "lineNbr": 327,
      "author": {
        "id": 1013855
      },
      "writtenOn": "2014-12-01T15:49:19Z",
      "side": 0,
      "message": "Vladimir,\n\nWe would like if you can keep this and all BE logic associated with this flag. We want the suspend check semantic to be completely expressible through the graph (instead of using side structures). We also want it expressible at the ME level (which is done now too but too late for us). Now let me explain why:\n\nSo by design, it was decided that all branching instructions would be overloaded to express suspend check semantics. This is way too conservative but it was done in absence of having a separate suspend check instruction. As per specifications from Ian, all \"safepoints\" must be safe interaction points with interpreter and runtime. For that reason, we do not allow code motion across these points. However, since we have a loop framework, we accurately identify back edges.\n\nSo at the ME level, we now rely on this flag to determine whether we will have runtime interaction on branches. Since we do things at instruction level and at ME level, we really need this functionality to be left in. Your new logic can still work while leaving this in. We need this flag for compatibility. Hopefully, this is okay for you guys.",
      "range": {
        "startLine": 327,
        "startChar": 2,
        "endLine": 327,
        "endChar": 24
      },
      "revId": "7ab2fce83cd72c0963128b098a78606e77ea15d5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ff82dd17_cdecddd0",
        "filename": "compiler/dex/compiler_enums.h",
        "patchSetId": 4
      },
      "lineNbr": 327,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2014-12-01T18:02:29Z",
      "side": 0,
      "message": "Do you want me to insert artificial GOTO insn on fall-through to loop heads without if-cc/z? (Its only purpose would be to hold the MIR_IGNORE_SUSPEND_CHECK.)",
      "parentUuid": "dfb999d9_b9937f61",
      "range": {
        "startLine": 327,
        "startChar": 2,
        "endLine": 327,
        "endChar": 24
      },
      "revId": "7ab2fce83cd72c0963128b098a78606e77ea15d5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dfb999d9_39c12f10",
        "filename": "compiler/dex/compiler_enums.h",
        "patchSetId": 4
      },
      "lineNbr": 327,
      "author": {
        "id": 1013855
      },
      "writtenOn": "2014-12-01T19:14:02Z",
      "side": 0,
      "message": "Nope. No need to insert any new instructions. The whole point is that on instructions that already exist, we already overload the meaning to represent the suspend check semantics. If those instructions are kept, we want to make sure that they are clearly marked when they do not represent this double meaning.",
      "parentUuid": "ff82dd17_cdecddd0",
      "range": {
        "startLine": 327,
        "startChar": 2,
        "endLine": 327,
        "endChar": 24
      },
      "revId": "7ab2fce83cd72c0963128b098a78606e77ea15d5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f8a0930_50e092de",
        "filename": "compiler/dex/compiler_enums.h",
        "patchSetId": 4
      },
      "lineNbr": 327,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2014-12-01T19:18:03Z",
      "side": 0,
      "message": "But any code that needs to know about suspend points presumably wants to know about the new fall-through case.",
      "parentUuid": "dfb999d9_39c12f10",
      "range": {
        "startLine": 327,
        "startChar": 2,
        "endLine": 327,
        "endChar": 24
      },
      "revId": "7ab2fce83cd72c0963128b098a78606e77ea15d5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bfaea591_dbc3c7c1",
        "filename": "compiler/dex/compiler_enums.h",
        "patchSetId": 4
      },
      "lineNbr": 327,
      "author": {
        "id": 1013855
      },
      "writtenOn": "2014-12-01T19:28:03Z",
      "side": 0,
      "message": "I get what you mean - you are worried about back-edges that are gotos. Yes, please do what you said because you are right :)",
      "parentUuid": "5f8a0930_50e092de",
      "range": {
        "startLine": 327,
        "startChar": 2,
        "endLine": 327,
        "endChar": 24
      },
      "revId": "7ab2fce83cd72c0963128b098a78606e77ea15d5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}