{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "4a3f6d40_f59d8aee",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-31T00:54:15Z",
      "side": 1,
      "message": "go/android-ndk-api-guidelines#opaque-structs\n\nI think the fact that you have now needed to modify this is a good argument against this being a candidate for non-opaque.",
      "revId": "a3e0cbc216a224d15306d5608e7237276886d74d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3fec5098_cc4450b9",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T18:41:27Z",
      "side": 1,
      "message": "As it is returned by pointer (rather then by value) means we can freely extend the struct.\n\nNote that adding fields at the end is backwards compatible.\n\nI am reluctant to add explicit accessors per field.  But due to complexity and a lot of extra code on hot-path for the consumers.\n\nWe follow the opaque rule for ExtDexFile as it makes sense there.",
      "parentUuid": "4a3f6d40_f59d8aee",
      "revId": "a3e0cbc216a224d15306d5608e7237276886d74d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fb432054_405a6699",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-31T22:26:51Z",
      "side": 1,
      "message": "You\u0027re still sensitive to alignment and padding changes, and callers can mistakenly use this struct in an array which will be broken. For APIs that are immortal the stability of those APIs across releases is extremely important.\n\nIs accessing any of this really a hot path? I have no context for how this API is used; all I have is what\u0027s in the review.\n\nThis does not fit the exception that\u0027s allowed by the API guidelines. If other classes of exceptions need to be added then we\u0027ll need to start that discussion with the rest of the API council.\n\nOr maybe you don\u0027t even want a system API here? Couldn\u0027t this just be a library separate from the OS? If you do that you don\u0027t even have to care about C or any other type of compatibility beyond what you *choose* to guarantee to your users.",
      "parentUuid": "3fec5098_cc4450b9",
      "revId": "a3e0cbc216a224d15306d5608e7237276886d74d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "23f86c37_05b2f51b",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 6
      },
      "lineNbr": 73,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-31T00:54:15Z",
      "side": 1,
      "message": "WithMethodAtOffset? The \"Get\" naming is odd since it\u0027s not actually returning a ExtDexFileMethodInfo",
      "range": {
        "startLine": 73,
        "startChar": 9,
        "endLine": 73,
        "endChar": 42
      },
      "revId": "a3e0cbc216a224d15306d5608e7237276886d74d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3666bdf0_5fec51a1",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 6
      },
      "lineNbr": 73,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T18:41:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "23f86c37_05b2f51b",
      "range": {
        "startLine": 73,
        "startChar": 9,
        "endLine": 73,
        "endChar": 42
      },
      "revId": "a3e0cbc216a224d15306d5608e7237276886d74d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a4badcc_36364594",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 6
      },
      "lineNbr": 81,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-31T00:54:15Z",
      "side": 1,
      "message": "Similarly, ForEachMethod?",
      "range": {
        "startLine": 81,
        "startChar": 9,
        "endLine": 81,
        "endChar": 37
      },
      "revId": "a3e0cbc216a224d15306d5608e7237276886d74d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "28c31ab0_95d71d72",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 6
      },
      "lineNbr": 81,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T18:41:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4a4badcc_36364594",
      "range": {
        "startLine": 81,
        "startChar": 9,
        "endLine": 81,
        "endChar": 37
      },
      "revId": "a3e0cbc216a224d15306d5608e7237276886d74d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c907f97_9c3ac144",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 6
      },
      "lineNbr": 89,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2021-03-31T00:54:15Z",
      "side": 1,
      "message": "Needs *some* documentation. In this case not much to say other than \"returns nullptr for unrecognized errors\", but say that.",
      "revId": "a3e0cbc216a224d15306d5608e7237276886d74d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e9867f1e_6f6788db",
        "filename": "libdexfile/external/include/art_api/dex_file_external.h",
        "patchSetId": 6
      },
      "lineNbr": 89,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2021-03-31T19:52:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3c907f97_9c3ac144",
      "revId": "a3e0cbc216a224d15306d5608e7237276886d74d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}