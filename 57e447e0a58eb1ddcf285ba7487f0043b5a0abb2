{
  "comments": [
    {
      "key": {
        "uuid": "b3683fae_f3efed7b",
        "filename": "compiler/optimizing/stack_map_test.cc",
        "patchSetId": 6
      },
      "lineNbr": 802,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-27T17:35:18Z",
      "side": 1,
      "message": "This tests that the tables are _not_ deduped?",
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "54bfeb6c_d41702b7",
        "filename": "compiler/optimizing/stack_map_test.cc",
        "patchSetId": 6
      },
      "lineNbr": 802,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-07-27T18:14:06Z",
      "side": 1,
      "message": "It tests the size is less the double (i.e. at least some deduping).\n\nLT would be better but I thought expected should be on the left.",
      "parentUuid": "b3683fae_f3efed7b",
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f67fc635_6121fe4a",
        "filename": "compiler/optimizing/stack_map_test.cc",
        "patchSetId": 6
      },
      "lineNbr": 802,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-30T14:41:29Z",
      "side": 1,
      "message": "ACK. I misread that as ASSERT_EQ.",
      "parentUuid": "54bfeb6c_d41702b7",
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "81a47c6e_bfbcf55c",
        "filename": "dex2oat/linker/oat_writer.cc",
        "patchSetId": 6
      },
      "lineNbr": 1464,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-27T17:35:18Z",
      "side": 1,
      "message": "Add a comment that we are deduplicating the inner tables here.",
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd98bc8e_717d3630",
        "filename": "dex2oat/linker/oat_writer.cc",
        "patchSetId": 6
      },
      "lineNbr": 1464,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-07-31T16:17:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "81a47c6e_bfbcf55c",
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "223d2deb_1323a483",
        "filename": "dex2oat/linker/oat_writer.cc",
        "patchSetId": 6
      },
      "lineNbr": 1466,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-27T17:35:18Z",
      "side": 1,
      "message": "Can we get back to SafeMap\u003c\u003e::GetOrCreate(), please?",
      "range": {
        "startLine": 1466,
        "startChar": 37,
        "endLine": 1466,
        "endChar": 44
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eee90b5a_556d5821",
        "filename": "dex2oat/linker/oat_writer.cc",
        "patchSetId": 6
      },
      "lineNbr": 1466,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-07-31T16:17:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "223d2deb_1323a483",
      "range": {
        "startLine": 1466,
        "startChar": 37,
        "endLine": 1466,
        "endChar": 44
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b8ecc971_025d44b7",
        "filename": "dex2oat/linker/oat_writer.cc",
        "patchSetId": 6
      },
      "lineNbr": 1493,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-27T17:35:18Z",
      "side": 1,
      "message": "Update the comment; it is deduplicated as entire StackMap without deduplication of inner tables.",
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f108476a_feeab212",
        "filename": "dex2oat/linker/oat_writer.cc",
        "patchSetId": 6
      },
      "lineNbr": 1493,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-07-31T16:17:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b8ecc971_025d44b7",
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b9202604_9e984b78",
        "filename": "libartbase/base/bit_memory_region.h",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-27T17:35:18Z",
      "side": 1,
      "message": "/* bit_start */",
      "range": {
        "startLine": 57,
        "startChar": 39,
        "endLine": 57,
        "endChar": 40
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9c561fd_84895c68",
        "filename": "libartbase/base/bit_memory_region.h",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-07-31T16:17:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b9202604_9e984b78",
      "range": {
        "startLine": 57,
        "startChar": 39,
        "endLine": 57,
        "endChar": 40
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "44eb1cc6_e5b69910",
        "filename": "libartbase/base/bit_memory_region.h",
        "patchSetId": 6
      },
      "lineNbr": 202,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-27T17:35:18Z",
      "side": 1,
      "message": "/* bit_start */",
      "range": {
        "startLine": 202,
        "startChar": 68,
        "endLine": 202,
        "endChar": 69
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aca27128_2be87cfb",
        "filename": "libartbase/base/bit_memory_region.h",
        "patchSetId": 6
      },
      "lineNbr": 202,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-27T17:35:18Z",
      "side": 1,
      "message": "You do not need to spell out the BitMemoryRegion here.",
      "range": {
        "startLine": 202,
        "startChar": 25,
        "endLine": 202,
        "endChar": 40
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "396edd65_78fd3bee",
        "filename": "libartbase/base/bit_memory_region.h",
        "patchSetId": 6
      },
      "lineNbr": 202,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-07-31T16:17:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aca27128_2be87cfb",
      "range": {
        "startLine": 202,
        "startChar": 25,
        "endLine": 202,
        "endChar": 40
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "abe5cb8e_fb46a936",
        "filename": "libartbase/base/bit_memory_region.h",
        "patchSetId": 6
      },
      "lineNbr": 202,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-07-31T16:17:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "44eb1cc6_e5b69910",
      "range": {
        "startLine": 202,
        "startChar": 68,
        "endLine": 202,
        "endChar": 69
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ba1ae3c_ace254d5",
        "filename": "libartbase/base/bit_memory_region.h",
        "patchSetId": 6
      },
      "lineNbr": 248,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-27T17:35:18Z",
      "side": 1,
      "message": "DCHECK_LE(bit_length, std::numeric_limits\u003csize_t\u003e::max() - bit_offset_);",
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed0397d2_6c0fc0e1",
        "filename": "libartbase/base/bit_memory_region.h",
        "patchSetId": 6
      },
      "lineNbr": 248,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-07-31T16:17:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1ba1ae3c_ace254d5",
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "afe96510_4be2b25f",
        "filename": "runtime/stack_map.cc",
        "patchSetId": 6
      },
      "lineNbr": 44,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-27T17:35:18Z",
      "side": 1,
      "message": "What about\n\n  uint32_t bit_offset \u003d current_bit_offset - DecodeVarintBits(reader);\n  BitMemoryReader reader2(data, /* bit_start */ 0, bit_offset);\n\n?",
      "range": {
        "startLine": 41,
        "startChar": 4,
        "endLine": 44,
        "endChar": 89
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3b97e4e_3a63c7ba",
        "filename": "runtime/stack_map.cc",
        "patchSetId": 6
      },
      "lineNbr": 44,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-07-27T18:14:06Z",
      "side": 1,
      "message": "In that case bit_offset would be negative.\nI did consider adding support to negative bit_offset as parameters.\nDo you want me to do that?",
      "parentUuid": "afe96510_4be2b25f",
      "range": {
        "startLine": 41,
        "startChar": 4,
        "endLine": 44,
        "endChar": 89
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7be8d058_5564924f",
        "filename": "runtime/stack_map.cc",
        "patchSetId": 6
      },
      "lineNbr": 44,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-30T14:41:29Z",
      "side": 1,
      "message": "OK, let\u0027s keep the code as is but add a comment about where the \"data\" points.",
      "parentUuid": "a3b97e4e_3a63c7ba",
      "range": {
        "startLine": 41,
        "startChar": 4,
        "endLine": 44,
        "endChar": 89
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "60c9425a_b5a8997f",
        "filename": "runtime/stack_map.cc",
        "patchSetId": 6
      },
      "lineNbr": 44,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-07-31T16:17:59Z",
      "side": 1,
      "message": "Done.\n\nI find this messy, but I will try to do the cleanup in followup CL.",
      "parentUuid": "a3b97e4e_3a63c7ba",
      "range": {
        "startLine": 41,
        "startChar": 4,
        "endLine": 44,
        "endChar": 89
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca162701_53eed14d",
        "filename": "runtime/stack_map.cc",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-27T17:35:18Z",
      "side": 1,
      "message": "We usually try to avoid the weird semantics of the std::map\u003c\u003e::operator[](). Use SafeMap\u003c\u003e::GetOrCreate() instead.",
      "range": {
        "startLine": 79,
        "startChar": 31,
        "endLine": 79,
        "endChar": 49
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf2e5532_8eaf991b",
        "filename": "runtime/stack_map.cc",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-07-31T16:17:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ca162701_53eed14d",
      "range": {
        "startLine": 79,
        "startChar": 31,
        "endLine": 79,
        "endChar": 49
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b70c9651_94df5557",
        "filename": "runtime/stack_map.h",
        "patchSetId": 6
      },
      "lineNbr": 427,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-27T17:35:18Z",
      "side": 1,
      "message": "/*inout*/DedupeMap*",
      "range": {
        "startLine": 427,
        "startChar": 69,
        "endLine": 427,
        "endChar": 79
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a97c4c1_65950b06",
        "filename": "runtime/stack_map.h",
        "patchSetId": 6
      },
      "lineNbr": 427,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-07-27T18:14:06Z",
      "side": 1,
      "message": "I agree with pointer.\nIt does not feel like \"inout\" though - it does no replace the object.",
      "parentUuid": "b70c9651_94df5557",
      "range": {
        "startLine": 427,
        "startChar": 69,
        "endLine": 427,
        "endChar": 79
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c51dd489_8e022cc0",
        "filename": "runtime/stack_map.h",
        "patchSetId": 6
      },
      "lineNbr": 427,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-07-30T14:41:29Z",
      "side": 1,
      "message": "It\u0027s using the dedupe_map for lookup (in) and for storing new mappings (out).",
      "parentUuid": "8a97c4c1_65950b06",
      "range": {
        "startLine": 427,
        "startChar": 69,
        "endLine": 427,
        "endChar": 79
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2a11ae6_6376fee2",
        "filename": "runtime/stack_map.h",
        "patchSetId": 6
      },
      "lineNbr": 427,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-07-31T16:17:59Z",
      "side": 1,
      "message": "I would say:\n/* inout */ int* counter - if it both reads and updates the value.\nBut not:\n/* inout */ Runtime* runtime - it both reads some fields, and updates some other state.",
      "parentUuid": "c51dd489_8e022cc0",
      "range": {
        "startLine": 427,
        "startChar": 69,
        "endLine": 427,
        "endChar": 79
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "046f75aa_3c7f049d",
        "filename": "runtime/stack_map.h",
        "patchSetId": 6
      },
      "lineNbr": 427,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2018-08-01T09:20:55Z",
      "side": 1,
      "message": "I consider a map much closer to `int` than `Runtime`. It holds and owns some values.\n\nBut why don\u0027t we just create a DedupeHelper that holds the map internally and has a member function Dedupe()?",
      "parentUuid": "f2a11ae6_6376fee2",
      "range": {
        "startLine": 427,
        "startChar": 69,
        "endLine": 427,
        "endChar": 79
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06f76331_8ffdfaee",
        "filename": "runtime/stack_map.h",
        "patchSetId": 6
      },
      "lineNbr": 427,
      "author": {
        "id": 1065473
      },
      "writtenOn": "2018-08-01T11:50:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "046f75aa_3c7f049d",
      "range": {
        "startLine": 427,
        "startChar": 69,
        "endLine": 427,
        "endChar": 79
      },
      "revId": "57e447e0a58eb1ddcf285ba7487f0043b5a0abb2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}