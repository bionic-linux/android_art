{
  "comments": [
    {
      "key": {
        "uuid": "9033a6f4_82376311",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 12,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2015-04-14T01:16:09Z",
      "side": 1,
      "message": "Buffering means cost of copying the pointers (to the roots), which in theory could negate the benefit of reduced dispatch overhead? But the measurement does not indicate an issue. Care might need to be taken though.",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 62
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9033a6f4_980b525d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 12,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-14T03:10:49Z",
      "side": 1,
      "message": "The buffering is only used in some places, I have ideas of how we could use it for thread roots but it requires some changes to shadow frame layout.",
      "parentUuid": "9033a6f4_82376311",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 62
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6394aac1_5e62d1be",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 6
      },
      "lineNbr": 917,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-04-10T12:59:47Z",
      "side": 1,
      "message": "Maybe add a kConstant for this?",
      "range": {
        "startLine": 917,
        "startChar": 24,
        "endLine": 917,
        "endChar": 27
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3214287_6848bbb7",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 6
      },
      "lineNbr": 917,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-11T00:19:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6394aac1_5e62d1be",
      "range": {
        "startLine": 917,
        "startChar": 24,
        "endLine": 917,
        "endChar": 27
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0242aae_cfd34b52",
        "filename": "runtime/gc/collector/concurrent_copying.cc",
        "patchSetId": 6
      },
      "lineNbr": 517,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2015-04-14T01:16:09Z",
      "side": 1,
      "message": "Here, it\u0027s ok to just have the ref (the content of the root) instead of the pointer to the root. But is there a reason not to make SingleRootVisitor get the latter? Why restrict SingleRootVisitor this way?",
      "range": {
        "startLine": 517,
        "startChar": 17,
        "endLine": 517,
        "endChar": 37
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0242aae_15fcc6b0",
        "filename": "runtime/gc/collector/concurrent_copying.cc",
        "patchSetId": 6
      },
      "lineNbr": 517,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-14T03:10:49Z",
      "side": 1,
      "message": "It was just for convenience, I am open to changing it, but I think anything that modifies roots probably wants the buffered implementation which should be faster.",
      "parentUuid": "b0242aae_cfd34b52",
      "range": {
        "startLine": 517,
        "startChar": 17,
        "endLine": 517,
        "endChar": 37
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0242aae_afea3fa3",
        "filename": "runtime/gc/collector/mark_sweep.cc",
        "patchSetId": 6
      },
      "lineNbr": 498,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2015-04-14T01:16:09Z",
      "side": 1,
      "message": "If this is the only VerifyRoot call site, could it be merged/inlined here?",
      "range": {
        "startLine": 498,
        "startChar": 16,
        "endLine": 498,
        "endChar": 26
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0242aae_35f462d1",
        "filename": "runtime/gc/collector/mark_sweep.cc",
        "patchSetId": 6
      },
      "lineNbr": 498,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-14T03:10:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0242aae_afea3fa3",
      "range": {
        "startLine": 498,
        "startChar": 16,
        "endLine": 498,
        "endChar": 26
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0242aae_0f0cb3ee",
        "filename": "runtime/gc_root-inl.h",
        "patchSetId": 6
      },
      "lineNbr": 32,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2015-04-14T01:16:09Z",
      "side": 1,
      "message": "Can this be MirrorType instead Object (and the down_cast can be removed)?",
      "range": {
        "startLine": 32,
        "startChar": 34,
        "endLine": 32,
        "endChar": 48
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0242aae_75daea66",
        "filename": "runtime/gc_root-inl.h",
        "patchSetId": 6
      },
      "lineNbr": 32,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-14T03:10:49Z",
      "side": 1,
      "message": "Same comment as other file, I think that causes strict aliasing problems.",
      "parentUuid": "b0242aae_0f0cb3ee",
      "range": {
        "startLine": 32,
        "startChar": 34,
        "endLine": 32,
        "endChar": 48
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0242aae_8f47830f",
        "filename": "runtime/gc_root-inl.h",
        "patchSetId": 6
      },
      "lineNbr": 36,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2015-04-14T01:16:09Z",
      "side": 1,
      "message": "Here too",
      "range": {
        "startLine": 36,
        "startChar": 40,
        "endLine": 36,
        "endChar": 54
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9033a6f4_f8f016de",
        "filename": "runtime/gc_root-inl.h",
        "patchSetId": 6
      },
      "lineNbr": 36,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-14T03:10:49Z",
      "side": 1,
      "message": "Same",
      "parentUuid": "b0242aae_8f47830f",
      "range": {
        "startLine": 36,
        "startChar": 40,
        "endLine": 36,
        "endChar": 54
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e3617abc_5a83b105",
        "filename": "runtime/gc_root.h",
        "patchSetId": 6
      },
      "lineNbr": 50,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-04-10T12:59:47Z",
      "side": 1,
      "message": "tid -\u003e thraed_id_\nroot_type -\u003e type_",
      "range": {
        "startLine": 50,
        "startChar": 23,
        "endLine": 50,
        "endChar": 41
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c326369c_8f941d46",
        "filename": "runtime/gc_root.h",
        "patchSetId": 6
      },
      "lineNbr": 50,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-11T00:19:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e3617abc_5a83b105",
      "range": {
        "startLine": 50,
        "startChar": 23,
        "endLine": 50,
        "endChar": 41
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6394aac1_1e412917",
        "filename": "runtime/gc_root.h",
        "patchSetId": 6
      },
      "lineNbr": 89,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-04-10T12:59:47Z",
      "side": 1,
      "message": "Same comment as line 84?",
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e32fba6e_8dab4586",
        "filename": "runtime/gc_root.h",
        "patchSetId": 6
      },
      "lineNbr": 89,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-11T00:19:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6394aac1_1e412917",
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9033a6f4_a27c9f6f",
        "filename": "runtime/gc_root.h",
        "patchSetId": 6
      },
      "lineNbr": 124,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2015-04-14T01:16:09Z",
      "side": 1,
      "message": "I mentioned this earlier, but could this be mirror::Object** root. It seems a root visitor should be able to update the root.",
      "range": {
        "startLine": 124,
        "startChar": 25,
        "endLine": 124,
        "endChar": 45
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0242aae_cae45953",
        "filename": "runtime/gc_root.h",
        "patchSetId": 6
      },
      "lineNbr": 124,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-14T03:10:49Z",
      "side": 1,
      "message": "Single root visitor is only used for when the root isn\u0027t updated currently, is that OK?",
      "parentUuid": "9033a6f4_a27c9f6f",
      "range": {
        "startLine": 124,
        "startChar": 25,
        "endLine": 124,
        "endChar": 45
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9033a6f4_a2281f05",
        "filename": "runtime/gc_root.h",
        "patchSetId": 6
      },
      "lineNbr": 160,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2015-04-14T01:16:09Z",
      "side": 1,
      "message": "Can this be MirrorType?",
      "range": {
        "startLine": 160,
        "startChar": 38,
        "endLine": 160,
        "endChar": 52
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9033a6f4_7dd898a5",
        "filename": "runtime/gc_root.h",
        "patchSetId": 6
      },
      "lineNbr": 160,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-14T03:10:49Z",
      "side": 1,
      "message": "I think the problem with doing that is that casting a mirror::CompressedReference\u003cMirrorType\u003e* to mirror::CompressedReference\u003cmirror::Object\u003e* breaks strict aliasing requirements.",
      "parentUuid": "9033a6f4_a2281f05",
      "range": {
        "startLine": 160,
        "startChar": 38,
        "endLine": 160,
        "endChar": 52
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6394aac1_9ec9b92c",
        "filename": "runtime/handle.h",
        "patchSetId": 6
      },
      "lineNbr": 74,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-04-10T12:59:47Z",
      "side": 1,
      "message": "Inconsistent with other uses that seem to be first thing at declaration?",
      "range": {
        "startLine": 74,
        "startChar": 6,
        "endLine": 74,
        "endChar": 19
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e32fba6e_ed45a174",
        "filename": "runtime/handle.h",
        "patchSetId": 6
      },
      "lineNbr": 74,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-11T00:19:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6394aac1_9ec9b92c",
      "range": {
        "startLine": 74,
        "startChar": 6,
        "endLine": 74,
        "endChar": 19
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a38a229d_2093242b",
        "filename": "runtime/instrumentation.cc",
        "patchSetId": 6
      },
      "lineNbr": 1085,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-04-10T12:59:47Z",
      "side": 1,
      "message": "kConstant? And share it with the other 128 use?",
      "range": {
        "startLine": 1085,
        "startChar": 22,
        "endLine": 1085,
        "endChar": 25
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c326369c_0f5bcd59",
        "filename": "runtime/instrumentation.cc",
        "patchSetId": 6
      },
      "lineNbr": 1085,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-11T00:19:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a38a229d_2093242b",
      "range": {
        "startLine": 1085,
        "startChar": 22,
        "endLine": 1085,
        "endChar": 25
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e3617abc_9a1aa96f",
        "filename": "runtime/mirror/object_reference.h",
        "patchSetId": 6
      },
      "lineNbr": 94,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-04-10T12:59:47Z",
      "side": 1,
      "message": "StackReference",
      "range": {
        "startLine": 94,
        "startChar": 63,
        "endLine": 94,
        "endChar": 76
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3214287_489dbfb0",
        "filename": "runtime/mirror/object_reference.h",
        "patchSetId": 6
      },
      "lineNbr": 94,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-11T00:19:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e3617abc_9a1aa96f",
      "range": {
        "startLine": 94,
        "startChar": 63,
        "endLine": 94,
        "endChar": 76
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a38a229d_808a38e6",
        "filename": "runtime/native/dalvik_system_VMRuntime.cc",
        "patchSetId": 6
      },
      "lineNbr": 254,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-04-10T12:59:47Z",
      "side": 1,
      "message": "Remove new line?",
      "range": {
        "startLine": 254,
        "startChar": 2,
        "endLine": 254,
        "endChar": 3
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c326369c_cf67f51f",
        "filename": "runtime/native/dalvik_system_VMRuntime.cc",
        "patchSetId": 6
      },
      "lineNbr": 254,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-11T00:19:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a38a229d_808a38e6",
      "range": {
        "startLine": 254,
        "startChar": 2,
        "endLine": 254,
        "endChar": 3
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6394aac1_ded341da",
        "filename": "runtime/reference_table.cc",
        "patchSetId": 6
      },
      "lineNbr": 241,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2015-04-10T12:59:47Z",
      "side": 1,
      "message": "kConstant?",
      "range": {
        "startLine": 241,
        "startChar": 22,
        "endLine": 241,
        "endChar": 25
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c326369c_2f2249cf",
        "filename": "runtime/reference_table.cc",
        "patchSetId": 6
      },
      "lineNbr": 241,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-11T00:19:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6394aac1_ded341da",
      "range": {
        "startLine": 241,
        "startChar": 22,
        "endLine": 241,
        "endChar": 25
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0299e86_ba8726a9",
        "filename": "runtime/stack.h",
        "patchSetId": 6
      },
      "lineNbr": 62,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2015-04-14T01:16:09Z",
      "side": 1,
      "message": "Mostly StackReference \u003d\u003d CompressedReference. Maybe worth keeping StackReference for documenting purpose?",
      "range": {
        "startLine": 62,
        "startChar": 14,
        "endLine": 62,
        "endChar": 28
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9033a6f4_dd354c55",
        "filename": "runtime/stack.h",
        "patchSetId": 6
      },
      "lineNbr": 62,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2015-04-14T03:10:49Z",
      "side": 1,
      "message": "What do you mean keep? I kept it as a typedef. We cast StackReference* to CompressedReference* in a few places.",
      "parentUuid": "d0299e86_ba8726a9",
      "range": {
        "startLine": 62,
        "startChar": 14,
        "endLine": 62,
        "endChar": 28
      },
      "revId": "bb87e0f1a52de656bc77cb01cb887e51a0e5198b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}