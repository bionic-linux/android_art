{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6b0f4bfe_605b24a6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-04-05T17:14:41Z",
      "side": 1,
      "message": "This isn\u0027t clear to me. I agree for situations where a larger number of files are dexopted in a batch operation. However e.g. on package install only a few dex files get compiled, right?\n\nI reason like this: With a concurrency of 4 the first 4 dex2oat runs will be scheduled at the same time, and that\u0027s probably worse than running them one by one because of more I/O and memory bandwidth in parallel and higher memory footprint. The benefit comes later when dex2oat runs of different lengths have gotten the shutdown/startup periods out of sync between the CPUs. I\u0027d think that\u0027s getting likely to happen only after 8-10 runs.\n\nThat\u0027s of course just speculation, but it means the change isn\u0027t obviously beneficial. Do you have measurements?\n\nOtherwise I think this justifies extending it to boot reasons, but not package install.",
      "range": {
        "startLine": 10,
        "startChar": 32,
        "endLine": 11,
        "endChar": 33
      },
      "revId": "a3b3eb2081c3839cacd946d5d43ffd5cfeffbc49",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3031e6ba_c662a84a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-04-05T18:19:44Z",
      "side": 1,
      "message": "We discussed this f2f a few week ago and I showed you the local experiment results got from a Pixel device. With concurrency 1, `first-boot` took 12s; with concurrency 2, `first-boot` took 10s; with concurrency 4, `first-boot` took 8s.",
      "parentUuid": "6b0f4bfe_605b24a6",
      "range": {
        "startLine": 10,
        "startChar": 32,
        "endLine": 11,
        "endChar": 33
      },
      "revId": "a3b3eb2081c3839cacd946d5d43ffd5cfeffbc49",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d75d4a00_65e23f44",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-04-05T18:27:02Z",
      "side": 1,
      "message": "Yes, `first-boot` LGTM. My concern is regarding extending this to package install.",
      "parentUuid": "3031e6ba_c662a84a",
      "range": {
        "startLine": 10,
        "startChar": 32,
        "endLine": 11,
        "endChar": 33
      },
      "revId": "a3b3eb2081c3839cacd946d5d43ffd5cfeffbc49",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "25caeec9_1a584a87",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-04-05T18:28:44Z",
      "side": 1,
      "message": "The concurrency is for `BatchDexoptReason`\u0027s. I don\u0027t see how it affects package install.",
      "parentUuid": "d75d4a00_65e23f44",
      "range": {
        "startLine": 10,
        "startChar": 32,
        "endLine": 11,
        "endChar": 33
      },
      "revId": "a3b3eb2081c3839cacd946d5d43ffd5cfeffbc49",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "70c8414c_a07be42a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-04-05T18:32:41Z",
      "side": 1,
      "message": "Aha, ok. The description didn\u0027t mention that restriction so I missed it.",
      "parentUuid": "25caeec9_1a584a87",
      "range": {
        "startLine": 10,
        "startChar": 32,
        "endLine": 11,
        "endChar": 33
      },
      "revId": "a3b3eb2081c3839cacd946d5d43ffd5cfeffbc49",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}