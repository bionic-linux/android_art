{
  "comments": [
    {
      "key": {
        "uuid": "b76e2854_05092410",
        "filename": "compiler/optimizing/inliner.cc",
        "patchSetId": 19
      },
      "lineNbr": 264,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-06T16:28:36Z",
      "side": 1,
      "message": "I\u0027d prefer braces when there are so many returns.",
      "range": {
        "startLine": 261,
        "startChar": 0,
        "endLine": 264,
        "endChar": 33
      },
      "revId": "60b423e1c0d47596a326269c7396ad21e7433d4f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d8a8ed21_9c251835",
        "filename": "compiler/optimizing/inliner.cc",
        "patchSetId": 19
      },
      "lineNbr": 264,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-03-06T21:57:17Z",
      "side": 1,
      "message": "how about a switch? :)",
      "parentUuid": "b76e2854_05092410",
      "range": {
        "startLine": 261,
        "startChar": 0,
        "endLine": 264,
        "endChar": 33
      },
      "revId": "60b423e1c0d47596a326269c7396ad21e7433d4f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e43e9e73_d0d1d0f2",
        "filename": "compiler/optimizing/inliner.cc",
        "patchSetId": 19
      },
      "lineNbr": 496,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-06T16:28:36Z",
      "side": 1,
      "message": "braces",
      "range": {
        "startLine": 495,
        "startChar": 0,
        "endLine": 496,
        "endChar": 65
      },
      "revId": "60b423e1c0d47596a326269c7396ad21e7433d4f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db5d2bb4_c54a5287",
        "filename": "compiler/optimizing/inliner.cc",
        "patchSetId": 19
      },
      "lineNbr": 529,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-06T16:28:36Z",
      "side": 1,
      "message": "This makes me realize there will be class loader problems. You shouldn\u0027t go through dex caches for all of this.\n\nWe need:\n1) Only record types that are in the same class loader of the caller, or in the bootclasspath.\n2) At runtime, lookup the type in the current class loader, and make sure the returned type is of the same class loader, or in the boot classpath.",
      "range": {
        "startLine": 498,
        "startChar": 2,
        "endLine": 529,
        "endChar": 3
      },
      "revId": "60b423e1c0d47596a326269c7396ad21e7433d4f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b21c8a5a_bc045b49",
        "filename": "compiler/optimizing/inliner.cc",
        "patchSetId": 19
      },
      "lineNbr": 529,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-03-06T21:57:17Z",
      "side": 1,
      "message": "Good spot!\n\nThough this is just an optimization to not generate a useless compare. It\u0027s not a correctness issue.\n\nRegarding the dex cache, we\u0027ll end up going through them anyway, or there\u0027s some other way I miss? I guess I could just use ClassLinker::LookupResolvedType, to hide all this logic.",
      "parentUuid": "db5d2bb4_c54a5287",
      "range": {
        "startLine": 498,
        "startChar": 2,
        "endLine": 529,
        "endChar": 3
      },
      "revId": "60b423e1c0d47596a326269c7396ad21e7433d4f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0945d39_3a568853",
        "filename": "compiler/optimizing/inliner.cc",
        "patchSetId": 19
      },
      "lineNbr": 529,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-07T17:49:48Z",
      "side": 1,
      "message": "Yeah I would really hide this logic with LookupResolvedType.\n\nI agree with you it\u0027s a correctness thing. But as we\u0027ve been bitten by class loaders **** over and over again, I need we need to be extra, super extra, careful.\n\nShouldn\u0027t be too hard to filter out some classes when you\u0027re recording, right (which you\u0027re already doing when you cannot find the type id).",
      "parentUuid": "b21c8a5a_bc045b49",
      "range": {
        "startLine": 498,
        "startChar": 2,
        "endLine": 529,
        "endChar": 3
      },
      "revId": "60b423e1c0d47596a326269c7396ad21e7433d4f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "47d2b063_d667b20c",
        "filename": "compiler/optimizing/inliner.cc",
        "patchSetId": 19
      },
      "lineNbr": 529,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-03-08T03:10:59Z",
      "side": 1,
      "message": "Done as part of this CL.",
      "parentUuid": "b0945d39_3a568853",
      "range": {
        "startLine": 498,
        "startChar": 2,
        "endLine": 529,
        "endChar": 3
      },
      "revId": "60b423e1c0d47596a326269c7396ad21e7433d4f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f6e8ca3a_62fc4641",
        "filename": "compiler/optimizing/inliner.cc",
        "patchSetId": 19
      },
      "lineNbr": 529,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-03-09T02:35:52Z",
      "side": 1,
      "message": "Actually, I can\u0027t go with LookupResolvedType alone without some dex_cache lookup. The types might not be in the current compilation unit dex file so I must first find the right dex file before calling LookupResolvedType.",
      "parentUuid": "47d2b063_d667b20c",
      "range": {
        "startLine": 498,
        "startChar": 2,
        "endLine": 529,
        "endChar": 3
      },
      "revId": "60b423e1c0d47596a326269c7396ad21e7433d4f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "87988822_c4ad7f0c",
        "filename": "compiler/optimizing/inliner.cc",
        "patchSetId": 19
      },
      "lineNbr": 529,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-09T12:00:43Z",
      "side": 1,
      "message": "Ah right, that\u0027s because you\u0027re encoding {type id, dex file id} in the profile.",
      "parentUuid": "f6e8ca3a_62fc4641",
      "range": {
        "startLine": 498,
        "startChar": 2,
        "endLine": 529,
        "endChar": 3
      },
      "revId": "60b423e1c0d47596a326269c7396ad21e7433d4f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2b43a4_51cca87c",
        "filename": "compiler/optimizing/inliner.h",
        "patchSetId": 19
      },
      "lineNbr": 65,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-06T16:28:36Z",
      "side": 1,
      "message": "Uninitialized",
      "range": {
        "startLine": 65,
        "startChar": 16,
        "endLine": 65,
        "endChar": 27
      },
      "revId": "60b423e1c0d47596a326269c7396ad21e7433d4f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0c4d3c43_0c87e36a",
        "filename": "compiler/optimizing/inliner.h",
        "patchSetId": 19
      },
      "lineNbr": 67,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-06T16:28:36Z",
      "side": 1,
      "message": "Polymorphic",
      "range": {
        "startLine": 67,
        "startChar": 4,
        "endLine": 67,
        "endChar": 27
      },
      "revId": "60b423e1c0d47596a326269c7396ad21e7433d4f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55c68c08_43ab95fc",
        "filename": "compiler/optimizing/inliner.h",
        "patchSetId": 19
      },
      "lineNbr": 68,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-06T16:28:36Z",
      "side": 1,
      "message": "Megamorphic",
      "range": {
        "startLine": 68,
        "startChar": 16,
        "endLine": 68,
        "endChar": 27
      },
      "revId": "60b423e1c0d47596a326269c7396ad21e7433d4f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}