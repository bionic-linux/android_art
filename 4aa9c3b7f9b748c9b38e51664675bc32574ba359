{
  "comments": [
    {
      "key": {
        "uuid": "66b294db_e413fd38",
        "filename": "runtime/gc/space/region_space.cc",
        "patchSetId": 2
      },
      "lineNbr": 610,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2019-07-02T18:19:32Z",
      "side": 1,
      "message": "I thought we wanted to poison the dead objects in unevac regions during full-heap GCs, even in non-debug builds. If so, then shouldn\u0027t the condition be (clear_bitmap || kPoisonDeadObjectsInUnevacuatedRegions)?",
      "range": {
        "startLine": 610,
        "startChar": 14,
        "endLine": 610,
        "endChar": 82
      },
      "revId": "4aa9c3b7f9b748c9b38e51664675bc32574ba359",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "307299bd_436e4d38",
        "filename": "runtime/gc/space/region_space.cc",
        "patchSetId": 2
      },
      "lineNbr": 610,
      "author": {
        "id": 1514166
      },
      "writtenOn": "2019-07-03T03:32:31Z",
      "side": 1,
      "message": "Sorry if i have caused a confusion. My thought was Debug or non-debug PoisonDeadObjects for young_gen has no effect. kPoisonDeadObjectsInUnevacuatedRegions should still control if we want to do it at all.",
      "parentUuid": "66b294db_e413fd38",
      "range": {
        "startLine": 610,
        "startChar": 14,
        "endLine": 610,
        "endChar": 82
      },
      "revId": "4aa9c3b7f9b748c9b38e51664675bc32574ba359",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dfe3144c_70a853af",
        "filename": "runtime/gc/space/region_space.cc",
        "patchSetId": 2
      },
      "lineNbr": 610,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2019-07-03T20:55:43Z",
      "side": 1,
      "message": "I understand. But, since we may identify new dead objects in unevac regions during a full-heap GC, we should be poisoning them.\n\nIIUC, we protect cleared regions and poison dead objects in unevac regions to catch dangling reference bugs. So, since we are protecting cleared regions in non-debug builds, we should also poison dead objects in non-debug builds, although only in full-heap collections as it\u0027s not required in young collections.",
      "parentUuid": "307299bd_436e4d38",
      "range": {
        "startLine": 610,
        "startChar": 14,
        "endLine": 610,
        "endChar": 82
      },
      "revId": "4aa9c3b7f9b748c9b38e51664675bc32574ba359",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b73d968_f1bf0b65",
        "filename": "runtime/gc/space/region_space.cc",
        "patchSetId": 2
      },
      "lineNbr": 610,
      "author": {
        "id": 1514166
      },
      "writtenOn": "2019-07-05T15:10:21Z",
      "side": 1,
      "message": "So, are we saying the change in PS-1 is correct? where we just let kPoisonDeadObjectsInUnevacuatedRegions be true. Debug or not, always poison dead objects and only for full-heap GC. Because (clear_bitmap || kPoisonDeadObjectsInUnevacuatedRegions) does PoisonDeadObjects for young GC as well in debug mode, which isn\u0027t really required anyway.",
      "parentUuid": "dfe3144c_70a853af",
      "range": {
        "startLine": 610,
        "startChar": 14,
        "endLine": 610,
        "endChar": 82
      },
      "revId": "4aa9c3b7f9b748c9b38e51664675bc32574ba359",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cede4f0c_ea93d1cb",
        "filename": "runtime/gc/space/region_space.cc",
        "patchSetId": 2
      },
      "lineNbr": 610,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2019-07-08T21:15:20Z",
      "side": 1,
      "message": "I apologize for creating the confusion.\n\nYes, in my opinion the PS-1 is correct, although we can get away with kPoisonDeadObjectsInUnevacuatedRegions altogether.\n\nThis should be done unconditionally in full-heap GCs to be in-sync with protecting cleared regions. After all the purpose of both is same.\n\nI\u0027ll let others respond with their opinions. But it doesn\u0027t make sense to me that we protect cleared regions in both debug and non-debug builds, but only poison dead objects in unevac regions only in debug builds.",
      "parentUuid": "3b73d968_f1bf0b65",
      "range": {
        "startLine": 610,
        "startChar": 14,
        "endLine": 610,
        "endChar": 82
      },
      "revId": "4aa9c3b7f9b748c9b38e51664675bc32574ba359",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}