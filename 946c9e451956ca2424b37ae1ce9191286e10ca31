{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "24dfd3bc_77095b7e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-09-08T13:04:59Z",
      "side": 1,
      "message": "Victor, does CompOS support system_ext?",
      "revId": "946c9e451956ca2424b37ae1ce9191286e10ca31",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e163f26f_c8852c89",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1042276
      },
      "writtenOn": "2022-09-08T16:54:29Z",
      "side": 1,
      "message": "No.  You probably shouldn\u0027t assume system_ext always contains something though, as I thought it is meant for OEM customization if they care.  I did a quick code search and see a comment \"For GSI to skip mounting /product and /system_ext...\".",
      "parentUuid": "24dfd3bc_77095b7e",
      "revId": "946c9e451956ca2424b37ae1ce9191286e10ca31",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "84553eeb_86eacd33",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-09-08T17:25:42Z",
      "side": 1,
      "message": "Yes, system_ext is for OEMs. Actually, this CL is created by Xiaomi. They are adding their OEM-specific system server jars to system_ext, which I think is a valid thing to do according to https://source.android.com/docs/core/bootloader/partitions/shared-system-image#sys-ext-partition.\n\nI don\u0027t think they are currently using CompOS, so this isn\u0027t a blocker for now, but it will become a blocker when OEMs start to adopt CompOS in the future.",
      "parentUuid": "e163f26f_c8852c89",
      "revId": "946c9e451956ca2424b37ae1ce9191286e10ca31",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6863975_4cc5e275",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1042276
      },
      "writtenOn": "2022-09-08T17:46:47Z",
      "side": 1,
      "message": "Interesting.  Does this require additional change to derive_classpath in order to set SYSTEMSERVERCLASSPATH?  Otherwise, I don\u0027t see how a JAR in /system_ext can be picked up by odrefresh.",
      "parentUuid": "84553eeb_86eacd33",
      "revId": "946c9e451956ca2424b37ae1ce9191286e10ca31",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "550dabaf_a835dc40",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-09-08T17:54:10Z",
      "side": 1,
      "message": "systemserverclasspath.pb encodes the full jar path, so derive_classpath doesn\u0027t have to know about the partition. They probably have their system server jars added to /system/etc/classpaths/systemserverclasspath.pb.",
      "parentUuid": "c6863975_4cc5e275",
      "revId": "946c9e451956ca2424b37ae1ce9191286e10ca31",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b7defeed_9d4cdea0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-09-15T12:49:52Z",
      "side": 1,
      "message": "Discussed separately in b/245957815. I\u0027m marking this comment as resolved because this is out of the scope of this CL.",
      "parentUuid": "550dabaf_a835dc40",
      "revId": "946c9e451956ca2424b37ae1ce9191286e10ca31",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d566a391_0e6c0b72",
        "filename": "odrefresh/odrefresh.cc",
        "patchSetId": 3
      },
      "lineNbr": 784,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-09-08T12:36:31Z",
      "side": 1,
      "message": "Instead of making this logic more and more complicated, I suggest something like `android::base::Dirname(jar_path) + \"oat\" + isa_str + \"/\" + image_name` that works for any partitions and any folders.",
      "range": {
        "startLine": 773,
        "startChar": 4,
        "endLine": 784,
        "endChar": 88
      },
      "revId": "946c9e451956ca2424b37ae1ce9191286e10ca31",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e91d0ac4_ae75a170",
        "filename": "odrefresh/odrefresh.cc",
        "patchSetId": 3
      },
      "lineNbr": 784,
      "author": {
        "id": 1390168
      },
      "writtenOn": "2022-09-16T13:40:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d566a391_0e6c0b72",
      "range": {
        "startLine": 773,
        "startChar": 4,
        "endLine": 784,
        "endChar": 88
      },
      "revId": "946c9e451956ca2424b37ae1ce9191286e10ca31",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}