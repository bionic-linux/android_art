{
  "comments": [
    {
      "key": {
        "uuid": "0a142432_757d0f7c",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 122,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2017-07-27T21:49:21Z",
      "side": 1,
      "message": "\u003cisa\u003e or \u003carch\u003e would be clearer here.",
      "range": {
        "startLine": 122,
        "startChar": 42,
        "endLine": 122,
        "endChar": 46
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "51810a2d_63c8bd41",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 122,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-27T22:24:31Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "0a142432_757d0f7c",
      "range": {
        "startLine": 122,
        "startChar": 42,
        "endLine": 122,
        "endChar": 46
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c252e876_1f05ec0d",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2017-07-27T21:49:21Z",
      "side": 1,
      "message": "How about assigning the pattern to a local variable and then testing if the first element in image_files matches it?",
      "range": {
        "startLine": 130,
        "startChar": 15,
        "endLine": 130,
        "endChar": 61
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e705302c_52abcd87",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2017-07-27T21:49:21Z",
      "side": 1,
      "message": "Are the quotes here necessary?\n\nA comment showing an example of match if found.",
      "range": {
        "startLine": 130,
        "startChar": 35,
        "endLine": 130,
        "endChar": 40
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e6233707_0e0a021f",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-27T22:24:31Z",
      "side": 1,
      "message": "I suppose they aren\u0027t *necessary* but it\u0027s good bash practice to always escape variables , if there\u0027s a space there it would get expanded into 2 array elements, breaking the pattern match.\n\nMaybe the better question is why not just \"$var/*/$var\" (2\"\" not 4\"\") and that\u0027s because it treats the * as a literal on one of the shells.",
      "parentUuid": "e705302c_52abcd87",
      "range": {
        "startLine": 130,
        "startChar": 35,
        "endLine": 130,
        "endChar": 40
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "feb37207_f36f1c39",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-27T22:24:31Z",
      "side": 1,
      "message": "Not sure what you mean?\n\nIf you mean:\n\n   local image_files\u003d(pattern) \n\ndoesn\u0027t work on mksh",
      "parentUuid": "c252e876_1f05ec0d",
      "range": {
        "startLine": 130,
        "startChar": 15,
        "endLine": 130,
        "endChar": 61
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9b6570b8_ec628ed8",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2017-07-28T10:35:21Z",
      "side": 1,
      "message": "The question was the latter, color highlighting too subtle in gerrit.",
      "parentUuid": "e6233707_0e0a021f",
      "range": {
        "startLine": 130,
        "startChar": 35,
        "endLine": 130,
        "endChar": 40
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d34b7c5a_5404f18e",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2017-07-28T10:35:21Z",
      "side": 1,
      "message": "function check_if_boot_image_file_exists() {\n  local image_location_dir\u003d\"$1\"\n  local image_location_name\u003d\"$2\"\n\n  pattern\u003d\"$image_location_dir/\"\u0027*\u0027\"/$image_location_name\"\n  # Breaks if nullglob is set.\n  matches\u003d($pattern)\n\n  [[ \"${matches[0]}\" !\u003d \"$pattern\" ]]\n}",
      "parentUuid": "feb37207_f36f1c39",
      "range": {
        "startLine": 130,
        "startChar": 15,
        "endLine": 130,
        "endChar": 61
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69d6bc48_6405f10f",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-28T14:33:20Z",
      "side": 1,
      "message": "With your suggestion on L133 I think we can just remove the array length check and get it down to one \u0027-e\u0027 test. Is that good?",
      "parentUuid": "d34b7c5a_5404f18e",
      "range": {
        "startLine": 130,
        "startChar": 15,
        "endLine": 130,
        "endChar": 61
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "edcaf32d_a35a0ee2",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 130,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2017-07-28T15:25:43Z",
      "side": 1,
      "message": "Yes. The snippet I enclosed works on bash / mksh and doesn\u0027t need the -e since that\u0027s been established with the glob expansion. Happy either way.",
      "parentUuid": "69d6bc48_6405f10f",
      "range": {
        "startLine": 130,
        "startChar": 15,
        "endLine": 130,
        "endChar": 61
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6244443f_7efc4fad",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2017-07-27T21:49:21Z",
      "side": 1,
      "message": "What causes 0?",
      "range": {
        "startLine": 133,
        "startChar": 5,
        "endLine": 133,
        "endChar": 31
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "99e7ee52_695eab20",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-27T22:24:31Z",
      "side": 1,
      "message": "Using bash with nullglob turned on, and when it matches 0 elements (i.e. there are no core.art files at all).\n\nI wanted to make it symmetric but mksh doesn\u0027t have shopt/nullglob.",
      "parentUuid": "6244443f_7efc4fad",
      "range": {
        "startLine": 133,
        "startChar": 5,
        "endLine": 133,
        "endChar": 31
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee81879b_3ede828c",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2017-07-28T10:35:21Z",
      "side": 1,
      "message": "The script doesn\u0027t set this option and it\u0027s not on by default.",
      "parentUuid": "99e7ee52_695eab20",
      "range": {
        "startLine": 133,
        "startChar": 5,
        "endLine": 133,
        "endChar": 31
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3c1a5df4_cafe95eb",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-28T14:33:20Z",
      "side": 1,
      "message": "Ok, good point, it looks like shopt is not inherited when bash scripts are executed as a separate process.\n\nI can just remove this first part leaving only\n\n   [[ -e \"${image_files[0]}\" ]]\n\nwhich should simplify the whole thing",
      "parentUuid": "ee81879b_3ede828c",
      "range": {
        "startLine": 133,
        "startChar": 5,
        "endLine": 133,
        "endChar": 31
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d53d48c_d3123378",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 295,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2017-07-27T21:49:21Z",
      "side": 1,
      "message": "s/that/that a/\n\nrun_art?",
      "range": {
        "startLine": 295,
        "startChar": 24,
        "endLine": 295,
        "endChar": 30
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "92713a79_2105f61e",
        "filename": "tools/art",
        "patchSetId": 1
      },
      "lineNbr": 295,
      "author": {
        "id": 1074526
      },
      "writtenOn": "2017-07-27T21:58:17Z",
      "side": 1,
      "message": "also, it is more \"must regenerate it\" (you don\u0027t enable it, you force it)",
      "parentUuid": "6d53d48c_d3123378",
      "range": {
        "startLine": 295,
        "startChar": 24,
        "endLine": 295,
        "endChar": 30
      },
      "revId": "95d98f43bb53e9c5140543aa906f4998e3cef2ac",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}