{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a4425bf9_f9da6715",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1010681
      },
      "writtenOn": "2021-02-08T10:49:49Z",
      "side": 1,
      "message": "I just realised that we have a bigger problem here.\n\nIf we update the build, the the dex files generated will have stricter API flags that currently. Mainline will then ship those dex files to devices running Q and R (where we don\u0027t have, and cannot have, the updated runtime). This will lead to severe app compat issues.\n\nI\u0027m not sure how to proceed from here. I don\u0027t think we can make the build modularization changes we need without breaking Q and R devices (the runtime changes are ok though). Unless I\u0027m missing something? (I really hope I am!)",
      "revId": "f0ff9ee4981692e3b0cc3b49d3ceded9160661ce",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "58b62c42_a9ff9768",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-02-08T13:17:37Z",
      "side": 1,
      "message": "Good point. The next steps could be to check whether Q and R modules actually affect hiddenapi bits of other parts of the system, and vice-versa, right?",
      "parentUuid": "a4425bf9_f9da6715",
      "revId": "f0ff9ee4981692e3b0cc3b49d3ceded9160661ce",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ab52eb7_6934a27f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1010681
      },
      "writtenOn": "2021-02-08T13:22:05Z",
      "side": 1,
      "message": "Yes, that seems sensible. I\u0027m not familiar with which BCP code is in mainline in Q and R. Anything in mainline that affects the core shouldn\u0027t be a problem, just the other way round.",
      "parentUuid": "58b62c42_a9ff9768",
      "revId": "f0ff9ee4981692e3b0cc3b49d3ceded9160661ce",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5b2075e2_850c7cf9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1039338
      },
      "writtenOn": "2021-02-08T13:29:17Z",
      "side": 1,
      "message": "Given that the runtime checks are done by the ART runtime any changes to flags in the ART dex files that require runtime changes should be fine in Q and R because the runtime will be updated at the same time as the flags.\n\nThere would be a problem if another APEX, say conscrypt was updated in Q or R without also updating ART and the dex files contained within that APEX relied on the ART runtime changes to compensate for the stricter dex flags.\n\nI\u0027m not sure which of these scenarios is possible but it is certainly something to consider.",
      "parentUuid": "a4425bf9_f9da6715",
      "revId": "f0ff9ee4981692e3b0cc3b49d3ceded9160661ce",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b0525524_effa59b1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1039338
      },
      "writtenOn": "2021-02-08T13:29:17Z",
      "side": 1,
      "message": "FYI - I created https://paste.googleplex.com/5614549299363840 which shows the effect of the hiddenapi build tool part of this change on the hiddenapi-stub-flags.csv file.",
      "revId": "f0ff9ee4981692e3b0cc3b49d3ceded9160661ce",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}