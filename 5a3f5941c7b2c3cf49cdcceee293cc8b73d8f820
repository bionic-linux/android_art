{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "429cc60d_37b019a5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2022-10-17T11:01:51Z",
      "side": 1,
      "message": "Thanks for the refactoring efforts, Stefano.\n\nI also noticed that some `art_standalone_odrefresh_tests` test cases are now failing presubmits; please take a look. Thanks!",
      "revId": "5a3f5941c7b2c3cf49cdcceee293cc8b73d8f820",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "13f8c583_86462182",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2022-10-17T14:20:07Z",
      "side": 1,
      "message": "That\u0027s strange: I can see it is failing in pre-submits, but running the same target with `atest` on my cloudtop is successful - do you know what might be happening?",
      "parentUuid": "429cc60d_37b019a5",
      "revId": "5a3f5941c7b2c3cf49cdcceee293cc8b73d8f820",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2bf9525a_d6ae8d77",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2022-10-17T14:27:57Z",
      "side": 1,
      "message": "Local runs with Atest do not always have the same behavior as ATP runs, for multiple reasons (artifacts are not necessary built and packaged the same way, test options may be different in the ATP configuration, etc.). You\u0027ll have to check the artifacts of the failed test run(s) to understand the cause of the failure(s) (TradeFed host log, logcat outputs, captured bugreports).\n\nI\u0027ll also have a look.",
      "parentUuid": "13f8c583_86462182",
      "revId": "5a3f5941c7b2c3cf49cdcceee293cc8b73d8f820",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d55d54a_45d8c50e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2022-10-17T14:49:34Z",
      "side": 1,
      "message": "I can see these messages in a logcat output:\n\n```\n10-17 14:06:33.388 shell  2657  2657 I art_standalone_odrefresh_tests: Running main() from common_runtime_test.cc...\n10-17 14:06:33.402 shell  2659  2659 I art_standalone_odrefresh_tests: Running main() from common_runtime_test.cc...\n10-17 14:06:33.408 shell  2663  2663 F art_standalone_odrefresh_tests: common_art_test.cc:70] Check failed: ok Permission denied for /data/tmp-vh5r4j\n10-17 14:06:33.412 shell  2664  2664 F art_standalone_odrefresh_tests: common_art_test.cc:70] Check failed: ok Permission denied for /data/tmp-9SWybP\n```\n\nI guess some paths need to be adjusted to read from / write to a more permissive directory (e.g. `/data/local/tmp`).",
      "parentUuid": "2bf9525a_d6ae8d77",
      "revId": "5a3f5941c7b2c3cf49cdcceee293cc8b73d8f820",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "932f9aac_8a1dc315",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2022-10-17T15:10:55Z",
      "side": 1,
      "message": "I noticed the difference between the tests before and after the failure is that earlier the ScratchDir was created in the test body, while with these changes in place the ScratchDir is created within the base test definition - I have uploaded a new CL with (only) this change reverted to see if it helps.",
      "parentUuid": "2d55d54a_45d8c50e",
      "revId": "5a3f5941c7b2c3cf49cdcceee293cc8b73d8f820",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c2ea4ef_275e8786",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-10-17T15:15:53Z",
      "side": 1,
      "message": "Ah, right. To add a ScratchDir to a test fixture, you need to initialize it in SetUp and destory it in tearDown. E.g., http://cs/android-internal/art/artd/file_utils_test.cc;l\u003d79;rcl\u003d0bdefeba792bd8ea0373a9904daa2c8323514489",
      "parentUuid": "932f9aac_8a1dc315",
      "revId": "5a3f5941c7b2c3cf49cdcceee293cc8b73d8f820",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "50aaea62_b7cf2b52",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2022-10-17T15:25:41Z",
      "side": 1,
      "message": "Thanks for the hint! I have made the change and uploaded it, let\u0027s see if this works.",
      "parentUuid": "7c2ea4ef_275e8786",
      "revId": "5a3f5941c7b2c3cf49cdcceee293cc8b73d8f820",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5eeb1ce4_1a70992a",
        "filename": "odrefresh/odr_metrics_record_test.cc",
        "patchSetId": 14
      },
      "lineNbr": 41,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2022-10-17T11:01:51Z",
      "side": 1,
      "message": "Style:\n\n```\n  ScratchDir dir(/*keep_files\u003d*/false);\n```",
      "range": {
        "startLine": 41,
        "startChar": 2,
        "endLine": 41,
        "endChar": 52
      },
      "revId": "5a3f5941c7b2c3cf49cdcceee293cc8b73d8f820",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8c4f1e52_097271e9",
        "filename": "odrefresh/odr_metrics_record_test.cc",
        "patchSetId": 14
      },
      "lineNbr": 41,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2022-10-17T12:35:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5eeb1ce4_1a70992a",
      "range": {
        "startLine": 41,
        "startChar": 2,
        "endLine": 41,
        "endChar": 52
      },
      "revId": "5a3f5941c7b2c3cf49cdcceee293cc8b73d8f820",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b3061d7_493af53e",
        "filename": "odrefresh/odr_metrics_record_test.cc",
        "patchSetId": 14
      },
      "lineNbr": 43,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2022-10-17T11:01:51Z",
      "side": 1,
      "message": "Style: Can you append a `_` to the names of these protected members?",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 43,
        "endChar": 40
      },
      "revId": "5a3f5941c7b2c3cf49cdcceee293cc8b73d8f820",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "384d649c_a5116601",
        "filename": "odrefresh/odr_metrics_record_test.cc",
        "patchSetId": 14
      },
      "lineNbr": 43,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2022-10-17T12:35:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9b3061d7_493af53e",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 43,
        "endChar": 40
      },
      "revId": "5a3f5941c7b2c3cf49cdcceee293cc8b73d8f820",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77ed3244_e6749002",
        "filename": "odrefresh/odr_metrics_record_test.cc",
        "patchSetId": 14
      },
      "lineNbr": 142,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2022-10-17T11:01:51Z",
      "side": 1,
      "message": "Can you introduce constants for these offsets?",
      "range": {
        "startLine": 142,
        "startChar": 16,
        "endLine": 142,
        "endChar": 17
      },
      "revId": "5a3f5941c7b2c3cf49cdcceee293cc8b73d8f820",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eec0133e_72330f3e",
        "filename": "odrefresh/odr_metrics_record_test.cc",
        "patchSetId": 14
      },
      "lineNbr": 142,
      "author": {
        "id": 1948615
      },
      "writtenOn": "2022-10-17T12:35:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "77ed3244_e6749002",
      "range": {
        "startLine": 142,
        "startChar": 16,
        "endLine": 142,
        "endChar": 17
      },
      "revId": "5a3f5941c7b2c3cf49cdcceee293cc8b73d8f820",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}