{
  "comments": [
    {
      "key": {
        "uuid": "03d10a3f_641634d6",
        "filename": "runtime/gc/collector/mark_sweep-inl.h",
        "patchSetId": 4
      },
      "lineNbr": 72,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2013-12-06T01:09:08Z",
      "side": 0,
      "message": "Why get rid of this visitor call (lines 72-74)? Do we want to visit the class only if it\u0027s an array (lines 77-79 in patch set 4)?",
      "revId": "7613ffdf0528f45df5beb2476ec0e7dc6092b0fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e3cdd6a7_6e5053f0",
        "filename": "runtime/gc/collector/mark_sweep-inl.h",
        "patchSetId": 4
      },
      "lineNbr": 72,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2013-12-06T18:42:41Z",
      "side": 0,
      "message": "It was visiting classes twice since we no longer mask the bit in the reference word.",
      "parentUuid": "03d10a3f_641634d6",
      "revId": "7613ffdf0528f45df5beb2476ec0e7dc6092b0fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "83e41a52_24ed1ca1",
        "filename": "runtime/gc/collector/mark_sweep-inl.h",
        "patchSetId": 4
      },
      "lineNbr": 72,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2013-12-07T00:29:57Z",
      "side": 0,
      "message": "I assume you mean that when VisitOtherReferences() will iterate over the reference word, the bit for the class would be set and the class will be visited then, whereas VisitObjectArrayReferences() won\u0027t visit the class. Hence, we need to leave the visitor() call for the array case (IsArrayClass() \u003d\u003d true).\n\nWith this understanding, how about getting rid of the visit_class parameter from this function (as it is no longer respected at least partially) and hardcode for the visit_class \u003d\u003d true case? My grepping indicates that all the call sites pass visit_class \u003d\u003d true except the one in semi-space.cc (which passes kMovingClasses, but maybe safe to unconditionally pass true there?) I understand it\u0027d be a bit more work to make this change :( but it seems to avoid confusions for future maintenance/evolution?",
      "parentUuid": "e3cdd6a7_6e5053f0",
      "revId": "7613ffdf0528f45df5beb2476ec0e7dc6092b0fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}