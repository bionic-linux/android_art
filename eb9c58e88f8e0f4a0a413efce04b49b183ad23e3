{
  "comments": [
    {
      "key": {
        "uuid": "ade97f6b_022b5f92",
        "filename": "runtime/jit/jit_code_cache.cc",
        "patchSetId": 6
      },
      "lineNbr": 819,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2016-11-29T20:38:33Z",
      "side": 0,
      "message": "This isn\u0027t necessary any more because the classes are now weak roots, right?",
      "range": {
        "startLine": 819,
        "startChar": 32,
        "endLine": 819,
        "endChar": 35
      },
      "revId": "eb9c58e88f8e0f4a0a413efce04b49b183ad23e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d90030a_22d9b041",
        "filename": "runtime/jit/jit_code_cache.cc",
        "patchSetId": 6
      },
      "lineNbr": 819,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-11-29T21:07:37Z",
      "side": 0,
      "message": "Correct. The problem before was that the GC was concurrently visiting the profiling info, which the code below tries to delete.\n\nNow the GC doesn\u0027t visit the profiling info. Instead, it\u0027s happening in JitCodeCode::SweepJitRoots, under the lock.",
      "parentUuid": "ade97f6b_022b5f92",
      "range": {
        "startLine": 819,
        "startChar": 32,
        "endLine": 819,
        "endChar": 35
      },
      "revId": "eb9c58e88f8e0f4a0a413efce04b49b183ad23e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ade97f6b_a20cb322",
        "filename": "runtime/jit/profiling_info.cc",
        "patchSetId": 6
      },
      "lineNbr": 43,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2016-11-29T20:38:33Z",
      "side": 0,
      "message": "Why is this not necessary any more?",
      "range": {
        "startLine": 43,
        "startChar": 46,
        "endLine": 43,
        "endChar": 75
      },
      "revId": "eb9c58e88f8e0f4a0a413efce04b49b183ad23e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d90030a_42de342b",
        "filename": "runtime/jit/profiling_info.cc",
        "patchSetId": 6
      },
      "lineNbr": 43,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-11-29T21:07:37Z",
      "side": 0,
      "message": "It used to be required to know which class we need to pretend to do a write barrier (see line 125), so the card mark indicates the class needs to be visited, and the profiling info needs to be visited.\n\nNow the profiling info is being handled in JitCodeCode::SweepJitRoots, so we don\u0027t need to pretend to do a write barrier.",
      "parentUuid": "ade97f6b_a20cb322",
      "range": {
        "startLine": 43,
        "startChar": 46,
        "endLine": 43,
        "endChar": 75
      },
      "revId": "eb9c58e88f8e0f4a0a413efce04b49b183ad23e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}