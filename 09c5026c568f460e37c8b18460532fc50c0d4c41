{
  "comments": [
    {
      "key": {
        "uuid": "68ca1420_73b60806",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 29,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-28T09:00:23Z",
      "side": 1,
      "message": "echo to stdout? Is that intended?",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 17
      },
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0bebe594_0dadbb9b",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 29,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-03-28T17:54:55Z",
      "side": 1,
      "message": "i just kept the old behavior.",
      "parentUuid": "68ca1420_73b60806",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 17
      },
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5737be9c_bfa5c825",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 29,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-28T21:27:43Z",
      "side": 1,
      "message": "No, the old behavior was en echo from a function. Here you\u0027re echoing in the main script.",
      "parentUuid": "0bebe594_0dadbb9b",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 17
      },
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8cfdbff8_4af74aea",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 29,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-03-28T21:29:17Z",
      "side": 1,
      "message": "I removed it in ps10 anyway.",
      "parentUuid": "5737be9c_bfa5c825",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 17
      },
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "761d9edc_e6d7fae8",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 42,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2017-03-28T11:51:21Z",
      "side": 1,
      "message": "Having been bitten by mksh this week, I\u0027d suggest a more conservative approach along the lines of:\n\nfunction replace_compiler_filter_with_interpret_only() {\n  ARGS_WITH_INTERPRET_ONLY\u003d\"\"\n  while [ $# -ne 0 ]; do\n    # Strip out compiler filter if present.\n    if [[ \"$1 $2\" \u003d\u003d \"-Xcompiler-option --compiler-filter\u003d\"* ]]; then\n      shift\n    else\n      ARGS_WITH_INTERPRET_ONLY\u003d\"$ARGS_WITH_INTERPRET_ONLY \\\"$1\\\"\"\n    fi\n    shift\n  done\n  ARGS_WITH_INTERPRET_ONLY\u003d\"-Xcompiler-option --compiler-filter\u003dinterpret-only $ARGS_WITH_INTERPRET_ONLY\"\n}",
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3c2eb438_8b843fbe",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 42,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-03-28T17:54:55Z",
      "side": 1,
      "message": "what\u0027s the difference and why is this better?\n\nthe way I understand  \u0027shift\u0027, it will destroy the command line arguments for the next arguments.",
      "parentUuid": "761d9edc_e6d7fae8",
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1760c117_087cd121",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 42,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-03-28T18:34:33Z",
      "side": 1,
      "message": "Orion, I tested my array suggestion from a few patch sets ago on mksh (on android). The original snippet definitely works as intended.\n\nI do agree mksh is full of pitfalls, which is why it\u0027s carefully crafted the way it is and not using other syntax like array slicing, declare, etc.",
      "parentUuid": "761d9edc_e6d7fae8",
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5dfa3087_87c2cd09",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 42,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-03-28T18:34:33Z",
      "side": 1,
      "message": "It\u0027s not better (whitespace will be lost) but I think Orion was worried mksh doesn\u0027t support (), which it does.\n\nshift does destroy command line arguments but in a function you get a copy so it doesn\u0027t destroy the original.",
      "parentUuid": "3c2eb438_8b843fbe",
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "05f8673e_b0bb977e",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 42,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2017-03-29T07:59:49Z",
      "side": 1,
      "message": "Yes, I appreciate that and didn\u0027t flag it as not working. At the same time, two reviewers felt it looked overly complicated.",
      "parentUuid": "1760c117_087cd121",
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ee09319_1ba6935c",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 42,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2017-03-29T07:59:49Z",
      "side": 1,
      "message": "The suggestion was a reaction to the comment about switching language. For a shell-script, these seem like desirable properties:\n\n1) fewer language features.\n2) fewer lines of code.\n3) fewer variables.\n4) single result assignment.\n\nThe current solution fails when -Xcompiler-option is missing, but not really an operational issue.",
      "parentUuid": "5dfa3087_87c2cd09",
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a7fe2d5_3079e1c8",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 42,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-03-29T16:25:15Z",
      "side": 1,
      "message": "\u003e The current solution fails when -Xcompiler-option is missing, but not really an operational issue.\n\nCan you elaborate?\n\nIf -Xcompiler-option is missing then I think it would\u0027ve barfed in dalvikvm anyway?",
      "parentUuid": "6ee09319_1ba6935c",
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ea196f3_40785001",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 63,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-28T09:00:23Z",
      "side": 1,
      "message": "Very sophisticated :) Should we move to python?",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 63,
        "endChar": 1
      },
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "29619fde_fb3e545f",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 63,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-03-28T17:54:55Z",
      "side": 1,
      "message": "as long as you can make it work on device :)\n\nOr we could use adb shell commands...",
      "parentUuid": "7ea196f3_40785001",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 63,
        "endChar": 1
      },
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9e53e331_fd8340eb",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 63,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-03-28T18:34:33Z",
      "side": 1,
      "message": "Agreed too, python would be better if we could have it on the device.\n\nThe other approach would\u0027ve been writing the golem configs in dart and just put --compiler-filter\u003dinterpret-only right before the main class arg.\n\nI think the pain of editing this script (rather than the dart configs) is worth it though because now people could interactively run with profiles easily without knowing all the magic flags (on L139)\n\n(and yet another other option would be not to make \u0027art\u0027 look like a dalvikvm command but to only pass things after a certain parameter , e.g. -- to the main class:\n\n   art ALL_ART_ARGS -- org.main.class ALL_MAIN_ARGS\n\nthen we could trivially append --compile-filter\u003dinterpret-only before the --. it\u0027s probably more user friendly the way it is now though).",
      "parentUuid": "29619fde_fb3e545f",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 63,
        "endChar": 1
      },
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1b1d85fe_85273a0d",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 63,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-28T21:27:43Z",
      "side": 1,
      "message": "Note: I was half-trolling about python :) Obviously Dart would be a far more superior choice.",
      "parentUuid": "9e53e331_fd8340eb",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 63,
        "endChar": 1
      },
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8bb363ab_74fd3fe6",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 149,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-03-28T18:34:33Z",
      "side": 1,
      "message": "Probably if it fails you want to print out the log so we can have it in the golem logs for debugging (it doesn\u0027t capture files, only output)?",
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c4b477bd_4875b579",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 149,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-03-28T19:41:00Z",
      "side": 1,
      "message": "good point",
      "parentUuid": "8bb363ab_74fd3fe6",
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d96c177_907c9eee",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 154,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2017-03-28T09:00:23Z",
      "side": 1,
      "message": "poor mips :-) Sounds like you want to share some variable with line 112.",
      "range": {
        "startLine": 154,
        "startChar": 36,
        "endLine": 154,
        "endChar": 58
      },
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "efb507c6_d4a8bf0e",
        "filename": "tools/art",
        "patchSetId": 9
      },
      "lineNbr": 154,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-03-28T19:41:00Z",
      "side": 1,
      "message": "not sure how to make the shell expansion work with variable, and this looks simpler than iterating over a list.",
      "parentUuid": "5d96c177_907c9eee",
      "range": {
        "startLine": 154,
        "startChar": 36,
        "endLine": 154,
        "endChar": 58
      },
      "revId": "09c5026c568f460e37c8b18460532fc50c0d4c41",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}