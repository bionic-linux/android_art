{
  "comments": [
    {
      "key": {
        "uuid": "901f46d4_b2bfb145",
        "filename": "libartbase/base/memfd.cc",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-09-27T15:36:25Z",
      "side": 1,
      "message": "Wrong order.",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 22,
        "endChar": 18
      },
      "revId": "3edb482d029dc67ea79e7af7d6df84281551b3a4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f5d4ff64_5015e543",
        "filename": "libartbase/base/memfd.cc",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2018-09-27T21:04:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "901f46d4_b2bfb145",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 22,
        "endChar": 18
      },
      "revId": "3edb482d029dc67ea79e7af7d6df84281551b3a4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e73ff53a_bdd58d1e",
        "filename": "libartbase/base/memfd.cc",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1237211
      },
      "writtenOn": "2018-09-27T12:13:15Z",
      "side": 1,
      "message": "Really? This seems odd to me. Are you sure the kernel is actively misbehaving rather than erroring with ENOSYS? It isn\u0027t a bug in the syscall wrapper?",
      "revId": "3edb482d029dc67ea79e7af7d6df84281551b3a4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cbddd74e_2004bd06",
        "filename": "libartbase/base/memfd.cc",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2018-09-27T12:32:56Z",
      "side": 1,
      "message": "Is there anything in the wrapper that stands out? \n\nstrace on the machine exhibiting the crash shows the failure in memfd_create().\n\nThe hack for i386/x86_64 is horrible, but that\u0027s an artifact of the prebuilt glibc.\n\nWe don\u0027t see this crash on later kernels. Perhaps there was shuffling of syscall numbers that\u0027s happened in the interim, I agree it seems odd so a further check is in order there.",
      "parentUuid": "e73ff53a_bdd58d1e",
      "revId": "3edb482d029dc67ea79e7af7d6df84281551b3a4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ac2366fc_3ec69f8b",
        "filename": "libartbase/base/memfd.cc",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-09-27T15:36:25Z",
      "side": 1,
      "message": "How often are we expecting to call this? There should be a comment somewhere that this function isn\u0027t necessarily blazingly fast, or there should be a global setup step initializing a flag.",
      "parentUuid": "cbddd74e_2004bd06",
      "revId": "3edb482d029dc67ea79e7af7d6df84281551b3a4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "207beb78_7f441411",
        "filename": "libartbase/base/memfd.cc",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2018-09-27T21:04:37Z",
      "side": 1,
      "message": "We call this once during the JIT initialization. Comment added to the declaration.\n\nThe SIGSEV in b/11676556 does not repro on the 4.17.4 kernel on the orange pi zero on my desk.\n\nIt does however appear to need both mappings to be flushed otherwise there\u0027s SIGILL. This later observation will need some more investigation.\n\nI saw some changes to the ARM syscall path but haven\u0027t found one that explains the SIGSEGV on 3.14. We could enquire with Linaro.",
      "parentUuid": "ac2366fc_3ec69f8b",
      "revId": "3edb482d029dc67ea79e7af7d6df84281551b3a4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}