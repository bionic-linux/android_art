{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f6f49c50_71195a92",
        "filename": "artd/path_utils.cc",
        "patchSetId": 1
      },
      "lineNbr": 296,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2023-11-14T11:56:37Z",
      "side": 1,
      "message": "Actually, what about looking at this field directly, i.e. `entry.fs_file \u003d\u003d \"none\"`? It\u0027d avoid the assumption on the relation between that and fs_type, and I\u0027m fairly sure a valid mount point can\u0027t be \"none\", without a leading slash.",
      "range": {
        "startLine": 296,
        "startChar": 68,
        "endLine": 296,
        "endChar": 75
      },
      "revId": "ddb860419f249d39fd696edceeec680157223e9c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a9b70197_a3e57433",
        "filename": "artd/path_utils.cc",
        "patchSetId": 1
      },
      "lineNbr": 296,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2023-11-14T12:03:00Z",
      "side": 1,
      "message": "As I mentioned in the CL description of aosp/2827970, there are also some implementations on the Internet that uses an arbitrary string for this field for swap areas. It\u0027s better to ignore it.",
      "parentUuid": "f6f49c50_71195a92",
      "range": {
        "startLine": 296,
        "startChar": 68,
        "endLine": 296,
        "endChar": 75
      },
      "revId": "ddb860419f249d39fd696edceeec680157223e9c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f0d7c38d_8951b452",
        "filename": "artd/path_utils.cc",
        "patchSetId": 1
      },
      "lineNbr": 296,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2023-11-14T12:27:27Z",
      "side": 1,
      "message": "What implementation are those? Are they relevant to Android devices? And can those arbitrary string begin with \"/\" (because I highly doubt real mount points don\u0027t)? The fragility here is that there may be more fs_types that don\u0027t have a mount points. Maybe some OEM has invented a `gzswap` (tm)(pat pend) or something.",
      "parentUuid": "a9b70197_a3e57433",
      "range": {
        "startLine": 296,
        "startChar": 68,
        "endLine": 296,
        "endChar": 75
      },
      "revId": "ddb860419f249d39fd696edceeec680157223e9c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7b750e6e_3cdc31b7",
        "filename": "artd/path_utils.cc",
        "patchSetId": 1
      },
      "lineNbr": 296,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2023-11-14T12:53:06Z",
      "side": 1,
      "message": "According to fstab(5), `fs_vfstype` of a swap area is exactly \"swap\" (https://screenshot.googleplex.com/8U9YVEg59Hr3QQ9). In contrast, `fs_file` of a swap area *should be* \"none\" (https://screenshot.googleplex.com/A34nrPb9j9QFLDF), which in my understanding is a weaker statement. Therefore, checking `fs_vfstype` is less fragile than checking `fs_file`.\n\nIIUC, adding a swap area can be done by adding an entry to fstab. An OEM can put any string in the `fs_file` field. For example, a blogpost suggests putting \"swap\" rather than \"none\", mentioned in https://serverfault.com/q/967852, though it\u0027s against the recommendation in the Linux man page.",
      "parentUuid": "f0d7c38d_8951b452",
      "range": {
        "startLine": 296,
        "startChar": 68,
        "endLine": 296,
        "endChar": 75
      },
      "revId": "ddb860419f249d39fd696edceeec680157223e9c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47f97746_d1edf05d",
        "filename": "artd/path_utils.cc",
        "patchSetId": 1
      },
      "lineNbr": 296,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2023-11-14T13:29:07Z",
      "side": 1,
      "message": "I don\u0027t see the docs stating there\u0027s no mount point only if the fs_type is \"swap\", and that\u0027s what matters. It doesn\u0027t say that mount points are absolute paths either, afaict, but in practice I think that\u0027s a more robust assumption to make. Actually, since `PathStartsWith` makes that assumption anyway why not just leave it at that, i.e. just ignore all entries not starting with \"/\"?\n\nIf you want to check for \"swap\" _in addition_ to that, because of the theoretical possibility that someone would think it to be a great idea to have a slash prefix for the arbitrary fs_file string, then that\u0027s fine too.\n\n(I\u0027m -1 here since I cannot remove the Autosubmit and want to finish this discussion first.)",
      "parentUuid": "7b750e6e_3cdc31b7",
      "range": {
        "startLine": 296,
        "startChar": 68,
        "endLine": 296,
        "endChar": 75
      },
      "revId": "ddb860419f249d39fd696edceeec680157223e9c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}