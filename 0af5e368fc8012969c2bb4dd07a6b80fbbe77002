{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "20908927_f79d71b2",
        "filename": "build/Android.bp",
        "patchSetId": 8
      },
      "lineNbr": 153,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-06-09T14:19:32Z",
      "side": 1,
      "message": "I think this will affect many log messages in dex2oat and other tools as well. Do we want that? Maybe it\u0027s better to set it in defaults for various shared runtime libraries instead? E.g. libartbase, runtime, libdexfile, etc.",
      "range": {
        "startLine": 152,
        "startChar": 8,
        "endLine": 153,
        "endChar": 28
      },
      "revId": "0af5e368fc8012969c2bb4dd07a6b80fbbe77002",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2aab47e_62eed97f",
        "filename": "build/Android.bp",
        "patchSetId": 8
      },
      "lineNbr": 153,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2022-06-10T09:47:46Z",
      "side": 1,
      "message": "Right - you\u0027re saying I\u0027m introducing a regression where currently the tag for dex2oat would always be \"dex2oat\" and now I\u0027m changing it to be ART?\n\nThat would be tricky to resolve though - dex2oat uses libart.so and libart.so will be compiled with the \"art\" tag.\n\nTom, is there a solution for this? Can we make the dex2oat process always use the tag \"dex2oat\"? If not, I\u0027d rather we be consistent, so either:\n1) Use the \u0027art\u0027 tag (this CL)\n2) Use the process name tag (the current behavior)",
      "parentUuid": "20908927_f79d71b2",
      "range": {
        "startLine": 152,
        "startChar": 8,
        "endLine": 153,
        "endChar": 28
      },
      "revId": "0af5e368fc8012969c2bb4dd07a6b80fbbe77002",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b0bc97ec_d2c3b03b",
        "filename": "build/Android.bp",
        "patchSetId": 8
      },
      "lineNbr": 153,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-06-10T11:30:31Z",
      "side": 1,
      "message": "That\u0027s also an aspect, but as you say, it\u0027s tricky to resolve, and with the argument b/234733378 I suppose the dex2oat tag on such messages from libart are considered regressions as well(*).\n\nHowever, I was more thinking that this defaults get inherited into all compilation units, not only libart, libdexfile, etc. So we\u0027d get the \"art\" tag in top level messages in dex2oat/*.cc as well.\n\n*) Then it\u0027s another question whether it\u0027s a good idea to fix a regression that occurred as far back as 2017. Arguably it\u0027d be a new regression for everything that has started to depend on the de-facto tags after that date.",
      "parentUuid": "e2aab47e_62eed97f",
      "range": {
        "startLine": 152,
        "startChar": 8,
        "endLine": 153,
        "endChar": 28
      },
      "revId": "0af5e368fc8012969c2bb4dd07a6b80fbbe77002",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6a1d90fd_1449bed0",
        "filename": "build/Android.bp",
        "patchSetId": 8
      },
      "lineNbr": 153,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2022-06-11T00:23:37Z",
      "side": 1,
      "message": "dex2oat as the tag for that process is part of the regression, though I understand why that process is special and may want to be tagged differently. It should be possible to keep dex2oat for that process and use art for others:\n\nIf I understand correctly:\n* dex2oat gets its tag from its process name and not a LOG_TAG define? \n* It is built as a separate executable so it should be able to specify its own LOG_TAG in it\u0027s Android.bp\n* The caveat is that this CL specifies LOG_TAG as the default that dex2oat uses, so it would need to override the default\n\nI believe this can be done by adding the below to the Android.bp that builds dex2oat\n\"-ULOG_TAG\"\n\"-DLOG_TAG\u003d\\\"dex2oat\\\"\"\n\nI\u0027m basing that belief on how target specific #define overrides are done, for example here: https://cs.android.com/android/platform/superproject/+/master:system/core/init/Android.bp;l\u003d128.\n\nIf that doesn\u0027t work the Soong team could be consulted.",
      "parentUuid": "b0bc97ec_d2c3b03b",
      "range": {
        "startLine": 152,
        "startChar": 8,
        "endLine": 153,
        "endChar": 28
      },
      "revId": "0af5e368fc8012969c2bb4dd07a6b80fbbe77002",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}