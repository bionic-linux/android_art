{
  "comments": [
    {
      "key": {
        "uuid": "d18b4a85_9d1c4ff9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2020-02-05T20:16:09Z",
      "side": 1,
      "message": "I haven\u0027t tested this yet, but I think this probably doesn\u0027t work yet because of the TODO in https://android-review.googlesource.com/c/platform/art/+/1227177/1/tools/buildbot-sync.sh#156. Will try that case ASAP.",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 73
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3305dfed_5a720458",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2020-02-06T20:01:21Z",
      "side": 1,
      "message": "I verified that this use case works since PS2.",
      "parentUuid": "d18b4a85_9d1c4ff9",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 73
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "efdfd98a_db4fde7a",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-02-06T05:04:56Z",
      "side": 1,
      "message": "+jooyung \n\nThese won\u0027t be necessary when we move these into the VNDK apex.\n\nFor now, it\u0027s fine to have these here. But I wonder if these are needed to run ART. They are for vendor code.",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 87,
        "endChar": 100
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2ba29a9_1fb395b6",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2020-02-06T06:16:29Z",
      "side": 1,
      "message": "The references to llndk/vndksp/vndkcore/vndkprivate files are going to be switched to the ones in vndk apex while others (vndkcorevariant and sanitizer) are still in /system/etc. But until then, these look fine. but, what about com.android.vndk.current?\n\nBy the way, all of these must be in \"required\" of \"linkerconfig\" module. then we don\u0027t have to list them here. Kiyoung, what do you think?",
      "parentUuid": "efdfd98a_db4fde7a",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 87,
        "endChar": 100
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a04f46a2_6e9dd871",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2020-02-06T20:01:21Z",
      "side": 1,
      "message": "\u003e \u003e +jooyung \n\u003e \u003e\n\u003e \u003e These won\u0027t be necessary when we move these into the VNDK apex.\n\u003e \u003e\n\u003e \u003e For now, it\u0027s fine to have these here. But I wonder if these are needed to run ART. They are for vendor code.\n\n\u003e The references to llndk/vndksp/vndkcore/vndkprivate files are going to be switched to the ones in vndk apex while others (vndkcorevariant and sanitizer) are still in /system/etc. But until then, these look fine. but, what about com.android.vndk.current?\n\nThanks for the update. Let us know when you intend to make those changes, so that we can adjust our build rules.\n\n\u003e By the way, all of these must be in \"required\" of \"linkerconfig\" module. then we don\u0027t have to list them here. Kiyoung, what do you think?\n\nIs this already the case? I didn\u0027t see anything in linkerconfig\u0027s build rules (system/linkerconfig/Android.bp) about this.",
      "parentUuid": "b2ba29a9_1fb395b6",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 87,
        "endChar": 100
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9b4f8bf6_b3d21c5f",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2020-02-07T04:53:41Z",
      "side": 1,
      "message": "\u003e Thanks for the update. Let us know when you intend to make those changes, so that we can adjust our build rules.\n\nSure!\n\n\u003e Is this already the case? I didn\u0027t see anything in linkerconfig\u0027s build rules (system/linkerconfig/Android.bp) about this.\n\nNot yet. need to fix it.",
      "parentUuid": "a04f46a2_6e9dd871",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 87,
        "endChar": 100
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4009516f_36ccc2c9",
        "filename": "tools/buildbot-sync.sh",
        "patchSetId": 1
      },
      "lineNbr": 126,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-02-06T05:04:56Z",
      "side": 1,
      "message": "I am not sure if this function is needed. We don\u0027t need to care about host anymore.\nAll ld.config.txt files needed for guest is created by linkerconfig.",
      "range": {
        "startLine": 84,
        "startChar": 0,
        "endLine": 126,
        "endChar": 1
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1dc7c14c_9b0f65d0",
        "filename": "tools/buildbot-sync.sh",
        "patchSetId": 1
      },
      "lineNbr": 126,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2020-02-06T20:01:21Z",
      "side": 1,
      "message": "This is actually needed when running on a \"host device\" running an OS older than Android R (which is one of our use cases).",
      "parentUuid": "4009516f_36ccc2c9",
      "range": {
        "startLine": 84,
        "startChar": 0,
        "endLine": 126,
        "endChar": 1
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c1395578_526f31e5",
        "filename": "tools/buildbot-sync.sh",
        "patchSetId": 1
      },
      "lineNbr": 126,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-02-07T05:15:11Z",
      "side": 1,
      "message": "hmm, is it? linkerconfig (built from R) will generate ld.config.txt that corresponds to the vendor.img (which might be pre-R) of the host device as long as ro.vndk.* sysprops are correctly set.\n\n+kiyoungkim to confirm.",
      "parentUuid": "1dc7c14c_9b0f65d0",
      "range": {
        "startLine": 84,
        "startChar": 0,
        "endLine": 126,
        "endChar": 1
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29fe4d37_ff1dde2e",
        "filename": "tools/buildbot-sync.sh",
        "patchSetId": 1
      },
      "lineNbr": 126,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2020-02-07T12:48:55Z",
      "side": 1,
      "message": "Note: \"host system\" here means the system of the device used for testing, not \"host\" in the usual Android Build system parlance (i.e. the system on which Android is built) – see lines 57–65 (sorry about the confusing terminology).\n\nThe implementation of function `get_ld_host_system_config_file_path` loosely follows the implementation of `get_ld_config_file_path` in the Bionic linker (https://osscs.corp.google.com/android/_/android/platform/bionic/+/a399ede44ec4aa81e4b4cf655496e4618e94ad62:linker/linker.cpp;l\u003d3475-3517;drc\u003da399ede44ec4aa81e4b4cf655496e4618e94ad62). I\u0027ve tried to keep that \"synchronization\" in that CL, but I think you are right that we now should be able to just assume that `/linkerconfig/ld.config.txt` is\n  1. always generated by `/system/bin/linkerconfig`; and\n  2. always being picked up by the linker.\n\nTo keep things clearer, I\u0027ve implemented your suggestion in a follow-up CL (https://android-review.googlesource.com/c/platform/art/+/1229606). (I\u0027ve also did some cleanup in another CL, https://android-review.googlesource.com/c/platform/art/+/1229605).",
      "parentUuid": "c1395578_526f31e5",
      "range": {
        "startLine": 84,
        "startChar": 0,
        "endLine": 126,
        "endChar": 1
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ac665d7f_76c7ceb4",
        "filename": "tools/buildbot-sync.sh",
        "patchSetId": 1
      },
      "lineNbr": 126,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-02-08T03:23:25Z",
      "side": 1,
      "message": "Yep,  I know the meaning of host in this context. aosp/1229606 looks good to me. Thanks!",
      "parentUuid": "29fe4d37_ff1dde2e",
      "range": {
        "startLine": 84,
        "startChar": 0,
        "endLine": 126,
        "endChar": 1
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eacccc98_9d6ffc09",
        "filename": "tools/buildbot-sync.sh",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1413436
      },
      "writtenOn": "2020-02-06T01:09:49Z",
      "side": 1,
      "message": "If ART test environment does not require any of these variables, we can update linkerconfig to generate linker configuration specific to this env (as a future work 😊 ).",
      "range": {
        "startLine": 156,
        "startChar": 0,
        "endLine": 156,
        "endChar": 80
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92006007_6bddedd6",
        "filename": "tools/buildbot-sync.sh",
        "patchSetId": 1
      },
      "lineNbr": 156,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2020-02-06T20:01:21Z",
      "side": 1,
      "message": "Maybe; but I think it is usually better not to have special cases just for testing.",
      "parentUuid": "eacccc98_9d6ffc09",
      "range": {
        "startLine": 156,
        "startChar": 0,
        "endLine": 156,
        "endChar": 80
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0d4e1b0f_f1eb0ce2",
        "filename": "tools/buildbot-sync.sh",
        "patchSetId": 1
      },
      "lineNbr": 192,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-02-06T05:04:56Z",
      "side": 1,
      "message": "For the same reason, I don\u0027t think this adjustment step is required.",
      "range": {
        "startLine": 174,
        "startChar": 0,
        "endLine": 192,
        "endChar": 2
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21eb9a20_c2ff7d46",
        "filename": "tools/buildbot-sync.sh",
        "patchSetId": 1
      },
      "lineNbr": 192,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2020-02-06T20:01:21Z",
      "side": 1,
      "message": "Ditto.",
      "parentUuid": "0d4e1b0f_f1eb0ce2",
      "range": {
        "startLine": 174,
        "startChar": 0,
        "endLine": 192,
        "endChar": 2
      },
      "revId": "c88838dd918ad139f9ee550bc093d00c64ebc11b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}