{
  "comments": [
    {
      "key": {
        "uuid": "48631fc4_57038c6a",
        "filename": "compiler/dex/quick/arm/int_arm.cc",
        "patchSetId": 3
      },
      "lineNbr": 148,
      "author": {
        "id": 1001578
      },
      "writtenOn": "2013-12-19T18:50:06Z",
      "side": 1,
      "message": "It doesn\u0027t necessarily have to be part of this CL, but any compiler bug fixes should, if practical, include a regression test.  A good place to put this one is art/test/083-compiler-regressions.",
      "revId": "368fd5888bc98690c3fc5ecc9b3b5fefeda25cdc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e871338d_d4cddc4b",
        "filename": "compiler/dex/quick/arm/utility_arm.cc",
        "patchSetId": 3
      },
      "lineNbr": 213,
      "author": {
        "id": 1001578
      },
      "writtenOn": "2013-12-19T18:50:06Z",
      "side": 1,
      "message": "My fault here for not adding a comment previously, but this should be a kThumb2BCond for compilation time reasons.  It originally was a kThumbBCond, but the reach of a 16-bit Thumb1 conditional branch is tiny and failure to reach at assembly time causes another assembly pass.  Statistics showed that something on the order of 20% of assembly retries were because of kThumbBConds failing to reach, while the number of reaching kThumbBConds was relatively small.  The reduction in compile time easily outweighed the very small reduction of code size.\n\nCould you restore the kThumb2BCond, and add the command I should have added about the compile time savings?  Thanks.",
      "revId": "368fd5888bc98690c3fc5ecc9b3b5fefeda25cdc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "884ef754_b1e9406e",
        "filename": "compiler/dex/quick/arm/utility_arm.cc",
        "patchSetId": 3
      },
      "lineNbr": 213,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2013-12-19T19:04:12Z",
      "side": 1,
      "message": "I expected some added compile time but didn\u0027t expect it to be substantial.",
      "parentUuid": "e871338d_d4cddc4b",
      "revId": "368fd5888bc98690c3fc5ecc9b3b5fefeda25cdc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c86e2fb0_b664e6fb",
        "filename": "compiler/dex/quick/arm/utility_arm.cc",
        "patchSetId": 3
      },
      "lineNbr": 213,
      "author": {
        "id": 1001578
      },
      "writtenOn": "2013-12-19T19:20:42Z",
      "side": 1,
      "message": "It surprised me a bit as well.  I had a similar issue with cbz/cbnz - but those were frequent enough that I did not want to stop using them.  Instead I added a mechanism to estimate the target distance and guess at compile time.  It would be possible to do the same trick here (though target is often NULL in practice), but again the number of reaching kThumbBConds was really small so were aren\u0027t losing much by just doing kThumb2BConds always.",
      "parentUuid": "884ef754_b1e9406e",
      "revId": "368fd5888bc98690c3fc5ecc9b3b5fefeda25cdc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a832dbd0_ea2e6711",
        "filename": "compiler/dex/quick/arm/utility_arm.cc",
        "patchSetId": 3
      },
      "lineNbr": 213,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2013-12-19T19:31:33Z",
      "side": 1,
      "message": "I think it would be much better to rewrite ArmMir2Lir::AssembleLIR() to do the fixup in one pass and the encoding in another pass. I don\u0027t see any advantage in the single pass approach.",
      "parentUuid": "c86e2fb0_b664e6fb",
      "revId": "368fd5888bc98690c3fc5ecc9b3b5fefeda25cdc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c8438f32_2b73192f",
        "filename": "compiler/dex/quick/arm/utility_arm.cc",
        "patchSetId": 3
      },
      "lineNbr": 213,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2013-12-19T20:16:15Z",
      "side": 1,
      "message": "Added the comment and reverted all related changes. This may be revisited later.",
      "parentUuid": "a832dbd0_ea2e6711",
      "revId": "368fd5888bc98690c3fc5ecc9b3b5fefeda25cdc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}