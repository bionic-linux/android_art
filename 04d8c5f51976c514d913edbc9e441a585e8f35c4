{
  "comments": [
    {
      "key": {
        "uuid": "5cd96e3d_1f2c434b",
        "filename": "runtime/thread.cc",
        "patchSetId": 2
      },
      "lineNbr": 536,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-03-18T15:34:22Z",
      "side": 1,
      "message": "Not your comment, but I don\u0027t understand this. Why is the stack not mapped? The comment leads to believe we are calling this method twice, which sounds wrong.",
      "range": {
        "startLine": 536,
        "startChar": 15,
        "endLine": 536,
        "endChar": 82
      },
      "revId": "04d8c5f51976c514d913edbc9e441a585e8f35c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc14e289_6b82d22b",
        "filename": "runtime/thread.cc",
        "patchSetId": 2
      },
      "lineNbr": 536,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2016-03-18T15:37:01Z",
      "side": 1,
      "message": "maybe \"the main thread\u0027s stack\" would help?\n\nor is the problem that it\u0027s not widely known that the main thread\u0027s stack is mapped in on-demand? (in which case \"the main thread\u0027s stack is not _yet_ mapped _because it\u0027s mapped in on-demand_).\"",
      "parentUuid": "5cd96e3d_1f2c434b",
      "range": {
        "startLine": 536,
        "startChar": 15,
        "endLine": 536,
        "endChar": 82
      },
      "revId": "04d8c5f51976c514d913edbc9e441a585e8f35c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc14e289_4e30c43e",
        "filename": "runtime/thread.cc",
        "patchSetId": 2
      },
      "lineNbr": 536,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2016-03-18T16:03:02Z",
      "side": 1,
      "message": "Yup, it was unexpected to all of us, and dallison tried for quite a while to figure this out.\n\nNicolas, the comment on why is below.\n\nI guess I need to refactor the comments yet another time...",
      "parentUuid": "fc14e289_6b82d22b",
      "range": {
        "startLine": 536,
        "startChar": 15,
        "endLine": 536,
        "endChar": 82
      },
      "revId": "04d8c5f51976c514d913edbc9e441a585e8f35c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc14e289_9fab04ba",
        "filename": "runtime/thread.cc",
        "patchSetId": 2
      },
      "lineNbr": 536,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2016-03-18T21:08:14Z",
      "side": 1,
      "message": "I don\u0027t yet understand why we have to do this.  Why can\u0027t we just explicitly map the protected region while leaving the rest of the stack unmapped?",
      "parentUuid": "fc14e289_4e30c43e",
      "range": {
        "startLine": 536,
        "startChar": 15,
        "endLine": 536,
        "endChar": 82
      },
      "revId": "04d8c5f51976c514d913edbc9e441a585e8f35c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc14e289_30995d95",
        "filename": "runtime/thread.cc",
        "patchSetId": 2
      },
      "lineNbr": 536,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2016-03-18T22:49:28Z",
      "side": 1,
      "message": "See b/27718174#comment10 for the gory details, but the short version is that VM_GROWSDOWN mappings (like the main stack) have strange behavior.  The kernel keeps a virtual guard page at the end of the VM_GROWSDOWN mapping - if you map a guard page manually, the kernel will fault at the page before the guard page.",
      "parentUuid": "fc14e289_9fab04ba",
      "range": {
        "startLine": 536,
        "startChar": 15,
        "endLine": 536,
        "endChar": 82
      },
      "revId": "04d8c5f51976c514d913edbc9e441a585e8f35c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fce942d0_bc65218e",
        "filename": "runtime/thread.cc",
        "patchSetId": 2
      },
      "lineNbr": 540,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-03-18T15:34:22Z",
      "side": 1,
      "message": "Why do we we need to map in the stack? Please add a comment.",
      "range": {
        "startLine": 540,
        "startChar": 7,
        "endLine": 540,
        "endChar": 40
      },
      "revId": "04d8c5f51976c514d913edbc9e441a585e8f35c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc14e289_ba29aed0",
        "filename": "runtime/thread.cc",
        "patchSetId": 2
      },
      "lineNbr": 566,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2016-03-18T21:08:14Z",
      "side": 1,
      "message": "Should this also be conditional?  Presumably this is also expensive if it actually unmaps memory?",
      "range": {
        "startLine": 566,
        "startChar": 2,
        "endLine": 566,
        "endChar": 49
      },
      "revId": "04d8c5f51976c514d913edbc9e441a585e8f35c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}