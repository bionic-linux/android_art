{
  "comments": [
    {
      "key": {
        "uuid": "6243e950_186ac97b",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 1
      },
      "lineNbr": 152,
      "author": {
        "id": 1057373
      },
      "writtenOn": "2016-02-18T23:29:55Z",
      "side": 1,
      "message": "What if the odex file is compiled and up to date, but the oat file is extract only? Do you still want to return kOatIsExtractOnly?",
      "range": {
        "startLine": 150,
        "startChar": 0,
        "endLine": 152,
        "endChar": 5
      },
      "revId": "a57144cdafdf274e438baf56e44bc6e4e7382358",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "02d06de3_6c9b3b90",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 1
      },
      "lineNbr": 152,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2016-02-19T00:11:41Z",
      "side": 1,
      "message": "I don\u0027t think that can actually happen.\nAnd in general, can we end up having an oat and an odex file at the same time?",
      "parentUuid": "6243e950_186ac97b",
      "range": {
        "startLine": 150,
        "startChar": 0,
        "endLine": 152,
        "endChar": 5
      },
      "revId": "a57144cdafdf274e438baf56e44bc6e4e7382358",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "22aad153_45b3aa35",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 1
      },
      "lineNbr": 152,
      "author": {
        "id": 1057373
      },
      "writtenOn": "2016-02-19T00:40:51Z",
      "side": 1,
      "message": "You can have both an oat and an odex file if the app was a pre-compiled system app that has since received an update. I think this code could be restructured to make it more clear what the distinction is between kOatIsExtractOnly and kNoDexOptNeeded; but I need to think about it a little bit.",
      "parentUuid": "02d06de3_6c9b3b90",
      "range": {
        "startLine": 150,
        "startChar": 0,
        "endLine": 152,
        "endChar": 5
      },
      "revId": "a57144cdafdf274e438baf56e44bc6e4e7382358",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "428185c7_3689f8e2",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 1
      },
      "lineNbr": 152,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2016-02-19T12:05:06Z",
      "side": 1,
      "message": "If the app was updated then we should not even look at its precompiled odex file. That would be wrong since it\u0027s another version. If that happens that\u0027s a bug we need to fix.\n\nI will rename the flags to better express the intention.",
      "parentUuid": "22aad153_45b3aa35",
      "range": {
        "startLine": 150,
        "startChar": 0,
        "endLine": 152,
        "endChar": 5
      },
      "revId": "a57144cdafdf274e438baf56e44bc6e4e7382358",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "021f8d56_3d09f30b",
        "filename": "runtime/oat_file_assistant.h",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1057373
      },
      "writtenOn": "2016-02-18T23:29:55Z",
      "side": 1,
      "message": "Presumably there is a corresponding libcore change?",
      "range": {
        "startLine": 75,
        "startChar": 21,
        "endLine": 75,
        "endChar": 66
      },
      "revId": "a57144cdafdf274e438baf56e44bc6e4e7382358",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "223f31ea_1d9b9390",
        "filename": "runtime/oat_file_assistant.h",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2016-02-19T00:11:41Z",
      "side": 1,
      "message": "yes, go/ag/203650",
      "parentUuid": "021f8d56_3d09f30b",
      "range": {
        "startLine": 75,
        "startChar": 21,
        "endLine": 75,
        "endChar": 66
      },
      "revId": "a57144cdafdf274e438baf56e44bc6e4e7382358",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "62b849a7_6736f2e6",
        "filename": "runtime/oat_file_assistant.h",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1057373
      },
      "writtenOn": "2016-02-19T00:40:51Z",
      "side": 1,
      "message": "typo? Do you mean go/aog/203660?\n\nPartly I was asking to get a better sense of who is doing something different based on this result.",
      "parentUuid": "223f31ea_1d9b9390",
      "range": {
        "startLine": 75,
        "startChar": 21,
        "endLine": 75,
        "endChar": 66
      },
      "revId": "a57144cdafdf274e438baf56e44bc6e4e7382358",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "421b45b8_e64f1eab",
        "filename": "runtime/oat_file_assistant.h",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2016-02-19T12:05:06Z",
      "side": 1,
      "message": "see go/ag/868994",
      "parentUuid": "62b849a7_6736f2e6",
      "range": {
        "startLine": 75,
        "startChar": 21,
        "endLine": 75,
        "endChar": 66
      },
      "revId": "a57144cdafdf274e438baf56e44bc6e4e7382358",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c23655de_7881d925",
        "filename": "runtime/oat_file_assistant.h",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1057373
      },
      "writtenOn": "2016-02-18T23:29:55Z",
      "side": 1,
      "message": "kOatIsExtractOnly makes sense for an individual oat file. I would expect to see this as an entry in the OatStatus enum.\n\nHow do you interpret kOatIsExtractOnly as an overall \u0027DexOptNeeded\u0027 status?",
      "range": {
        "startLine": 76,
        "startChar": 5,
        "endLine": 76,
        "endChar": 26
      },
      "revId": "a57144cdafdf274e438baf56e44bc6e4e7382358",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "22681102_3596706a",
        "filename": "runtime/oat_file_assistant.h",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2016-02-19T00:11:41Z",
      "side": 1,
      "message": "I should move some of the comments from the cc file here. From the runtime perspective an ExtractOnly oat file is UpToDate as there is no need for relocation of compilation. That\u0027s why I didn\u0027t bother adding it to the OatStatus enum.\n\nThe status is only useful for the caller of DexOptNeeded as a refinement of UpToDate. The caller can decide if it wants to do a \"proper\" compilation or not. This unlocks the possibility  to compile apks even if we only extracted them before. See the referred bug for when this is desirable.",
      "parentUuid": "c23655de_7881d925",
      "range": {
        "startLine": 76,
        "startChar": 5,
        "endLine": 76,
        "endChar": 26
      },
      "revId": "a57144cdafdf274e438baf56e44bc6e4e7382358",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "02a94d5f_c4223e8b",
        "filename": "runtime/oat_file_assistant.h",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1057373
      },
      "writtenOn": "2016-02-19T00:40:51Z",
      "side": 1,
      "message": "So it is a refinement of UpToDate into two possibilities:\n1. ExtractOnly UpToDate\n2. Compiled UpToDate\n\nCould we change the names so it\u0027s clear the two options are disjoint? Perhaps:\n\nkNoDexOptNeeded for (2)\nkDexOptOptional for (1)\n\nMy understanding is that ExtractOnly was added so that the package manager would not compile things in this state, but the bug suggests you want it to compile in this state. Can you clarify where in the package manager it is decided to treat ExtractOnly as not needing compilation, and where it is decided to treat ExtractOnly as needing compilation? That is, if you get kDexOptOptional, who decides when to run dexopt and how do they make that decision?",
      "parentUuid": "22681102_3596706a",
      "range": {
        "startLine": 76,
        "startChar": 5,
        "endLine": 76,
        "endChar": 26
      },
      "revId": "a57144cdafdf274e438baf56e44bc6e4e7382358",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6224c9f3_4741ce82",
        "filename": "runtime/oat_file_assistant.h",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2016-02-19T12:05:06Z",
      "side": 1,
      "message": "ExtractOnly is really a \"quirk\" to improve performance. It kinda messes previous runtime assumptions. An extract-only apk is up to date from the runtime perspective but depending on the use case the package manager might consider that\u0027s not good enough. I will re-name the flags to better capture the new heeds.",
      "parentUuid": "02a94d5f_c4223e8b",
      "range": {
        "startLine": 76,
        "startChar": 5,
        "endLine": 76,
        "endChar": 26
      },
      "revId": "a57144cdafdf274e438baf56e44bc6e4e7382358",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}