{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "cf3b332f_71d906df",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2021-02-17T05:08:41Z",
      "side": 1,
      "message": "Only a partial review.",
      "revId": "5793db034579665e22ac43f68c671787eef6e716",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a10349e3_8c317740",
        "filename": "runtime/oat_file.cc",
        "patchSetId": 4
      },
      "lineNbr": 1606,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2021-02-17T05:08:41Z",
      "side": 1,
      "message": "line too long",
      "range": {
        "startLine": 1606,
        "startChar": 0,
        "endLine": 1606,
        "endChar": 110
      },
      "revId": "5793db034579665e22ac43f68c671787eef6e716",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3ab44998_d838c5d0",
        "filename": "runtime/oat_file.cc",
        "patchSetId": 4
      },
      "lineNbr": 1606,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-02-23T10:45:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a10349e3_8c317740",
      "range": {
        "startLine": 1606,
        "startChar": 0,
        "endLine": 1606,
        "endChar": 110
      },
      "revId": "5793db034579665e22ac43f68c671787eef6e716",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f3efb3b_54ee7473",
        "filename": "runtime/oat_file.cc",
        "patchSetId": 4
      },
      "lineNbr": 2014,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2021-02-17T05:08:41Z",
      "side": 1,
      "message": "hmm, why? isn\u0027t the vdex being here enough to mark the class verified?",
      "range": {
        "startLine": 2011,
        "startChar": 4,
        "endLine": 2014,
        "endChar": 0
      },
      "revId": "5793db034579665e22ac43f68c671787eef6e716",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9b368513_d6843769",
        "filename": "runtime/oat_file.cc",
        "patchSetId": 4
      },
      "lineNbr": 2014,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-02-23T10:45:56Z",
      "side": 1,
      "message": "No, we need to do assignability type checks, which we can only do with eg having the mutator lock and the class loader. VdexFile::ComputeClassStatus will be able to do so.",
      "parentUuid": "4f3efb3b_54ee7473",
      "range": {
        "startLine": 2011,
        "startChar": 4,
        "endLine": 2014,
        "endChar": 0
      },
      "revId": "5793db034579665e22ac43f68c671787eef6e716",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a840fcd7_7e5b59a8",
        "filename": "runtime/oat_file.cc",
        "patchSetId": 4
      },
      "lineNbr": 2014,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2021-02-26T00:15:41Z",
      "side": 1,
      "message": "add an extra \"because we need to do the assignability type checks\"",
      "parentUuid": "9b368513_d6843769",
      "range": {
        "startLine": 2011,
        "startChar": 4,
        "endLine": 2014,
        "endChar": 0
      },
      "revId": "5793db034579665e22ac43f68c671787eef6e716",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a7fdf2c5_6bdf2471",
        "filename": "runtime/oat_file.cc",
        "patchSetId": 4
      },
      "lineNbr": 2014,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-02-26T09:26:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a840fcd7_7e5b59a8",
      "range": {
        "startLine": 2011,
        "startChar": 4,
        "endLine": 2014,
        "endChar": 0
      },
      "revId": "5793db034579665e22ac43f68c671787eef6e716",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "05e89445_61597166",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 4
      },
      "lineNbr": 895,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2021-02-17T05:08:41Z",
      "side": 1,
      "message": "I think there are some subtleties here: this is ok only for vdex verified against boot class path. From a generic point of view, we may have a split apk which expects a certain context (like the primary apk be in the class path) for proper verification. And according to the current logic, if there\u0027s an I/O error when reading the odex file, we will try to load only the vdex.\n\nNot sure how much we want to cover this corner cases though...",
      "range": {
        "startLine": 895,
        "startChar": 4,
        "endLine": 895,
        "endChar": 69
      },
      "revId": "5793db034579665e22ac43f68c671787eef6e716",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "46f52e18_38be67b9",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 4
      },
      "lineNbr": 895,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-02-23T10:45:56Z",
      "side": 1,
      "message": "The vdex file is independent of any context. The assignability checks in the vdex file are generic (they are the ones found when doing verification), and we encode all of them (even the ones which should always hold true, like a bootclasspath class extends another bootclasspath class).",
      "parentUuid": "05e89445_61597166",
      "range": {
        "startLine": 895,
        "startChar": 4,
        "endLine": 895,
        "endChar": 69
      },
      "revId": "5793db034579665e22ac43f68c671787eef6e716",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}