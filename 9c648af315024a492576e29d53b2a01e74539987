{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d6dd24ca_123761dd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1793801
      },
      "writtenOn": "2020-12-09T00:27:42Z",
      "side": 1,
      "message": "SIGUSR2 is used internally for hprof (heap dump).\nI would like to avoid using that keyword because the mainline code upstream of the code that uses SIGUSR2 is scheduled.\n\nPlease let me know if you need to use a different signal name\n\nShould I delete the comment \"WINCH\"?",
      "revId": "9c648af315024a492576e29d53b2a01e74539987",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5a75596b_7800b7d2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2020-12-09T22:56:49Z",
      "side": 1,
      "message": "+Elliott FYI.",
      "revId": "9c648af315024a492576e29d53b2a01e74539987",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8ff60d18_2d8fd32c",
        "filename": "runtime/signal_catcher.h",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2020-12-08T23:24:22Z",
      "side": 1,
      "message": "How about we handle SIGUSR2 instead of WINCH?",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 30
      },
      "revId": "9c648af315024a492576e29d53b2a01e74539987",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "21336c68_3ab5bf57",
        "filename": "runtime/signal_catcher.h",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1793801
      },
      "writtenOn": "2020-12-09T00:27:42Z",
      "side": 1,
      "message": "SIGUSR2 is used internally for hprof (heap dump).\nI would like to avoid using that keyword because the mainline code upstream of the code that uses SIGUSR2 is scheduled.\n\nPlease let me know if you need to use a different signal name\n\nShould I delete the comment \"WINCH\"?",
      "parentUuid": "8ff60d18_2d8fd32c",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 30
      },
      "revId": "9c648af315024a492576e29d53b2a01e74539987",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1925089e_feb91bdb",
        "filename": "runtime/signal_catcher.h",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2020-12-09T22:56:49Z",
      "side": 1,
      "message": "I prefer we don\u0027t use a reserved signal for it. \n\nSIGUSR* group is an easy compromise usually.\n\nElliott suggested we can also carve out a reserved signal for this which I think it\u0027s a good idea. See https://cs.android.com/android/platform/superproject/+/master:bionic/libc/platform/bionic/reserved_signals.h;l\u003d37 as how to add one.",
      "parentUuid": "21336c68_3ab5bf57",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 30
      },
      "revId": "9c648af315024a492576e29d53b2a01e74539987",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20a2767f_1bcf3380",
        "filename": "runtime/signal_catcher.h",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1793801
      },
      "writtenOn": "2020-12-10T01:54:28Z",
      "side": 1,
      "message": "We have already tried before but it doesn\u0027t work for 32 bit apps due to the code below.\n\ntemplate \u003ctypename SigSetT\u003e\nint SigAddSet(SigSetT* set, int sig) {\n  int bit \u003d sig - 1; // Signal numbers start at 1, but bit positions start at 0.\n  unsigned long* local_set \u003d reinterpret_cast\u003cunsigned long*\u003e(set);\n  if (set \u003d\u003d nullptr || bit \u003c 0 || bit \u003e\u003d static_cast\u003cint\u003e(8*sizeof(*set))) {\n    errno \u003d EINVAL;\n    return -1;\n  }\n  local_set[bit / LONG_BIT] |\u003d 1UL \u003c\u003c (bit % LONG_BIT);\n  return 0;\n}\n\nin 32bit apps, typename SigSetT is int(32bit), so sizeof(*set) is 4\nadd a signal bigger than 32 for signalcatcher to catch in 32bit apps that is not allowed",
      "parentUuid": "1925089e_feb91bdb",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 30
      },
      "revId": "9c648af315024a492576e29d53b2a01e74539987",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5bab400_0b4e00e7",
        "filename": "runtime/signal_catcher.h",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-12-10T04:28:18Z",
      "side": 1,
      "message": "aye, but that function is a template for a reason :-)\n\nif you have 32-bit code that needs to use RT signals, add \"64\" to the type and function names (so sigset_t -\u003e sigset64_t and sigaddset -\u003e sigaddset64 and so on).",
      "parentUuid": "20a2767f_1bcf3380",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 30
      },
      "revId": "9c648af315024a492576e29d53b2a01e74539987",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "18fe8710_49c2579b",
        "filename": "runtime/signal_catcher.h",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1793801
      },
      "writtenOn": "2020-12-10T06:21:46Z",
      "side": 1,
      "message": "Dear Google\n\nsorry we just call \"signals.Add(SIGSAVEPRF);\" in the runtime/runtime.cc\n//#define SIGSAVEPRF 28  //WINCH\n\nand it calls \"if (sigaddset(\u0026set_, signal) \u003d\u003d -1) {\" at the end. \n\nWe don\u0027t have a chance to use sigset64_t or sigaddset64, \nThe sigset_t value is decieded according to whether the platform is 32bit or 64bit.\n\nThis is why we would like to use the value 28",
      "parentUuid": "a5bab400_0b4e00e7",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 30
      },
      "revId": "9c648af315024a492576e29d53b2a01e74539987",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6ca9654_26ce0c8b",
        "filename": "runtime/signal_catcher.h",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2020-12-11T02:18:46Z",
      "side": 1,
      "message": "libsigcain forwards the call to sigaddset64:\n\nhttps://cs.android.com/android/platform/superproject/+/master:art/sigchainlib/sigchain.cc;l\u003d78",
      "parentUuid": "18fe8710_49c2579b",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 30
      },
      "revId": "9c648af315024a492576e29d53b2a01e74539987",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df35feef_002cb505",
        "filename": "runtime/signal_catcher.h",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1245820
      },
      "writtenOn": "2020-12-17T00:48:29Z",
      "side": 1,
      "message": "We tried to add a new signal to reserved_signals.h. The problem that occurred in the 32bit system was described in the partnerissuetracker system. \nplease check.",
      "parentUuid": "e6ca9654_26ce0c8b",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 30
      },
      "revId": "9c648af315024a492576e29d53b2a01e74539987",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19931798_a6cef647",
        "filename": "runtime/signal_catcher.h",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2020-12-17T00:51:06Z",
      "side": 1,
      "message": "you\u0027ll need to switch to sigset64_t etc.",
      "parentUuid": "df35feef_002cb505",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 30
      },
      "revId": "9c648af315024a492576e29d53b2a01e74539987",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4794e956_c883f2e7",
        "filename": "runtime/signal_catcher.h",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1245820
      },
      "writtenOn": "2020-12-17T00:58:51Z",
      "side": 1,
      "message": "Can you see and talk to us at https://partnerissuetracker.corp.google.com/issues/172588429?\n\nWe\u0027re not sure where to use sigset64_t.",
      "parentUuid": "19931798_a6cef647",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 30
      },
      "revId": "9c648af315024a492576e29d53b2a01e74539987",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}