{
  "comments": [
    {
      "key": {
        "uuid": "b3246186_562b6f6e",
        "filename": "test/testrunner/env.py",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2017-07-26T20:18:44Z",
      "side": 1,
      "message": "False?",
      "range": {
        "startLine": 110,
        "startChar": 80,
        "endLine": 110,
        "endChar": 89
      },
      "revId": "60582f17fbfe71059ebbcaf28f8abc06bd995ef8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a45aafe_49fa0014",
        "filename": "test/testrunner/env.py",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-26T20:23:05Z",
      "side": 1,
      "message": "This already works in testrunner.py script\n\n   True -\u003e pass --build-with-jack to run-test\n   False -\u003e pass --build-with-javac to run-test\n   default -\u003e do not pass any extra args for run-test (uses run-test default)",
      "parentUuid": "b3246186_562b6f6e",
      "range": {
        "startLine": 110,
        "startChar": 80,
        "endLine": 110,
        "endChar": 89
      },
      "revId": "60582f17fbfe71059ebbcaf28f8abc06bd995ef8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "49f4c0fb_c306c93a",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2017-07-26T20:18:44Z",
      "side": 1,
      "message": "It might be worth making a helper script that does this, setpaths, and sets using_jack",
      "revId": "60582f17fbfe71059ebbcaf28f8abc06bd995ef8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "26ff0e93_e554eb0b",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-26T20:23:05Z",
      "side": 1,
      "message": "or we could export ANDROID_COMPILE_WITH_JACK from envsetup? :).",
      "parentUuid": "49f4c0fb_c306c93a",
      "revId": "60582f17fbfe71059ebbcaf28f8abc06bd995ef8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "60039cd5_32181f35",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2017-07-26T20:27:09Z",
      "side": 1,
      "message": "ANDROID_COMPILE_WITH_JACK is an input to the build, it should be set by envsetup.sh",
      "parentUuid": "26ff0e93_e554eb0b",
      "revId": "60582f17fbfe71059ebbcaf28f8abc06bd995ef8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ac084c4_1b5b9356",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-26T21:55:27Z",
      "side": 1,
      "message": "Doesn\u0027t seem to export it for me:\n\niam@invoker:/mnt/ssd3/workspace/aosp_master_art$ source build/envsetup.sh \nincluding device/generic/art/arm_krait/vendorsetup.sh\nincluding device/generic/art/armv8/vendorsetup.sh\nincluding device/generic/art/mips32r2_fp/vendorsetup.sh\nincluding device/generic/art/mips32r2_fp_xburst/vendorsetup.sh\nincluding device/generic/art/mips64r6/vendorsetup.sh\nincluding device/generic/art/silvermont/vendorsetup.sh\niam@invoker:/mnt/ssd3/workspace/aosp_master_art$ echo $ANDROID_COMPILE_WITH_JACK \niam@invoker:/mnt/ssd3/workspace/aosp_master_art$",
      "parentUuid": "60039cd5_32181f35",
      "revId": "60582f17fbfe71059ebbcaf28f8abc06bd995ef8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3842169d_032483b3",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-26T22:05:03Z",
      "side": 1,
      "message": "I took a look at envsetup.sh but it doesnt look like it actually exports anything until set_stuff_for_environment is called (from lunch).\n\nSo we could add an ART-specific script that does it but I\u0027m not really sure I see the value for just 2 lines?\n\nWould you prefer we add a script nevertheless?",
      "parentUuid": "2ac084c4_1b5b9356",
      "revId": "60582f17fbfe71059ebbcaf28f8abc06bd995ef8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e4f5d88a_97e2162c",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 66,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2017-07-26T20:18:44Z",
      "side": 1,
      "message": "This is super confusing, converting it to true/false is much better than propagating 0 for true.",
      "range": {
        "startLine": 66,
        "startChar": 6,
        "endLine": 66,
        "endChar": 23
      },
      "revId": "60582f17fbfe71059ebbcaf28f8abc06bd995ef8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7e4588ff_ab0c9329",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 66,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-26T20:23:05Z",
      "side": 1,
      "message": "This was done intentionally so that if we ever get rid of \"ANDROID_COMPILE_WITH_JACK\" buildvar, it will return empty on line 35 and thus not match \"true\"\n\nCurrently the code is\n\n   if $using_jack;  ...\n\nthis will also execute if using_jack\u003d\"\" which is undesirable.",
      "parentUuid": "e4f5d88a_97e2162c",
      "range": {
        "startLine": 66,
        "startChar": 6,
        "endLine": 66,
        "endChar": 23
      },
      "revId": "60582f17fbfe71059ebbcaf28f8abc06bd995ef8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a2e631ee_6b6caf7d",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 66,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2017-07-26T20:27:09Z",
      "side": 1,
      "message": "if [ \"$using_jack\" \u003d \"true\" ]; ...",
      "parentUuid": "7e4588ff_ab0c9329",
      "range": {
        "startLine": 66,
        "startChar": 6,
        "endLine": 66,
        "endChar": 23
      },
      "revId": "60582f17fbfe71059ebbcaf28f8abc06bd995ef8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f5534431_de8afde0",
        "filename": "tools/buildbot-build.sh",
        "patchSetId": 1
      },
      "lineNbr": 66,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-26T22:05:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a2e631ee_6b6caf7d",
      "range": {
        "startLine": 66,
        "startChar": 6,
        "endLine": 66,
        "endChar": 23
      },
      "revId": "60582f17fbfe71059ebbcaf28f8abc06bd995ef8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1e2eec86_723d9786",
        "filename": "tools/run-jdwp-tests.sh",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1084268
      },
      "writtenOn": "2017-07-26T21:07:33Z",
      "side": 1,
      "message": "This is an expensive operation as currently it takes more than 4 secs on my machine. Why not to avoid this if paths are already set?",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 8
      },
      "revId": "60582f17fbfe71059ebbcaf28f8abc06bd995ef8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2380e436_ec3407f2",
        "filename": "tools/run-jdwp-tests.sh",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-26T21:53:05Z",
      "side": 1,
      "message": "I agree it\u0027s expensive but run-jdwp-tests is very slow, it takes several minutes to run (on host), it\u0027s not worth optimizing it here.\n\nIf we wanted to fix it then the right place is in envsetup.sh, it\u0027s not hitting the var cache for some get_build_var that setpaths calls which is why its so slow.",
      "parentUuid": "1e2eec86_723d9786",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 8
      },
      "revId": "60582f17fbfe71059ebbcaf28f8abc06bd995ef8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}