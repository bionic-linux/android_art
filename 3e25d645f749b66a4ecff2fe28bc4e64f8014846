{
  "comments": [
    {
      "key": {
        "uuid": "4b7e5f7a_ebfc48e5",
        "filename": "tools/art",
        "patchSetId": 2
      },
      "lineNbr": 115,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-14T14:26:08Z",
      "side": 1,
      "message": "This is the problem, it\u0027s not what you fixed down there. eval causes expansion of $ variables.\n\nThe right way here is to duplicate the command line from 119 so it\u0027s both printed and then executed directly without eval.",
      "revId": "3e25d645f749b66a4ecff2fe28bc4e64f8014846",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "978f5bc1_2b1f36e7",
        "filename": "tools/art",
        "patchSetId": 2
      },
      "lineNbr": 115,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2017-07-14T15:05:28Z",
      "side": 1,
      "message": "I know this is where it gets expanded, the comment below also references the evaluation.",
      "parentUuid": "4b7e5f7a_ebfc48e5",
      "revId": "3e25d645f749b66a4ecff2fe28bc4e64f8014846",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "157a836b_5fea5e05",
        "filename": "tools/art",
        "patchSetId": 2
      },
      "lineNbr": 119,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-14T15:07:21Z",
      "side": 1,
      "message": "Anyway, it just needs to change this here:\n\n  if [ \"$VERBOSE\" \u003d \"yes\" ]; then\n   echo ANDROID_DATA\u003d$ANDROID_DATA               \\\n              ANDROID_ROOT\u003d$ANDROID_ROOT               \\\n              LD_LIBRARY_PATH\u003d$LD_LIBRARY_PATH         \\\n              PATH\u003d$ANDROID_ROOT/bin:$PATH             \\\n              LD_USE_LOAD_BIAS\u003d1                       \\\n              $LAUNCH_WRAPPER $ART_BINARY_PATH $lib    \\\n              -XXlib:$LIBART                           \\\n              -Xnorelocate                             \\\n              -Ximage:$ANDROID_ROOT/framework/core.art \\\n              \"$@\"\n   fi\n\n              ANDROID_DATA\u003d$ANDROID_DATA               \\\n              ANDROID_ROOT\u003d$ANDROID_ROOT               \\\n              LD_LIBRARY_PATH\u003d$LD_LIBRARY_PATH         \\\n              PATH\u003d$ANDROID_ROOT/bin:$PATH             \\\n              LD_USE_LOAD_BIAS\u003d1                       \\\n              $LAUNCH_WRAPPER $ART_BINARY_PATH $lib    \\\n              -XXlib:$LIBART                           \\\n              -Xnorelocate                             \\\n              -Ximage:$ANDROID_ROOT/framework/core.art \\\n              \"$@\"\n\nand delete verbose_run",
      "revId": "3e25d645f749b66a4ecff2fe28bc4e64f8014846",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dbbc923c_3517d875",
        "filename": "tools/art",
        "patchSetId": 2
      },
      "lineNbr": 260,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-14T14:34:12Z",
      "side": 1,
      "message": "As a small aside, this is a bit of a mess because arguments with \"\" will get broken\n\n  ./art ... \u0027arg\"arg\u0027 \n\nwill just cause it to blow up because the \" will be unterminated. (it expands to \"arg\"arg\" for the eval)\n\nAlthough with this PS it will be the other way around that\u0027s broken\n\n  ./art ... \"arg\u0027arg\"\n\n......\n\nproper way to fix is with arrays, and code ends up being shorter too.\n\n  EXTRA_OPTIONS+\u003d(\"$@\")\n  run_art \"${EXTRA_OPTIONS[@]}\"",
      "revId": "3e25d645f749b66a4ecff2fe28bc4e64f8014846",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "41abf070_34c81ef5",
        "filename": "tools/art",
        "patchSetId": 2
      },
      "lineNbr": 260,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2017-07-14T15:05:28Z",
      "side": 1,
      "message": "I\u0027m no expert on bash scripting. Feel free to take over.",
      "parentUuid": "dbbc923c_3517d875",
      "revId": "3e25d645f749b66a4ecff2fe28bc4e64f8014846",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21688559_6b86adce",
        "filename": "tools/art",
        "patchSetId": 2
      },
      "lineNbr": 260,
      "author": {
        "id": 1021471
      },
      "writtenOn": "2017-07-14T15:19:03Z",
      "side": 1,
      "message": "Up to you, I can upload new patch if you prefer?",
      "parentUuid": "41abf070_34c81ef5",
      "revId": "3e25d645f749b66a4ecff2fe28bc4e64f8014846",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0fe53fb8_5db6e7a5",
        "filename": "tools/art",
        "patchSetId": 2
      },
      "lineNbr": 260,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2017-07-14T15:29:45Z",
      "side": 1,
      "message": "Please do. I tried applying both changes you suggested (lines 119 and 260) and instead of\n\n  Unable to locate class \u0027$FOO\u0027\n\nI got\n\n  Unable to locate class \u0027\u0027",
      "parentUuid": "21688559_6b86adce",
      "revId": "3e25d645f749b66a4ecff2fe28bc4e64f8014846",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}