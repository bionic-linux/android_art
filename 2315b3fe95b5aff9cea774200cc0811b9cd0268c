{
  "comments": [
    {
      "key": {
        "uuid": "3045e884_72cab25f",
        "filename": "compiler/optimizing/nodes.h",
        "patchSetId": 1
      },
      "lineNbr": 5572,
      "author": {
        "id": 1015378
      },
      "writtenOn": "2016-11-16T17:32:59Z",
      "side": 1,
      "message": "Is there a way to make sure there are no suspend points in between? This is not safe if this pattern could occur:\n\n\nx \u003d LoadClass\n\nthread suspension point\n\nClInitCheck(x)\n\n\nThread suspension could start GC and have the GC see a pointer in from-space of previous GC as a root.",
      "range": {
        "startLine": 5572,
        "startChar": 7,
        "endLine": 5572,
        "endChar": 30
      },
      "revId": "2315b3fe95b5aff9cea774200cc0811b9cd0268c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3045e884_a0418058",
        "filename": "compiler/optimizing/nodes.h",
        "patchSetId": 1
      },
      "lineNbr": 5572,
      "author": {
        "id": 1022530
      },
      "writtenOn": "2016-11-16T19:13:12Z",
      "side": 1,
      "message": "Right. I don\u0027t know the answer to that.\n\nThis CL needs more thoughts.",
      "parentUuid": "3045e884_72cab25f",
      "range": {
        "startLine": 5572,
        "startChar": 7,
        "endLine": 5572,
        "endChar": 30
      },
      "revId": "2315b3fe95b5aff9cea774200cc0811b9cd0268c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f0e0b014_6fde2dcb",
        "filename": "compiler/optimizing/nodes.h",
        "patchSetId": 1
      },
      "lineNbr": 5572,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2016-11-21T10:25:27Z",
      "side": 1,
      "message": "A way to do this would be to turn this predicate into a Boolean and have PrepareForRegisterAllocation (which is the last IR graph transformation before liveness analysis \u0026 register allocation) check for this and set that Boolean value.\n\nAlso, I\u0027d recommend to augment the GraphChecker to check that there is no suspension point between a ClinitCheck and its LoadClass.",
      "parentUuid": "3045e884_a0418058",
      "range": {
        "startLine": 5572,
        "startChar": 7,
        "endLine": 5572,
        "endChar": 30
      },
      "revId": "2315b3fe95b5aff9cea774200cc0811b9cd0268c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f0e0b014_1286acfb",
        "filename": "compiler/optimizing/nodes.h",
        "patchSetId": 1
      },
      "lineNbr": 5572,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2016-11-21T15:42:04Z",
      "side": 1,
      "message": "I think what you could easily do for now, is check that the HLoadClass is just before the HClinit. That would probably cover most of the cases you saw.",
      "parentUuid": "f0e0b014_6fde2dcb",
      "range": {
        "startLine": 5572,
        "startChar": 7,
        "endLine": 5572,
        "endChar": 30
      },
      "revId": "2315b3fe95b5aff9cea774200cc0811b9cd0268c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}