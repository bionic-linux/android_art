{
  "comments": [
    {
      "key": {
        "uuid": "767b4193_3ff0223f",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 2
      },
      "lineNbr": 2445,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-28T09:30:01Z",
      "side": 1,
      "message": "Ouch, a bit more annoying than I anticipated (on the other hand you do mention that the checks are now close to ClassLoad and ClassPrepare events?)\n\nI still think this is better considering all the trouble Calin had to go though to avoid the JIT indirectly calling a helper that ends up loading a class. +calin, do I recall correctly?",
      "revId": "49e6773e22bfcd294464548c66c63702d61142e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "009b227c_5240048a",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 2
      },
      "lineNbr": 2445,
      "author": {
        "id": 1047769
      },
      "writtenOn": "2018-09-28T17:35:44Z",
      "side": 1,
      "message": "ack.\n\nYes I deliberately put the checks in the same functions as the ClassLoad and ClassPrepare calls.",
      "parentUuid": "767b4193_3ff0223f",
      "revId": "49e6773e22bfcd294464548c66c63702d61142e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e15d3e91_1a465c4d",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 2
      },
      "lineNbr": 2455,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-09-27T22:20:03Z",
      "side": 1,
      "message": "Why isn\u0027t the check just here?",
      "range": {
        "startLine": 2455,
        "startChar": 2,
        "endLine": 2455,
        "endChar": 29
      },
      "revId": "49e6773e22bfcd294464548c66c63702d61142e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da9a49e7_5e9e1c6c",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 2
      },
      "lineNbr": 2455,
      "author": {
        "id": 1047769
      },
      "writtenOn": "2018-09-27T22:26:32Z",
      "side": 1,
      "message": "I could put it here instead of in DefineClass but I wanted to put it in the same function that the calls to ClassLoad and ClassPrepare are made",
      "parentUuid": "e15d3e91_1a465c4d",
      "range": {
        "startLine": 2455,
        "startChar": 2,
        "endLine": 2455,
        "endChar": 29
      },
      "revId": "49e6773e22bfcd294464548c66c63702d61142e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "661299ac_b0c9881d",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 2
      },
      "lineNbr": 2455,
      "author": {
        "id": 1047769
      },
      "writtenOn": "2018-09-28T17:35:44Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "da9a49e7_5e9e1c6c",
      "range": {
        "startLine": 2455,
        "startChar": 2,
        "endLine": 2455,
        "endChar": 29
      },
      "revId": "49e6773e22bfcd294464548c66c63702d61142e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e4463f5b_27d03709",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 2
      },
      "lineNbr": 2455,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-10-01T21:58:03Z",
      "side": 1,
      "message": "But that lowers readability and duplicates code. Not sure that is a good tradeoff.",
      "parentUuid": "661299ac_b0c9881d",
      "range": {
        "startLine": 2455,
        "startChar": 2,
        "endLine": 2455,
        "endChar": 29
      },
      "revId": "49e6773e22bfcd294464548c66c63702d61142e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fd521a0b_c1103a79",
        "filename": "runtime/class_linker.cc",
        "patchSetId": 2
      },
      "lineNbr": 2455,
      "author": {
        "id": 1047769
      },
      "writtenOn": "2018-10-01T22:35:09Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e4463f5b_27d03709",
      "range": {
        "startLine": 2455,
        "startChar": 2,
        "endLine": 2455,
        "endChar": 29
      },
      "revId": "49e6773e22bfcd294464548c66c63702d61142e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7dfbbc6b_c765cbae",
        "filename": "runtime/jit/jit.cc",
        "patchSetId": 2
      },
      "lineNbr": 596,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-28T09:30:01Z",
      "side": 1,
      "message": "You shouldn\u0027t need this. The JIT can be configured to not load classes and live with it, not needing to toggle a state every time it enters a compilation.",
      "range": {
        "startLine": 579,
        "startChar": 0,
        "endLine": 596,
        "endChar": 0
      },
      "revId": "49e6773e22bfcd294464548c66c63702d61142e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b975805_87cd914e",
        "filename": "runtime/jit/jit.cc",
        "patchSetId": 2
      },
      "lineNbr": 596,
      "author": {
        "id": 1047769
      },
      "writtenOn": "2018-09-28T17:35:44Z",
      "side": 1,
      "message": "I guess. I could see in the future ppossibly having a ThreadPool shared by multiple users who might each want different states but whatever. Done.",
      "parentUuid": "7dfbbc6b_c765cbae",
      "range": {
        "startLine": 579,
        "startChar": 0,
        "endLine": 596,
        "endChar": 0
      },
      "revId": "49e6773e22bfcd294464548c66c63702d61142e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fe2e52ba_9f7e4593",
        "filename": "runtime/thread.h",
        "patchSetId": 2
      },
      "lineNbr": 1797,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2018-09-28T09:30:01Z",
      "side": 1,
      "message": "I think we can just live with one flag: is_runtime_thread and add helpers that class_linker will call:\n\nbool CanLoadClasses() const {\n return !is_runtime_thread || !IsDebuggable();\n}\n\nbool CanCallJava() const {\n  return !is_runtime_thread;\n}",
      "range": {
        "startLine": 1792,
        "startChar": 0,
        "endLine": 1797,
        "endChar": 25
      },
      "revId": "49e6773e22bfcd294464548c66c63702d61142e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fede27a3_86ff9829",
        "filename": "runtime/thread.h",
        "patchSetId": 2
      },
      "lineNbr": 1797,
      "author": {
        "id": 1047769
      },
      "writtenOn": "2018-09-28T17:35:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fe2e52ba_9f7e4593",
      "range": {
        "startLine": 1792,
        "startChar": 0,
        "endLine": 1797,
        "endChar": 25
      },
      "revId": "49e6773e22bfcd294464548c66c63702d61142e2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}