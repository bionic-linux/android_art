{
  "comments": [
    {
      "key": {
        "uuid": "dd421452_a82aa678",
        "filename": "runtime/oat_file.h",
        "patchSetId": 2
      },
      "lineNbr": 93,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-05T20:57:28Z",
      "side": 1,
      "message": "const is useless here. (and in the other places you used it as the parameter).",
      "range": {
        "startLine": 92,
        "startChar": 23,
        "endLine": 93,
        "endChar": 40
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "600f9905_0dd2ade5",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 102,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-05T20:57:28Z",
      "side": 1,
      "message": "Note that this can\u0027t be submitted before https://android-review.googlesource.com/c/platform/art/+/476977.",
      "range": {
        "startLine": 95,
        "startChar": 1,
        "endLine": 102,
        "endChar": 3
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f8e050bb_c5ca467a",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 102,
      "author": {
        "id": 1084268
      },
      "writtenOn": "2017-10-05T23:06:47Z",
      "side": 1,
      "message": "Why?",
      "parentUuid": "600f9905_0dd2ade5",
      "range": {
        "startLine": 95,
        "startChar": 1,
        "endLine": 102,
        "endChar": 3
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "271a79c3_fcda76ce",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 102,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-05T23:12:12Z",
      "side": 1,
      "message": "I guess you can submit it but once you tighten the selinux policy things will break :) So we just need to submit it before then.",
      "parentUuid": "f8e050bb_c5ca467a",
      "range": {
        "startLine": 95,
        "startChar": 1,
        "endLine": 102,
        "endChar": 3
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd8c0087_0c927a54",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 102,
      "author": {
        "id": 1084268
      },
      "writtenOn": "2017-10-05T23:20:00Z",
      "side": 1,
      "message": "Oh, yeah. Make sense. When are you planning to submit it? (I see Nicolas +2ed it long ago)",
      "parentUuid": "271a79c3_fcda76ce",
      "range": {
        "startLine": 95,
        "startChar": 1,
        "endLine": 102,
        "endChar": 3
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11a5925b_089bbb5d",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 126,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-05T20:57:28Z",
      "side": 1,
      "message": "This is not right. The oat location is different than the odex location and by using the same fd you equal them.\n\nI am happy if we assume the odex location when you pass fds for opening file. So you can set the inner fields of this one to reflect that there\u0027s no file (i.e. file_ \u003d null \u0026 load_attempted \u003d true \u0026 status_attempted \u003d true)",
      "range": {
        "startLine": 121,
        "startChar": 2,
        "endLine": 126,
        "endChar": 3
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "67a44a3b_960c977f",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 126,
      "author": {
        "id": 1084268
      },
      "writtenOn": "2017-10-05T23:06:47Z",
      "side": 1,
      "message": "Assuming it odex now.",
      "parentUuid": "11a5925b_089bbb5d",
      "range": {
        "startLine": 121,
        "startChar": 2,
        "endLine": 126,
        "endChar": 3
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d77f6687_52ac4ff0",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 137,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-05T20:57:28Z",
      "side": 1,
      "message": "this will fail as well with fds.\n\nSince we should assume the odex_ location when you pass fds I\u0027m ok if you set dex_parent_writable to true so that GetBestOatFile() takes the right oat file.",
      "range": {
        "startLine": 137,
        "startChar": 0,
        "endLine": 137,
        "endChar": 44
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b531c0c4_5c1d7a62",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 137,
      "author": {
        "id": 1084268
      },
      "writtenOn": "2017-10-05T23:06:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d77f6687_52ac4ff0",
      "range": {
        "startLine": 137,
        "startChar": 0,
        "endLine": 137,
        "endChar": 44
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e1efd976_10b69bee",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 1026,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-05T20:57:28Z",
      "side": 1,
      "message": "You need to handle this case as well.",
      "range": {
        "startLine": 1017,
        "startChar": 4,
        "endLine": 1026,
        "endChar": 28
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06e7dd50_dae59a98",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 1026,
      "author": {
        "id": 1084268
      },
      "writtenOn": "2017-10-05T23:06:47Z",
      "side": 1,
      "message": "GetFile() should not return nullptr with the fds are valid. Ideally, this will never hit.",
      "parentUuid": "e1efd976_10b69bee",
      "range": {
        "startLine": 1017,
        "startChar": 4,
        "endLine": 1026,
        "endChar": 28
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3cde870_fbcd43b9",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 1026,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-05T23:12:12Z",
      "side": 1,
      "message": "GetFile() will return null if you have a vdex but not an odex.\n\nI agree that it makes a pretty weird design and I\u0027ll be happy if we improve it (in another CL)",
      "parentUuid": "06e7dd50_dae59a98",
      "range": {
        "startLine": 1017,
        "startChar": 4,
        "endLine": 1026,
        "endChar": 28
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7fafa7d8_35eed502",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 1026,
      "author": {
        "id": 1084268
      },
      "writtenOn": "2017-10-05T23:20:00Z",
      "side": 1,
      "message": "With fd support, one has to provide fds for both odex and vdex. So this scenarios will never come that GetFile() return nullptr for odex provided a valid oat_fd.",
      "parentUuid": "a3cde870_fbcd43b9",
      "range": {
        "startLine": 1017,
        "startChar": 4,
        "endLine": 1026,
        "endChar": 28
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43133726_63c8a88a",
        "filename": "runtime/oat_file_assistant.cc",
        "patchSetId": 2
      },
      "lineNbr": 1026,
      "author": {
        "id": 1022077
      },
      "writtenOn": "2017-10-05T23:28:31Z",
      "side": 1,
      "message": "the oat file might fail to load for various reasons:\n- corruption (happened before)\n- out of date (i.e. different oat version)\n- and much more :) check the open workflow.",
      "parentUuid": "7fafa7d8_35eed502",
      "range": {
        "startLine": 1017,
        "startChar": 4,
        "endLine": 1026,
        "endChar": 28
      },
      "revId": "a77e2673429c77a472bb6933a3173f3e1c0dada6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}