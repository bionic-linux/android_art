{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "5d411629_ab88ea11",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2023-07-10T18:07:31Z",
      "side": 1,
      "message": "Does this change already significantly affect the size of the ART APEX? If so, could you mention this information in the commit message for compressed and non-compressed APEXes for Arm, Arm64, x86 and x86-64?\n\n(When mentioning this kind of information, I like to mention the size before and after the change as well as the delta in bytes and percentage change, but I\u0027ll let you decide what works best here.)",
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dbe1235d_928598b1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2023-07-17T15:17:52Z",
      "side": 1,
      "message": "BloatBuster was completely silent here, which presumably means it doesn\u0027t regress. However I\u0027m not entirely confident it catches everything, and it\u0027d also be interesting to see how much smaller it gets (if that\u0027s the case). So +1.",
      "parentUuid": "5d411629_ab88ea11",
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a8067509_0bb7e8e3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-19T16:49:43Z",
      "side": 1,
      "message": "ART APEX size for \u0027separate libart-compiler\u0027 VS \u0027merged libart+libart-compiler\u0027\nX86: 31,132.00 KiB -\u003e 31,412.00 KiB (+280.00 KiB, +0.90%)\nX86_64: 52,220.00 KiB -\u003e 53,032.00 KiB (+812.00 KiB, +1.55%)\nArm32: 25,572.00 KiB -\u003e 26,144.00 KiB (+572.00 KiB, +2.24%)\nArm64: 48,652.00 KiB -\u003e 50,208.00 KiB (+1556.00 KiB, +3.20%)\n\n\nTurns out there is a regression, which is caused by `strip.keep_symbols: true` in one of the `libart` defaults: https://cs.android.com/android/platform/superproject/main/+/main:art/runtime/Android.bp;l\u003d51-75\nThis negates most of the savings from hiding libart-compiler symbols. I\u0027ll try removing `keep_symbols` property and see if it works, then update the numbers.",
      "parentUuid": "dbe1235d_928598b1",
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "48dff4fc_2a4d8890",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2023-07-20T14:17:10Z",
      "side": 1,
      "message": "Thanks, it\u0027s interesting to see the size differences compared to before this change, but I\u0027d prefer if the strip change was a separate CL, so please make it a CL stack.",
      "parentUuid": "a8067509_0bb7e8e3",
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a014cb9c_5cf276d1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-25T23:18:24Z",
      "side": 1,
      "message": "With the CL to remove `keep_symbols` submitted (http://aosp/2673136), there is a slight size decrease after merging libart and libart-compiler. I\u0027ve put the numbers in the commit message.",
      "parentUuid": "48dff4fc_2a4d8890",
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3b9613c3_7b677444",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2023-07-26T14:28:23Z",
      "side": 1,
      "message": "Ok, if we\u0027re fine with stripping from an unwinding perspective then good. I assume we\u0027re confident that https://r.android.com/2673136 didn\u0027t affect that.",
      "parentUuid": "a014cb9c_5cf276d1",
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7fec86d1_c6214368",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2023-07-10T18:07:31Z",
      "side": 1,
      "message": "Could you also add (and verify) these:\n\n```\nTest: art/build/apex/runtests.sh\nTest: atest art-apex-update-rollback\nTest: m mts \u0026\u0026 mts-tradefed run commandAndExit mts-art\n```\n\n?",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 5
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "81f07152_c9d3087e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-14T12:54:30Z",
      "side": 1,
      "message": "How do I run the first two? I just tried on up-to-date aosp-main checkout (without the CL under review).\n\n`atest art-apex-update-rollback` gives:\n```\ncom.android.tests.apex.art.BrokenArtApexUpdateRollbackHostTest (1 Test)                                                             \n[1/1] com.android.tests.apex.art.BrokenArtApexUpdateRollbackHostTest#verifyArtApexIsRolledBack: FAILED (180ms)\n                                                                                                                                    \nSTACKTRACE:                                                                                                                         \njava.lang.NoClassDefFoundError: com/android/loganalysis/parser/LogcatParser\n...\n```\n\nAnd `art/build/apex/runtests.sh`:\n```\nart/build/apex/runtests.sh: Checking APEX package com.android.art.host\nart/build/apex/runtests.sh: APEX package path: out/host/linux-x86/apex/com.android.art.host.zipapex\nCould not find lib/libart-dexlayout.so\nRelease Checker FAILED\nCould not find lib/libartd-dexlayout.so\nDebug Checker FAILED\nart/build/apex/runtests.sh: FAILED: Checks failed on com.android.art.host\n```",
      "parentUuid": "7fec86d1_c6214368",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 5
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "48415e25_5655f5b2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2023-07-17T15:17:52Z",
      "side": 1,
      "message": "I\u0027m not familiar with art-apex-update-rollback, but if it fails the same way without your CL then it\u0027s fair to just note that it didn\u0027t regress.\n\nSame goes for runtests.sh. I see the host zipapex have lib64/libart-dexlayout{,d}.so files, but not the 32-bit libs. I haven\u0027t managed to figure out how and when it broke, but we\u0027re moving away from zipapex so I\u0027m not too inclined to get to the bottom with it.",
      "parentUuid": "81f07152_c9d3087e",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 5
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1570b789_69c47b78",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-19T16:49:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "48415e25_5655f5b2",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 5
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef9f75d1_8c42d843",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2023-07-28T13:13:51Z",
      "side": 1,
      "message": "Thanks for mentioning these issues, Dmitrii; I\u0027ll look into them.\n\nAs Martin said, what matters here is to not introduce regressions; if the tests are already failing, it\u0027s fine to ignore them.",
      "parentUuid": "1570b789_69c47b78",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 5
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "713618d8_adfb3508",
        "filename": "compiler/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 74,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2023-07-10T18:07:31Z",
      "side": 1,
      "message": "Nit: Long line.",
      "range": {
        "startLine": 74,
        "startChar": 0,
        "endLine": 74,
        "endChar": 107
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fdef056a_4f694798",
        "filename": "compiler/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 74,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-14T12:54:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "713618d8_adfb3508",
      "range": {
        "startLine": 74,
        "startChar": 0,
        "endLine": 74,
        "endChar": 107
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9913347f_222b7cd4",
        "filename": "compiler/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2023-07-10T18:07:31Z",
      "side": 1,
      "message": "Ditto.",
      "range": {
        "startLine": 87,
        "startChar": 0,
        "endLine": 87,
        "endChar": 105
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6c0522e9_b1681503",
        "filename": "compiler/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-14T12:54:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9913347f_222b7cd4",
      "range": {
        "startLine": 87,
        "startChar": 0,
        "endLine": 87,
        "endChar": 105
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c4aba820_cd0a635e",
        "filename": "compiler/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 124,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2023-07-10T18:07:31Z",
      "side": 1,
      "message": "Ditto.",
      "range": {
        "startLine": 124,
        "startChar": 0,
        "endLine": 124,
        "endChar": 108
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "053da062_04927c54",
        "filename": "compiler/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 124,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-14T12:54:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c4aba820_cd0a635e",
      "range": {
        "startLine": 124,
        "startChar": 0,
        "endLine": 124,
        "endChar": 108
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5290969b_29715efb",
        "filename": "compiler/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2023-07-10T18:07:31Z",
      "side": 1,
      "message": "Ditto.",
      "range": {
        "startLine": 137,
        "startChar": 0,
        "endLine": 137,
        "endChar": 105
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1baec251_d6114a4f",
        "filename": "compiler/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-14T12:54:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5290969b_29715efb",
      "range": {
        "startLine": 137,
        "startChar": 0,
        "endLine": 137,
        "endChar": 105
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dc184f64_610caeed",
        "filename": "runtime/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 731,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2023-07-10T18:07:31Z",
      "side": 1,
      "message": "Nit: Long line.",
      "range": {
        "startLine": 731,
        "startChar": 0,
        "endLine": 731,
        "endChar": 104
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7d867e82_8e82b270",
        "filename": "runtime/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 731,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-14T12:54:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dc184f64_610caeed",
      "range": {
        "startLine": 731,
        "startChar": 0,
        "endLine": 731,
        "endChar": 104
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8fa5003f_d341905c",
        "filename": "runtime/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 803,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2023-07-10T18:07:31Z",
      "side": 1,
      "message": "Is this still needed, as `libart-runtime` is a static library and no longer a direct component of any ART APEX?",
      "range": {
        "startLine": 794,
        "startChar": 0,
        "endLine": 803,
        "endChar": 6
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e81f496f_f55cc954",
        "filename": "runtime/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 803,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-14T12:54:30Z",
      "side": 1,
      "message": "Looks like it\u0027s still required:\n\n\nmodule \"com.android.art.debug\" variant \"android_common_com.android.art.debug_image\": \"libart\" requires \"libart-runtime\" that doesn\u0027t list the APEX under \u0027apex_available\u0027.",
      "parentUuid": "8fa5003f_d341905c",
      "range": {
        "startLine": 794,
        "startChar": 0,
        "endLine": 803,
        "endChar": 6
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "943a1a27_efbcfa8c",
        "filename": "runtime/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 826,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2023-07-10T18:07:31Z",
      "side": 1,
      "message": "Is this still needed, as `libart-runtime-broken` is a static library and no longer a direct component of any ART APEX?",
      "range": {
        "startLine": 819,
        "startChar": 0,
        "endLine": 826,
        "endChar": 6
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "406a9bec_95ddb997",
        "filename": "runtime/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 826,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-14T12:54:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "943a1a27_efbcfa8c",
      "range": {
        "startLine": 819,
        "startChar": 0,
        "endLine": 826,
        "endChar": 6
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cfefea69_7c0d18fd",
        "filename": "runtime/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 848,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2023-07-10T18:07:31Z",
      "side": 1,
      "message": "Is this still needed, as `libartd-runtime` is a static library and no longer a direct component of any ART APEX?",
      "range": {
        "startLine": 841,
        "startChar": 0,
        "endLine": 848,
        "endChar": 6
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "40d9edf9_c931061a",
        "filename": "runtime/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 848,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-14T12:54:30Z",
      "side": 1,
      "message": "module \"com.android.art.debug\" variant \"android_common_com.android.art.debug_image\": \"libartd\" requires \"libartd-runtime\" that doesn\u0027t list the APEX under \u0027apex_available\u0027.",
      "parentUuid": "cfefea69_7c0d18fd",
      "range": {
        "startLine": 841,
        "startChar": 0,
        "endLine": 848,
        "endChar": 6
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "76f07207_639cb80a",
        "filename": "runtime/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 864,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2023-07-10T18:07:31Z",
      "side": 1,
      "message": "I think this comment should be removed, as `libart` is part of `com.android.art`.",
      "range": {
        "startLine": 862,
        "startChar": 0,
        "endLine": 864,
        "endChar": 50
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c991d3b7_29f150f2",
        "filename": "runtime/Android.bp",
        "patchSetId": 4
      },
      "lineNbr": 864,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-14T12:54:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "76f07207_639cb80a",
      "range": {
        "startLine": 862,
        "startChar": 0,
        "endLine": 864,
        "endChar": 50
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "860f09ba_636a3ede",
        "filename": "runtime/jit/jit.cc",
        "patchSetId": 4
      },
      "lineNbr": 189,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2023-07-10T18:07:31Z",
      "side": 1,
      "message": "Perhaps we should return an `std::unique_ptr\u003cJit\u003e` here, to make the ownership of the `Jit` object more explicit (maybe in a follow-up CL).",
      "range": {
        "startLine": 189,
        "startChar": 0,
        "endLine": 189,
        "endChar": 4
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "730358cf_9d3d2ec6",
        "filename": "runtime/jit/jit.cc",
        "patchSetId": 4
      },
      "lineNbr": 189,
      "author": {
        "id": 1963262
      },
      "writtenOn": "2023-07-14T12:54:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "860f09ba_636a3ede",
      "range": {
        "startLine": 189,
        "startChar": 0,
        "endLine": 189,
        "endChar": 4
      },
      "revId": "ec080764b7143571796609bde81045d3ddb07cb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}